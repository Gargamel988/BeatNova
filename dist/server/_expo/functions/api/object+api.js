var __BUNDLE_START_TIME__=globalThis.nativePerformanceNow?nativePerformanceNow():Date.now(),__DEV__=false,process=globalThis.process||{},__METRO_GLOBAL_PREFIX__='';
!(function(e){'use strict';e[`${__METRO_GLOBAL_PREFIX__}__d`]||(e.__r=i,e[`${__METRO_GLOBAL_PREFIX__}__d`]=function(e,n,o){if(t.has(n))return;const i={dependencyMap:o,factory:e,hasError:!1,importedAll:r,importedDefault:r,isInitialized:!1,publicModule:{exports:{}}};t.set(n,i)},e.__c=o,e.__registerSegment=function(e,r,n){c[e]=r,n&&n.forEach(r=>{t.has(r)||s.has(r)||s.set(r,e)})});var t=o();const r={},{hasOwnProperty:n}={};function o(){return t=new Map}function i(e,r){if(null===e)throw new Error('Cannot find module');const n=t.get(e);return n&&n.isInitialized?n.publicModule.exports:a(e,n,r)}function l(e){var n;if(t.has(e)&&(null==(n=t.get(e))?void 0:n.importedDefault)!==r)return t.get(e).importedDefault;const o=i(e),l=o&&o.__esModule?o.default:o;return t.get(e).importedDefault=l}function u(e){var o;if(t.has(e)&&(null==(o=t.get(e))?void 0:o.importedAll)!==r)return t.get(e).importedAll;const l=i(e);let u;if(l&&l.__esModule)u=l;else{if(u={},l)for(const e in l)n.call(l,e)&&(u[e]=l[e]);u.default=l}return t.get(e).importedAll=u}i.importDefault=l,i[Symbol.for('expo.require')]=!0,i.importAll=u,i.context=function(){throw new Error('The experimental Metro feature `require.context` is not enabled in your project.')},i.resolveWeak=function(){throw new Error('require.resolveWeak cannot be called dynamically.')},i.unguarded=function(e,r){const n=t.get(e);return n&&n.isInitialized?n.publicModule.exports:f(e,n,r)};let d=!1;function a(t,r,n){if(!d&&e.ErrorUtils){let o;d=!0;try{o=f(t,r,n)}catch(t){e.ErrorUtils.reportFatalError(t)}return d=!1,o}return f(t,r,n)}i.unpackModuleId=function(e){if('number'!=typeof e)throw new Error('Module ID must be a number in unpackModuleId.');return{segmentId:e>>>16,localId:65535&e}},i.packModuleId=function(e){return(e.segmentId<<16)+e.localId};const c=[],s=new Map;function f(r,n,o){if(!n&&c.length>0){const e=s.get(r)??0,o=c[e];null!=o&&(o(r),n=t.get(r),s.delete(r))}if(!n)throw p(r,o);if(n.hasError)throw n.error;n.isInitialized=!0;const{factory:d,dependencyMap:a}=n;try{const t=n.publicModule;return t.id=r,null==d||d(e,i,l,u,t,t.exports,a),n.factory=void 0,n.dependencyMap=void 0,t.exports}catch(e){throw n.hasError=!0,n.error=e,n.isInitialized=!1,n.publicModule.exports=void 0,e}}function p(e,t){return Error('Requiring unknown module "'+(e??t??"[unknown optional import]")+'".')}})('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window?window:this);
!(function(e){e.$$require_external="undefined"!=typeof require?e=>require(e):()=>null})('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window?window:this);
'undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window&&window;
!(function(n){const e=(function(){function n(n,e){return n}function e(n){var e={};return n.forEach(function(n,t){e[n]=!0}),e}function t(n,t,u){if(n.formatValueCalls++,n.formatValueCalls>200)return`[TOO BIG formatValueCalls ${n.formatValueCalls} exceeded limit of 200]`;var c=r(n,t);if(c)return c;var s=Object.keys(t),f=e(s);if(d(t)&&(s.indexOf('message')>=0||s.indexOf('description')>=0))return o(t);if(0===s.length){if(h(t)){var g=t.name?': '+t.name:'';return n.stylize('[Function'+g+']','special')}if(p(t))return n.stylize(RegExp.prototype.toString.call(t),'regexp');if(y(t))return n.stylize(Date.prototype.toString.call(t),'date');if(d(t))return o(t)}var m,v,b='',j=!1,O=['{','}'];(m=t,Array.isArray(m)&&(j=!0,O=['[',']']),h(t))&&(b=' [Function'+(t.name?': '+t.name:'')+']');return p(t)&&(b=' '+RegExp.prototype.toString.call(t)),y(t)&&(b=' '+Date.prototype.toUTCString.call(t)),d(t)&&(b=' '+o(t)),0!==s.length||j&&0!=t.length?u<0?p(t)?n.stylize(RegExp.prototype.toString.call(t),'regexp'):n.stylize('[Object]','special'):(n.seen.push(t),v=j?i(n,t,u,f,s):s.map(function(e){return l(n,t,u,f,e,j)}),n.seen.pop(),a(v,b,O)):O[0]+b+O[1]}function r(n,e){if(f(e))return n.stylize('undefined','undefined');if('string'==typeof e){var t="'"+JSON.stringify(e).replace(/^"|"$/g,'').replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return n.stylize(t,'string')}return s(e)?n.stylize(''+e,'number'):u(e)?n.stylize(''+e,'boolean'):c(e)?n.stylize('null','null'):void 0}function o(n){return'['+Error.prototype.toString.call(n)+']'}function i(n,e,t,r,o){for(var i=[],a=0,u=e.length;a<u;++a)v(e,String(a))?i.push(l(n,e,t,r,String(a),!0)):i.push('');return o.forEach(function(o){o.match(/^\d+$/)||i.push(l(n,e,t,r,o,!0))}),i}function l(n,e,r,o,i,l){var a,u,s;if((s=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?u=s.set?n.stylize('[Getter/Setter]','special'):n.stylize('[Getter]','special'):s.set&&(u=n.stylize('[Setter]','special')),v(o,i)||(a='['+i+']'),u||(n.seen.indexOf(s.value)<0?(u=c(r)?t(n,s.value,null):t(n,s.value,r-1)).indexOf('\n')>-1&&(u=l?u.split('\n').map(function(n){return'  '+n}).join('\n').slice(2):'\n'+u.split('\n').map(function(n){return'   '+n}).join('\n')):u=n.stylize('[Circular]','special')),f(a)){if(l&&i.match(/^\d+$/))return u;(a=JSON.stringify(''+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,a.length-1),a=n.stylize(a,'name')):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=n.stylize(a,'string'))}return a+': '+u}function a(n,e,t){return n.reduce(function(n,e){return e.indexOf('\n')>=0&&0,n+e.replace(/\u001b\[\d\d?m/g,'').length+1},0)>60?t[0]+(''===e?'':e+'\n ')+' '+n.join(',\n  ')+' '+t[1]:t[0]+e+' '+n.join(', ')+' '+t[1]}function u(n){return'boolean'==typeof n}function c(n){return null===n}function s(n){return'number'==typeof n}function f(n){return void 0===n}function p(n){return g(n)&&'[object RegExp]'===m(n)}function g(n){return'object'==typeof n&&null!==n}function y(n){return g(n)&&'[object Date]'===m(n)}function d(n){return g(n)&&('[object Error]'===m(n)||n instanceof Error)}function h(n){return'function'==typeof n}function m(n){return Object.prototype.toString.call(n)}function v(n,e){return Object.prototype.hasOwnProperty.call(n,e)}return function(e,r){return t({seen:[],formatValueCalls:0,stylize:n},e,r.depth)}})(),t='(index)',r=0,o=1,i=2,l=3;function a(t){return function(){let r;r=1===arguments.length&&'string'==typeof arguments[0]?arguments[0]:Array.prototype.map.call(arguments,function(n){return e(n,{depth:10})}).join(', ');const o=arguments[0];let a=t;'string'==typeof o&&'Warning: '===o.slice(0,9)&&a>=l&&(a=i),s.length&&(r=f('',r)),n.nativeLoggingHook(r,a)}}function u(n,e){return Array.apply(null,Array(e)).map(function(){return n})}function c(n,e){if(e===t)return n[e];if(n.hasOwnProperty(e)){var r=n[e];switch(typeof r){case'function':return'\u0192';case'string':return"'"+r+"'";case'object':return null==r?'null':'{\u2026}'}return String(r)}return''}const s=[];function f(n,e){return s.join('')+n+' '+(e||'')}if(n.nativeLoggingHook){const y=n.console;if(n.console={timeStamp:function(){},...y??{},error:a(l),info:a(o),log:a(o),warn:a(i),trace:a(r),debug:a(r),table:function(e,r){var i;if(Array.isArray(e))i=e.map((n,e)=>{var r={};return r[t]=String(e),Object.assign(r,n),r});else for(var l in i=[],e)if(e.hasOwnProperty(l)){var a={};a[t]=l,Object.assign(a,e[l]),i.push(a)}if(0!==i.length){r=Array.isArray(r)?[t].concat(r):Array.from(i.reduce((n,e)=>(Object.keys(e).forEach(e=>n.add(e)),n),new Set));var s=[],f=[];r.forEach(function(n,e){f[e]=n.length;for(var t=0;t<i.length;t++){var r=c(i[t],n);s[t]=s[t]||[],s[t][e]=r,f[e]=Math.max(f[e],r.length)}});for(var p=d(f.map(function(n){return u('-',n).join('')})),g=[d(r),p],y=0;y<i.length;y++)g.push(d(s[y]));n.nativeLoggingHook('\n'+g.join('\n'),o)}else n.nativeLoggingHook('',o);function d(n,e){var t=n.map(function(n,e){return n+u(' ',f[e]-n.length).join('')});return e=e||' ','| '+t.join(e+'|'+e)+' |'}},group:function(e){n.nativeLoggingHook(f("\u2510",e),o),s.push("\u2502")},groupEnd:function(){s.pop(),n.nativeLoggingHook(f("\u2518"),o)},groupCollapsed:function(e){n.nativeLoggingHook(f("\u2518",e),o),s.push("\u2502")},assert:function(e,t){e||n.nativeLoggingHook('Assertion failed: '+t,l)}},!0===n.RN$useAlwaysAvailableJSErrorHandling){let d=console.error;function p(n){return e(n,{depth:10}).replace(/\n\s*/g,' ')}console.reportErrorsAsExceptions=!0,console.error=function(...e){if(d.apply(this,e),!console.reportErrorsAsExceptions)return;if(n.RN$inExceptionHandler?.())return;let t;const r=e[0];if(r?.stack)t=r;else{if('string'==typeof r&&r.startsWith('Warning: '))return;const n=e.map(n=>'string'==typeof n?n:p(n)).join(' ');t=new Error(n),t.name='console.error'}n.RN$handleException(t,!1,!1)}}Object.defineProperty(console,'_isPolyfilled',{value:!0,enumerable:!1})}else if(!n.console){function g(){}const h=n.print||g;n.console={debug:h,error:h,info:h,log:h,trace:h,warn:h,assert(n,e){n||h('Assertion failed: '+e)},clear:g,dir:g,dirxml:g,group:g,groupCollapsed:g,groupEnd:g,profile:g,profileEnd:g,table:g,timeStamp:g},Object.defineProperty(console,'_isPolyfilled',{value:!0,enumerable:!1})}})('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window?window:this);
!(function(r){let l=0,n=!0===r.RN$useAlwaysAvailableJSErrorHandling?r.RN$handleException:(r,l)=>{throw r};const t={setGlobalHandler(r){n=r},getGlobalHandler:()=>n,reportError(r){n&&n(r,!1)},reportFatalError(r){n&&n(r,!0)},applyWithGuard(r,n,e,a,o){try{return l++,r.apply(n,e)}catch(r){t.reportError(r)}finally{l--}return null},applyWithGuardIfNeeded:(r,l,n)=>t.inGuard()?r.apply(l,n):(t.applyWithGuard(r,l,n),null),inGuard:()=>!!l,guard(r,l,n){if('function'!=typeof r)return console.warn('A function must be passed to ErrorUtils.guard, got ',r),null;const e=l??r.name??'<generated guard>';return function(...l){return t.applyWithGuard(r,n??this,l,null,e)}}};r.ErrorUtils=t})('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window?window:this);
__d(function(g,r,_i,a,m,e,d){m.exports={nanoid:(t=21)=>{let n='',o=0|t;for(;o--;)n+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return n},customAlphabet:(t,n=21)=>(o=n)=>{let h='',l=0|o;for(;l--;)h+=t[Math.random()*t.length|0];return h}}},290,[]);
__d(function(g,r,i,a,m,_e,_d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return n}}),Object.defineProperty(_e,"z",{enumerable:!0,get:function(){return t}});var e=r(_d[0]);Object.keys(e).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(_e,t)||Object.defineProperty(_e,t,{enumerable:!0,get:function(){return e[t]}})});var t=(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(n){var u=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,u.get?u:{enumerable:!0,get:function(){return e[n]}})}),t.default=e,t})(e),n=t},3017,[3018]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});var t=r(d[0]);Object.keys(t).forEach(function(n){'default'===n||Object.prototype.hasOwnProperty.call(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})});var n=r(d[1]);Object.keys(n).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var c=r(d[2]);Object.keys(c).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})});var o=r(d[3]);Object.keys(o).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var u=r(d[4]);Object.keys(u).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})});var f=r(d[5]);Object.keys(f).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}})})},3018,[3019,3023,3024,3022,3025,3021]);
__d(function(g,r,i,a,m,_e,d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"defaultErrorMap",{enumerable:!0,get:function(){return u.default}}),_e.setErrorMap=function(e){n=e},_e.getErrorMap=function(){return n};var e,t=r(d[0]),u=(e=t)&&e.__esModule?e:{default:e};let n=u.default},3019,[3020]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return s}});var t=r(d[0]),n=r(d[1]);var s=(s,u)=>{let o;switch(s.code){case t.ZodIssueCode.invalid_type:o=s.received===n.ZodParsedType.undefined?"Required":`Expected ${s.expected}, received ${s.received}`;break;case t.ZodIssueCode.invalid_literal:o=`Invalid literal value, expected ${JSON.stringify(s.expected,n.util.jsonStringifyReplacer)}`;break;case t.ZodIssueCode.unrecognized_keys:o=`Unrecognized key(s) in object: ${n.util.joinValues(s.keys,", ")}`;break;case t.ZodIssueCode.invalid_union:o="Invalid input";break;case t.ZodIssueCode.invalid_union_discriminator:o=`Invalid discriminator value. Expected ${n.util.joinValues(s.options)}`;break;case t.ZodIssueCode.invalid_enum_value:o=`Invalid enum value. Expected ${n.util.joinValues(s.options)}, received '${s.received}'`;break;case t.ZodIssueCode.invalid_arguments:o="Invalid function arguments";break;case t.ZodIssueCode.invalid_return_type:o="Invalid function return type";break;case t.ZodIssueCode.invalid_date:o="Invalid date";break;case t.ZodIssueCode.invalid_string:"object"==typeof s.validation?"includes"in s.validation?(o=`Invalid input: must include "${s.validation.includes}"`,"number"==typeof s.validation.position&&(o=`${o} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?o=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?o=`Invalid input: must end with "${s.validation.endsWith}"`:n.util.assertNever(s.validation):o="regex"!==s.validation?`Invalid ${s.validation}`:"Invalid";break;case t.ZodIssueCode.too_small:o="array"===s.type?`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:"string"===s.type?`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:"number"===s.type||"bigint"===s.type?`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:"date"===s.type?`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:"Invalid input";break;case t.ZodIssueCode.too_big:o="array"===s.type?`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:"string"===s.type?`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:"number"===s.type?`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:"bigint"===s.type?`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:"date"===s.type?`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:"Invalid input";break;case t.ZodIssueCode.custom:o="Invalid input";break;case t.ZodIssueCode.invalid_intersection_types:o="Intersection results could not be merged";break;case t.ZodIssueCode.not_multiple_of:o=`Number must be a multiple of ${s.multipleOf}`;break;case t.ZodIssueCode.not_finite:o="Number must be finite";break;default:o=u.defaultError,n.util.assertNever(s)}return{message:o}}},3020,[3021,3022]);
__d(function(g,r,_i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"ZodIssueCode",{enumerable:!0,get:function(){return s}}),Object.defineProperty(e,"quotelessJson",{enumerable:!0,get:function(){return i}}),Object.defineProperty(e,"ZodError",{enumerable:!0,get:function(){return n}});var t=r(d[0]);const s=t.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),i=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class n extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=t=>{this.issues=[...this.issues,t]},this.addIssues=(t=[])=>{this.issues=[...this.issues,...t]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=t}format(t){const s=t||function(t){return t.message},i={_errors:[]},n=t=>{for(const o of t.issues)if("invalid_union"===o.code)o.unionErrors.map(n);else if("invalid_return_type"===o.code)n(o.returnTypeError);else if("invalid_arguments"===o.code)n(o.argumentsError);else if(0===o.path.length)i._errors.push(s(o));else{let t=i,n=0;for(;n<o.path.length;){const i=o.path[n];n===o.path.length-1?(t[i]=t[i]||{_errors:[]},t[i]._errors.push(s(o))):t[i]=t[i]||{_errors:[]},t=t[i],n++}}};return n(this),i}static assert(t){if(!(t instanceof n))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,t.util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(t=t=>t.message){const s={},i=[];for(const n of this.issues)if(n.path.length>0){const i=n.path[0];s[i]=s[i]||[],s[i].push(t(n))}else i.push(t(n));return{formErrors:i,fieldErrors:s}}get formErrors(){return this.flatten()}}n.create=t=>new n(t)},3021,[3022]);
__d(function(g,r,i,a,m,_e,d){"use strict";var e,n;Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"util",{enumerable:!0,get:function(){return e}}),Object.defineProperty(_e,"objectUtil",{enumerable:!0,get:function(){return n}}),Object.defineProperty(_e,"ZodParsedType",{enumerable:!0,get:function(){return t}}),Object.defineProperty(_e,"getParsedType",{enumerable:!0,get:function(){return o}}),(function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const n={};for(const t of e)n[t]=t;return n},e.getValidEnumValues=n=>{const t=e.objectKeys(n).filter(e=>"number"!=typeof n[n[e]]),o={};for(const e of t)o[e]=n[e];return e.objectValues(o)},e.objectValues=n=>e.objectKeys(n).map(function(e){return n[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const n=[];for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n},e.find=(e,n)=>{for(const t of e)if(n(t))return t},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,n=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(n)},e.jsonStringifyReplacer=(e,n)=>"bigint"==typeof n?n.toString():n})(e||(e={})),(function(e){e.mergeShapes=(e,n)=>({...e,...n})})(n||(n={}));const t=e.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),o=e=>{switch(typeof e){case"undefined":return t.undefined;case"string":return t.string;case"number":return Number.isNaN(e)?t.nan:t.number;case"boolean":return t.boolean;case"function":return t.function;case"bigint":return t.bigint;case"symbol":return t.symbol;case"object":return Array.isArray(e)?t.array:null===e?t.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?t.promise:"undefined"!=typeof Map&&e instanceof Map?t.map:"undefined"!=typeof Set&&e instanceof Set?t.set:"undefined"!=typeof Date&&e instanceof Date?t.date:t.object;default:return t.unknown}}},3022,[]);
__d(function(g,r,i,a,_m,_e,d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"makeIssue",{enumerable:!0,get:function(){return n}}),Object.defineProperty(_e,"EMPTY_PATH",{enumerable:!0,get:function(){return o}}),_e.addIssueToContext=function(e,s){const o=(0,t.getErrorMap)(),c=n({issueData:s,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,o,o===u.default?void 0:u.default].filter(e=>!!e)});e.common.issues.push(c)},Object.defineProperty(_e,"ParseStatus",{enumerable:!0,get:function(){return c}}),Object.defineProperty(_e,"INVALID",{enumerable:!0,get:function(){return l}}),Object.defineProperty(_e,"DIRTY",{enumerable:!0,get:function(){return f}}),Object.defineProperty(_e,"OK",{enumerable:!0,get:function(){return b}}),Object.defineProperty(_e,"isAborted",{enumerable:!0,get:function(){return y}}),Object.defineProperty(_e,"isDirty",{enumerable:!0,get:function(){return v}}),Object.defineProperty(_e,"isValid",{enumerable:!0,get:function(){return p}}),Object.defineProperty(_e,"isAsync",{enumerable:!0,get:function(){return m}});var e,t=r(d[0]),s=r(d[1]),u=(e=s)&&e.__esModule?e:{default:e};const n=e=>{const{data:t,path:s,errorMaps:u,issueData:n}=e,o=[...s,...n.path||[]],c={...n,path:o};if(void 0!==n.message)return{...n,path:o,message:n.message};let l="";const f=u.filter(e=>!!e).slice().reverse();for(const e of f)l=e(c,{data:t,defaultError:l}).message;return{...n,path:o,message:l}},o=[];class c{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const u of t){if("aborted"===u.status)return l;"dirty"===u.status&&e.dirty(),s.push(u.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const e of t){const t=await e.key,u=await e.value;s.push({key:t,value:u})}return c.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const u of t){const{key:t,value:n}=u;if("aborted"===t.status)return l;if("aborted"===n.status)return l;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"===t.value||void 0===n.value&&!u.alwaysSet||(s[t.value]=n.value)}return{status:e.value,value:s}}}const l=Object.freeze({status:"aborted"}),f=e=>({status:"dirty",value:e}),b=e=>({status:"valid",value:e}),y=e=>"aborted"===e.status,v=e=>"dirty"===e.status,p=e=>"valid"===e.status,m=e=>"undefined"!=typeof Promise&&e instanceof Promise},3023,[3019,3020]);
__d(function(g,r,i,a,m,e,d){},3024,[]);
__d(function(g,_r,_i,_a,m,_e,d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"ZodType",{enumerable:!0,get:function(){return u}}),_e.datetimeRegex=A,Object.defineProperty(_e,"ZodString",{enumerable:!0,get:function(){return U}}),Object.defineProperty(_e,"ZodNumber",{enumerable:!0,get:function(){return R}}),Object.defineProperty(_e,"ZodBigInt",{enumerable:!0,get:function(){return E}}),Object.defineProperty(_e,"ZodBoolean",{enumerable:!0,get:function(){return V}}),Object.defineProperty(_e,"ZodDate",{enumerable:!0,get:function(){return F}}),Object.defineProperty(_e,"ZodSymbol",{enumerable:!0,get:function(){return M}}),Object.defineProperty(_e,"ZodUndefined",{enumerable:!0,get:function(){return z}}),Object.defineProperty(_e,"ZodNull",{enumerable:!0,get:function(){return $}}),Object.defineProperty(_e,"ZodAny",{enumerable:!0,get:function(){return K}}),Object.defineProperty(_e,"ZodUnknown",{enumerable:!0,get:function(){return B}}),Object.defineProperty(_e,"ZodNever",{enumerable:!0,get:function(){return W}}),Object.defineProperty(_e,"ZodVoid",{enumerable:!0,get:function(){return Y}}),Object.defineProperty(_e,"ZodArray",{enumerable:!0,get:function(){return q}}),Object.defineProperty(_e,"ZodObject",{enumerable:!0,get:function(){return J}}),Object.defineProperty(_e,"ZodUnion",{enumerable:!0,get:function(){return G}}),Object.defineProperty(_e,"ZodDiscriminatedUnion",{enumerable:!0,get:function(){return Q}}),Object.defineProperty(_e,"ZodIntersection",{enumerable:!0,get:function(){return te}}),Object.defineProperty(_e,"ZodTuple",{enumerable:!0,get:function(){return re}}),Object.defineProperty(_e,"ZodRecord",{enumerable:!0,get:function(){return se}}),Object.defineProperty(_e,"ZodMap",{enumerable:!0,get:function(){return ne}}),Object.defineProperty(_e,"ZodSet",{enumerable:!0,get:function(){return ae}}),Object.defineProperty(_e,"ZodFunction",{enumerable:!0,get:function(){return ie}}),Object.defineProperty(_e,"ZodLazy",{enumerable:!0,get:function(){return de}}),Object.defineProperty(_e,"ZodLiteral",{enumerable:!0,get:function(){return oe}}),Object.defineProperty(_e,"ZodEnum",{enumerable:!0,get:function(){return ce}}),Object.defineProperty(_e,"ZodNativeEnum",{enumerable:!0,get:function(){return le}}),Object.defineProperty(_e,"ZodPromise",{enumerable:!0,get:function(){return pe}}),Object.defineProperty(_e,"ZodEffects",{enumerable:!0,get:function(){return he}}),Object.defineProperty(_e,"ZodTransformer",{enumerable:!0,get:function(){return he}}),Object.defineProperty(_e,"ZodOptional",{enumerable:!0,get:function(){return fe}}),Object.defineProperty(_e,"ZodNullable",{enumerable:!0,get:function(){return me}}),Object.defineProperty(_e,"ZodDefault",{enumerable:!0,get:function(){return ye}}),Object.defineProperty(_e,"ZodCatch",{enumerable:!0,get:function(){return ge}}),Object.defineProperty(_e,"ZodNaN",{enumerable:!0,get:function(){return ve}}),Object.defineProperty(_e,"BRAND",{enumerable:!0,get:function(){return be}}),Object.defineProperty(_e,"ZodBranded",{enumerable:!0,get:function(){return Ie}}),Object.defineProperty(_e,"ZodPipeline",{enumerable:!0,get:function(){return Ze}}),Object.defineProperty(_e,"ZodReadonly",{enumerable:!0,get:function(){return xe}}),_e.custom=Ce,Object.defineProperty(_e,"Schema",{enumerable:!0,get:function(){return u}}),Object.defineProperty(_e,"ZodSchema",{enumerable:!0,get:function(){return u}}),Object.defineProperty(_e,"late",{enumerable:!0,get:function(){return ke}}),Object.defineProperty(_e,"ZodFirstPartyTypeKind",{enumerable:!0,get:function(){return Pe}}),Object.defineProperty(_e,"coerce",{enumerable:!0,get:function(){return pt}}),Object.defineProperty(_e,"any",{enumerable:!0,get:function(){return Ee}}),Object.defineProperty(_e,"array",{enumerable:!0,get:function(){return ze}}),Object.defineProperty(_e,"bigint",{enumerable:!0,get:function(){return Ne}}),Object.defineProperty(_e,"boolean",{enumerable:!0,get:function(){return Se}}),Object.defineProperty(_e,"date",{enumerable:!0,get:function(){return Le}}),Object.defineProperty(_e,"discriminatedUnion",{enumerable:!0,get:function(){return We}}),Object.defineProperty(_e,"effect",{enumerable:!0,get:function(){return nt}}),Object.defineProperty(_e,"enum",{enumerable:!0,get:function(){return tt}}),Object.defineProperty(_e,"function",{enumerable:!0,get:function(){return Xe}}),Object.defineProperty(_e,"instanceof",{enumerable:!0,get:function(){return Oe}}),Object.defineProperty(_e,"intersection",{enumerable:!0,get:function(){return Ye}}),Object.defineProperty(_e,"lazy",{enumerable:!0,get:function(){return Qe}}),Object.defineProperty(_e,"literal",{enumerable:!0,get:function(){return et}}),Object.defineProperty(_e,"map",{enumerable:!0,get:function(){return Je}}),Object.defineProperty(_e,"nan",{enumerable:!0,get:function(){return Ae}}),Object.defineProperty(_e,"nativeEnum",{enumerable:!0,get:function(){return rt}}),Object.defineProperty(_e,"never",{enumerable:!0,get:function(){return Fe}}),Object.defineProperty(_e,"null",{enumerable:!0,get:function(){return Re}}),Object.defineProperty(_e,"nullable",{enumerable:!0,get:function(){return it}}),Object.defineProperty(_e,"number",{enumerable:!0,get:function(){return je}}),Object.defineProperty(_e,"object",{enumerable:!0,get:function(){return $e}}),Object.defineProperty(_e,"oboolean",{enumerable:!0,get:function(){return lt}}),Object.defineProperty(_e,"onumber",{enumerable:!0,get:function(){return ct}}),Object.defineProperty(_e,"optional",{enumerable:!0,get:function(){return at}}),Object.defineProperty(_e,"ostring",{enumerable:!0,get:function(){return ut}}),Object.defineProperty(_e,"pipeline",{enumerable:!0,get:function(){return ot}}),Object.defineProperty(_e,"preprocess",{enumerable:!0,get:function(){return dt}}),Object.defineProperty(_e,"promise",{enumerable:!0,get:function(){return st}}),Object.defineProperty(_e,"record",{enumerable:!0,get:function(){return He}}),Object.defineProperty(_e,"set",{enumerable:!0,get:function(){return Ge}}),Object.defineProperty(_e,"strictObject",{enumerable:!0,get:function(){return Ke}}),Object.defineProperty(_e,"string",{enumerable:!0,get:function(){return we}}),Object.defineProperty(_e,"symbol",{enumerable:!0,get:function(){return Ue}}),Object.defineProperty(_e,"transformer",{enumerable:!0,get:function(){return nt}}),Object.defineProperty(_e,"tuple",{enumerable:!0,get:function(){return qe}}),Object.defineProperty(_e,"undefined",{enumerable:!0,get:function(){return De}}),Object.defineProperty(_e,"union",{enumerable:!0,get:function(){return Be}}),Object.defineProperty(_e,"unknown",{enumerable:!0,get:function(){return Ve}}),Object.defineProperty(_e,"void",{enumerable:!0,get:function(){return Me}}),Object.defineProperty(_e,"NEVER",{enumerable:!0,get:function(){return ht}});var e=_r(d[0]),t=_r(d[1]),r=_r(d[2]),s=_r(d[3]),n=_r(d[4]);class a{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const i=(t,r)=>{if((0,s.isValid)(r))return{success:!0,data:r.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new e.ZodError(t.common.issues);return this._error=r,this._error}}};function o(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:s,description:n}=e;if(t&&(r||s))throw new Error("Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.");if(t)return{errorMap:t,description:n};return{errorMap:(t,n)=>{const{message:a}=e;return"invalid_enum_value"===t.code?{message:a??n.defaultError}:void 0===n.data?{message:a??s??n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:a??r??n.defaultError}},description:n}}class u{get description(){return this._def.description}_getType(e){return(0,n.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,n.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new s.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,n.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if((0,s.isAsync)(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,n.getParsedType)(e)},s=this._parseSync({data:e,path:r.path,parent:r});return i(r,s)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,n.getParsedType)(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return(0,s.isValid)(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>(0,s.isValid)(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,n.getParsedType)(e)},a=this._parse({data:e,path:r.path,parent:r}),o=await((0,s.isAsync)(a)?a:Promise.resolve(a));return i(r,o)}refine(t,r){const s=e=>"string"==typeof r||void 0===r?{message:r}:"function"==typeof r?r(e):r;return this._refinement((r,n)=>{const a=t(r),i=()=>n.addIssue({code:e.ZodIssueCode.custom,...s(r)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(i(),!1)):!!a||(i(),!1)})}refinement(e,t){return this._refinement((r,s)=>!!e(r)||(s.addIssue("function"==typeof t?t(r,s):t),!1))}_refinement(e){return new he({schema:this,typeName:Pe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return fe.create(this,this._def)}nullable(){return me.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return q.create(this)}promise(){return pe.create(this,this._def)}or(e){return G.create([this,e],this._def)}and(e){return te.create(this,e,this._def)}transform(e){return new he({...o(this._def),schema:this,typeName:Pe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ye({...o(this._def),innerType:this,defaultValue:t,typeName:Pe.ZodDefault})}brand(){return new Ie({typeName:Pe.ZodBranded,type:this,...o(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ge({...o(this._def),innerType:this,catchValue:t,typeName:Pe.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Ze.create(this,e)}readonly(){return xe.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const c=/^c[^\s-]{8,}$/i,l=/^[0-9a-z]+$/,p=/^[0-9A-HJKMNP-TV-Z]{26}$/i,h=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,f=/^[a-z0-9_-]{21}$/i,y=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,_=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,v=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let b;const I=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Z=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,x=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,T=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,C=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,k=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,P="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",O=new RegExp(`^${P}$`);function w(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function j(e){return new RegExp(`^${w(e)}$`)}function A(e){let t=`${P}T${w(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function N(e,t){return!("v4"!==t&&t||!I.test(e))||!("v6"!==t&&t||!x.test(e))}function S(e,t){if(!y.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(s));return"object"==typeof n&&null!==n&&((!("typ"in n)||"JWT"===n?.typ)&&(!!n.alg&&(!t||n.alg===t)))}catch{return!1}}function L(e,t){return!("v4"!==t&&t||!Z.test(e))||!("v6"!==t&&t||!T.test(e))}class U extends u{_parse(t){this._def.coerce&&(t.data=String(t.data));if(this._getType(t)!==n.ZodParsedType.string){const r=this._getOrReturnCtx(t);return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.string,received:r.parsedType}),s.INVALID}const r=new s.ParseStatus;let a;for(const i of this._def.checks)if("min"===i.kind)t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{code:e.ZodIssueCode.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if("max"===i.kind)t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{code:e.ZodIssueCode.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if("length"===i.kind){const n=t.data.length>i.value,o=t.data.length<i.value;(n||o)&&(a=this._getOrReturnCtx(t,a),n?(0,s.addIssueToContext)(a,{code:e.ZodIssueCode.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&(0,s.addIssueToContext)(a,{code:e.ZodIssueCode.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if("email"===i.kind)v.test(t.data)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"email",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty());else if("emoji"===i.kind)b||(b=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),b.test(t.data)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"emoji",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty());else if("uuid"===i.kind)h.test(t.data)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"uuid",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty());else if("nanoid"===i.kind)f.test(t.data)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"nanoid",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty());else if("cuid"===i.kind)c.test(t.data)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"cuid",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty());else if("cuid2"===i.kind)l.test(t.data)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"cuid2",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty());else if("ulid"===i.kind)p.test(t.data)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"ulid",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty());else if("url"===i.kind)try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"url",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty()}else if("regex"===i.kind){i.regex.lastIndex=0;i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"regex",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty())}else if("trim"===i.kind)t.data=t.data.trim();else if("includes"===i.kind)t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{code:e.ZodIssueCode.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty());else if("toLowerCase"===i.kind)t.data=t.data.toLowerCase();else if("toUpperCase"===i.kind)t.data=t.data.toUpperCase();else if("startsWith"===i.kind)t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{code:e.ZodIssueCode.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty());else if("endsWith"===i.kind)t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{code:e.ZodIssueCode.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty());else if("datetime"===i.kind){A(i).test(t.data)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{code:e.ZodIssueCode.invalid_string,validation:"datetime",message:i.message}),r.dirty())}else if("date"===i.kind){O.test(t.data)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{code:e.ZodIssueCode.invalid_string,validation:"date",message:i.message}),r.dirty())}else if("time"===i.kind){j(i).test(t.data)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{code:e.ZodIssueCode.invalid_string,validation:"time",message:i.message}),r.dirty())}else"duration"===i.kind?_.test(t.data)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"duration",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty()):"ip"===i.kind?N(t.data,i.version)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"ip",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty()):"jwt"===i.kind?S(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"jwt",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty()):"cidr"===i.kind?L(t.data,i.version)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"cidr",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty()):"base64"===i.kind?C.test(t.data)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"base64",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty()):"base64url"===i.kind?k.test(t.data)||(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{validation:"base64url",code:e.ZodIssueCode.invalid_string,message:i.message}),r.dirty()):n.util.assertNever(i);return{status:r.value,value:t.data}}_regex(t,s,n){return this.refinement(e=>t.test(e),{validation:s,code:e.ZodIssueCode.invalid_string,...r.errorUtil.errToObj(n)})}_addCheck(e){return new U({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...r.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...r.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...r.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...r.errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...r.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...r.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...r.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...r.errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...r.errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...r.errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...r.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...r.errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...r.errorUtil.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...r.errorUtil.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...r.errorUtil.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...r.errorUtil.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...r.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...r.errorUtil.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...r.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...r.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...r.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...r.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...r.errorUtil.errToObj(t)})}nonempty(e){return this.min(1,r.errorUtil.errToObj(e))}trim(){return new U({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new U({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new U({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function D(e,t){const r=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,n=r>s?r:s;return Number.parseInt(e.toFixed(n).replace(".",""))%Number.parseInt(t.toFixed(n).replace(".",""))/10**n}U.create=e=>new U({checks:[],typeName:Pe.ZodString,coerce:e?.coerce??!1,...o(e)});class R extends u{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){this._def.coerce&&(t.data=Number(t.data));if(this._getType(t)!==n.ZodParsedType.number){const r=this._getOrReturnCtx(t);return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.number,received:r.parsedType}),s.INVALID}let r;const a=new s.ParseStatus;for(const i of this._def.checks)if("int"===i.kind)n.util.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty());else if("min"===i.kind){(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty())}else if("max"===i.kind){(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty())}else"multipleOf"===i.kind?0!==D(t.data,i.value)&&(r=this._getOrReturnCtx(t,r),(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):"finite"===i.kind?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.not_finite,message:i.message}),a.dirty()):n.util.assertNever(i);return{status:a.value,value:t.data}}gte(e,t){return this.setLimit("min",e,!0,r.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,r.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,r.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,r.errorUtil.toString(t))}setLimit(e,t,s,n){return new R({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:r.errorUtil.toString(n)}]})}_addCheck(e){return new R({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:r.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:r.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:r.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:r.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:r.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:r.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:r.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:r.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:r.errorUtil.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&n.util.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}R.create=e=>new R({checks:[],typeName:Pe.ZodNumber,coerce:e?.coerce||!1,...o(e)});class E extends u{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==n.ZodParsedType.bigint)return this._getInvalidInput(t);let r;const a=new s.ParseStatus;for(const i of this._def.checks)if("min"===i.kind){(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty())}else if("max"===i.kind){(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty())}else"multipleOf"===i.kind?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):n.util.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.bigint,received:r.parsedType}),s.INVALID}gte(e,t){return this.setLimit("min",e,!0,r.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,r.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,r.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,r.errorUtil.toString(t))}setLimit(e,t,s,n){return new E({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:r.errorUtil.toString(n)}]})}_addCheck(e){return new E({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:r.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:r.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:r.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:r.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:r.errorUtil.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}E.create=e=>new E({checks:[],typeName:Pe.ZodBigInt,coerce:e?.coerce??!1,...o(e)});class V extends u{_parse(t){this._def.coerce&&(t.data=Boolean(t.data));if(this._getType(t)!==n.ZodParsedType.boolean){const r=this._getOrReturnCtx(t);return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.boolean,received:r.parsedType}),s.INVALID}return(0,s.OK)(t.data)}}V.create=e=>new V({typeName:Pe.ZodBoolean,coerce:e?.coerce||!1,...o(e)});class F extends u{_parse(t){this._def.coerce&&(t.data=new Date(t.data));if(this._getType(t)!==n.ZodParsedType.date){const r=this._getOrReturnCtx(t);return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.date,received:r.parsedType}),s.INVALID}if(Number.isNaN(t.data.getTime())){const r=this._getOrReturnCtx(t);return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_date}),s.INVALID}const r=new s.ParseStatus;let a;for(const i of this._def.checks)"min"===i.kind?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{code:e.ZodIssueCode.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):"max"===i.kind?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),(0,s.addIssueToContext)(a,{code:e.ZodIssueCode.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):n.util.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(e){return new F({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:r.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:r.errorUtil.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}F.create=e=>new F({checks:[],coerce:e?.coerce||!1,typeName:Pe.ZodDate,...o(e)});class M extends u{_parse(t){if(this._getType(t)!==n.ZodParsedType.symbol){const r=this._getOrReturnCtx(t);return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.symbol,received:r.parsedType}),s.INVALID}return(0,s.OK)(t.data)}}M.create=e=>new M({typeName:Pe.ZodSymbol,...o(e)});class z extends u{_parse(t){if(this._getType(t)!==n.ZodParsedType.undefined){const r=this._getOrReturnCtx(t);return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.undefined,received:r.parsedType}),s.INVALID}return(0,s.OK)(t.data)}}z.create=e=>new z({typeName:Pe.ZodUndefined,...o(e)});class $ extends u{_parse(t){if(this._getType(t)!==n.ZodParsedType.null){const r=this._getOrReturnCtx(t);return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.null,received:r.parsedType}),s.INVALID}return(0,s.OK)(t.data)}}$.create=e=>new $({typeName:Pe.ZodNull,...o(e)});class K extends u{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,s.OK)(e.data)}}K.create=e=>new K({typeName:Pe.ZodAny,...o(e)});class B extends u{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,s.OK)(e.data)}}B.create=e=>new B({typeName:Pe.ZodUnknown,...o(e)});class W extends u{_parse(t){const r=this._getOrReturnCtx(t);return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.never,received:r.parsedType}),s.INVALID}}W.create=e=>new W({typeName:Pe.ZodNever,...o(e)});class Y extends u{_parse(t){if(this._getType(t)!==n.ZodParsedType.undefined){const r=this._getOrReturnCtx(t);return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.void,received:r.parsedType}),s.INVALID}return(0,s.OK)(t.data)}}Y.create=e=>new Y({typeName:Pe.ZodVoid,...o(e)});class q extends u{_parse(t){const{ctx:r,status:i}=this._processInputParams(t),o=this._def;if(r.parsedType!==n.ZodParsedType.array)return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.array,received:r.parsedType}),s.INVALID;if(null!==o.exactLength){const t=r.data.length>o.exactLength.value,n=r.data.length<o.exactLength.value;(t||n)&&((0,s.addIssueToContext)(r,{code:t?e.ZodIssueCode.too_big:e.ZodIssueCode.too_small,minimum:n?o.exactLength.value:void 0,maximum:t?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),i.dirty())}if(null!==o.minLength&&r.data.length<o.minLength.value&&((0,s.addIssueToContext)(r,{code:e.ZodIssueCode.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),i.dirty()),null!==o.maxLength&&r.data.length>o.maxLength.value&&((0,s.addIssueToContext)(r,{code:e.ZodIssueCode.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),i.dirty()),r.common.async)return Promise.all([...r.data].map((e,t)=>o.type._parseAsync(new a(r,e,r.path,t)))).then(e=>s.ParseStatus.mergeArray(i,e));const u=[...r.data].map((e,t)=>o.type._parseSync(new a(r,e,r.path,t)));return s.ParseStatus.mergeArray(i,u)}get element(){return this._def.type}min(e,t){return new q({...this._def,minLength:{value:e,message:r.errorUtil.toString(t)}})}max(e,t){return new q({...this._def,maxLength:{value:e,message:r.errorUtil.toString(t)}})}length(e,t){return new q({...this._def,exactLength:{value:e,message:r.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}function H(e){if(e instanceof J){const t={};for(const r in e.shape){const s=e.shape[r];t[r]=fe.create(H(s))}return new J({...e._def,shape:()=>t})}return e instanceof q?new q({...e._def,type:H(e.element)}):e instanceof fe?fe.create(H(e.unwrap())):e instanceof me?me.create(H(e.unwrap())):e instanceof re?re.create(e.items.map(e=>H(e))):e}q.create=(e,t)=>new q({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Pe.ZodArray,...o(t)});class J extends u{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=n.util.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(t){if(this._getType(t)!==n.ZodParsedType.object){const r=this._getOrReturnCtx(t);return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.object,received:r.parsedType}),s.INVALID}const{status:r,ctx:i}=this._processInputParams(t),{shape:o,keys:u}=this._getCached(),c=[];if(!(this._def.catchall instanceof W&&"strip"===this._def.unknownKeys))for(const e in i.data)u.includes(e)||c.push(e);const l=[];for(const e of u){const t=o[e],r=i.data[e];l.push({key:{status:"valid",value:e},value:t._parse(new a(i,r,i.path,e)),alwaysSet:e in i.data})}if(this._def.catchall instanceof W){const t=this._def.unknownKeys;if("passthrough"===t)for(const e of c)l.push({key:{status:"valid",value:e},value:{status:"valid",value:i.data[e]}});else if("strict"===t)c.length>0&&((0,s.addIssueToContext)(i,{code:e.ZodIssueCode.unrecognized_keys,keys:c}),r.dirty());else if("strip"!==t)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of c){const r=i.data[t];l.push({key:{status:"valid",value:t},value:e._parse(new a(i,r,i.path,t)),alwaysSet:t in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of l){const r=await t.key,s=await t.value;e.push({key:r,value:s,alwaysSet:t.alwaysSet})}return e}).then(e=>s.ParseStatus.mergeObjectSync(r,e)):s.ParseStatus.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return r.errorUtil.errToObj,new J({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,s)=>{const n=this._def.errorMap?.(t,s).message??s.defaultError;return"unrecognized_keys"===t.code?{message:r.errorUtil.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new J({...this._def,unknownKeys:"strip"})}passthrough(){return new J({...this._def,unknownKeys:"passthrough"})}extend(e){return new J({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new J({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Pe.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new J({...this._def,catchall:e})}pick(e){const t={};for(const r of n.util.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new J({...this._def,shape:()=>t})}omit(e){const t={};for(const r of n.util.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new J({...this._def,shape:()=>t})}deepPartial(){return H(this)}partial(e){const t={};for(const r of n.util.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}return new J({...this._def,shape:()=>t})}required(e){const t={};for(const r of n.util.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof fe;)e=e._def.innerType;t[r]=e}return new J({...this._def,shape:()=>t})}keyof(){return ue(n.util.objectKeys(this.shape))}}J.create=(e,t)=>new J({shape:()=>e,unknownKeys:"strip",catchall:W.create(),typeName:Pe.ZodObject,...o(t)}),J.strictCreate=(e,t)=>new J({shape:()=>e,unknownKeys:"strict",catchall:W.create(),typeName:Pe.ZodObject,...o(t)}),J.lazycreate=(e,t)=>new J({shape:e,unknownKeys:"strip",catchall:W.create(),typeName:Pe.ZodObject,...o(t)});class G extends u{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;if(r.common.async)return Promise.all(n.map(async e=>{const t={...r,common:{...r.common,issues:[]},parent:null};return{result:await e._parseAsync({data:r.data,path:r.path,parent:t}),ctx:t}})).then(function(t){for(const e of t)if("valid"===e.result.status)return e.result;for(const e of t)if("dirty"===e.result.status)return r.common.issues.push(...e.ctx.common.issues),e.result;const n=t.map(t=>new e.ZodError(t.ctx.common.issues));return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_union,unionErrors:n}),s.INVALID});{let t;const a=[];for(const e of n){const s={...r,common:{...r.common,issues:[]},parent:null},n=e._parseSync({data:r.data,path:r.path,parent:s});if("valid"===n.status)return n;"dirty"!==n.status||t||(t={result:n,ctx:s}),s.common.issues.length&&a.push(s.common.issues)}if(t)return r.common.issues.push(...t.ctx.common.issues),t.result;const i=a.map(t=>new e.ZodError(t));return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_union,unionErrors:i}),s.INVALID}}get options(){return this._def.options}}G.create=(e,t)=>new G({options:e,typeName:Pe.ZodUnion,...o(t)});const X=e=>e instanceof de?X(e.schema):e instanceof he?X(e.innerType()):e instanceof oe?[e.value]:e instanceof ce?e.options:e instanceof le?n.util.objectValues(e.enum):e instanceof ye?X(e._def.innerType):e instanceof z?[void 0]:e instanceof $?[null]:e instanceof fe?[void 0,...X(e.unwrap())]:e instanceof me?[null,...X(e.unwrap())]:e instanceof Ie||e instanceof xe?X(e.unwrap()):e instanceof ge?X(e._def.innerType):[];class Q extends u{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==n.ZodParsedType.object)return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.object,received:r.parsedType}),s.INVALID;const a=this.discriminator,i=r.data[a],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):((0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),s.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const r of t){const t=X(r.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of t){if(s.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);s.set(n,r)}}return new Q({typeName:Pe.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...o(r)})}}function ee(e,t){const r=(0,n.getParsedType)(e),s=(0,n.getParsedType)(t);if(e===t)return{valid:!0,data:e};if(r===n.ZodParsedType.object&&s===n.ZodParsedType.object){const r=n.util.objectKeys(t),s=n.util.objectKeys(e).filter(e=>-1!==r.indexOf(e)),a={...e,...t};for(const r of s){const s=ee(e[r],t[r]);if(!s.valid)return{valid:!1};a[r]=s.data}return{valid:!0,data:a}}if(r===n.ZodParsedType.array&&s===n.ZodParsedType.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let s=0;s<e.length;s++){const n=ee(e[s],t[s]);if(!n.valid)return{valid:!1};r.push(n.data)}return{valid:!0,data:r}}return r===n.ZodParsedType.date&&s===n.ZodParsedType.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class te extends u{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(t,a)=>{if((0,s.isAborted)(t)||(0,s.isAborted)(a))return s.INVALID;const i=ee(t.value,a.value);return i.valid?(((0,s.isDirty)(t)||(0,s.isDirty)(a))&&r.dirty(),{status:r.value,value:i.data}):((0,s.addIssueToContext)(n,{code:e.ZodIssueCode.invalid_intersection_types}),s.INVALID)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>a(e,t)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}te.create=(e,t,r)=>new te({left:e,right:t,typeName:Pe.ZodIntersection,...o(r)});class re extends u{_parse(t){const{status:r,ctx:i}=this._processInputParams(t);if(i.parsedType!==n.ZodParsedType.array)return(0,s.addIssueToContext)(i,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.array,received:i.parsedType}),s.INVALID;if(i.data.length<this._def.items.length)return(0,s.addIssueToContext)(i,{code:e.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.INVALID;!this._def.rest&&i.data.length>this._def.items.length&&((0,s.addIssueToContext)(i,{code:e.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const o=[...i.data].map((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new a(i,e,i.path,t)):null}).filter(e=>!!e);return i.common.async?Promise.all(o).then(e=>s.ParseStatus.mergeArray(r,e)):s.ParseStatus.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new re({...this._def,rest:e})}}re.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new re({items:e,typeName:Pe.ZodTuple,rest:null,...o(t)})};class se extends u{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:i}=this._processInputParams(t);if(i.parsedType!==n.ZodParsedType.object)return(0,s.addIssueToContext)(i,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.object,received:i.parsedType}),s.INVALID;const o=[],u=this._def.keyType,c=this._def.valueType;for(const e in i.data)o.push({key:u._parse(new a(i,e,i.path,e)),value:c._parse(new a(i,i.data[e],i.path,e)),alwaysSet:e in i.data});return i.common.async?s.ParseStatus.mergeObjectAsync(r,o):s.ParseStatus.mergeObjectSync(r,o)}get element(){return this._def.valueType}static create(e,t,r){return new se(t instanceof u?{keyType:e,valueType:t,typeName:Pe.ZodRecord,...o(r)}:{keyType:U.create(),valueType:e,typeName:Pe.ZodRecord,...o(t)})}}class ne extends u{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:i}=this._processInputParams(t);if(i.parsedType!==n.ZodParsedType.map)return(0,s.addIssueToContext)(i,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.map,received:i.parsedType}),s.INVALID;const o=this._def.keyType,u=this._def.valueType,c=[...i.data.entries()].map(([e,t],r)=>({key:o._parse(new a(i,e,i.path,[r,"key"])),value:u._parse(new a(i,t,i.path,[r,"value"]))}));if(i.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const t of c){const n=await t.key,a=await t.value;if("aborted"===n.status||"aborted"===a.status)return s.INVALID;"dirty"!==n.status&&"dirty"!==a.status||r.dirty(),e.set(n.value,a.value)}return{status:r.value,value:e}})}{const e=new Map;for(const t of c){const n=t.key,a=t.value;if("aborted"===n.status||"aborted"===a.status)return s.INVALID;"dirty"!==n.status&&"dirty"!==a.status||r.dirty(),e.set(n.value,a.value)}return{status:r.value,value:e}}}}ne.create=(e,t,r)=>new ne({valueType:t,keyType:e,typeName:Pe.ZodMap,...o(r)});class ae extends u{_parse(t){const{status:r,ctx:i}=this._processInputParams(t);if(i.parsedType!==n.ZodParsedType.set)return(0,s.addIssueToContext)(i,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.set,received:i.parsedType}),s.INVALID;const o=this._def;null!==o.minSize&&i.data.size<o.minSize.value&&((0,s.addIssueToContext)(i,{code:e.ZodIssueCode.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),null!==o.maxSize&&i.data.size>o.maxSize.value&&((0,s.addIssueToContext)(i,{code:e.ZodIssueCode.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());const u=this._def.valueType;function c(e){const t=new Set;for(const n of e){if("aborted"===n.status)return s.INVALID;"dirty"===n.status&&r.dirty(),t.add(n.value)}return{status:r.value,value:t}}const l=[...i.data.values()].map((e,t)=>u._parse(new a(i,e,i.path,t)));return i.common.async?Promise.all(l).then(e=>c(e)):c(l)}min(e,t){return new ae({...this._def,minSize:{value:e,message:r.errorUtil.toString(t)}})}max(e,t){return new ae({...this._def,maxSize:{value:e,message:r.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ae.create=(e,t)=>new ae({valueType:e,minSize:null,maxSize:null,typeName:Pe.ZodSet,...o(t)});class ie extends u{constructor(){super(...arguments),this.validate=this.implement}_parse(r){const{ctx:a}=this._processInputParams(r);if(a.parsedType!==n.ZodParsedType.function)return(0,s.addIssueToContext)(a,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.function,received:a.parsedType}),s.INVALID;function i(r,n){return(0,s.makeIssue)({data:r,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,(0,t.getErrorMap)(),t.defaultErrorMap].filter(e=>!!e),issueData:{code:e.ZodIssueCode.invalid_arguments,argumentsError:n}})}function o(r,n){return(0,s.makeIssue)({data:r,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,(0,t.getErrorMap)(),t.defaultErrorMap].filter(e=>!!e),issueData:{code:e.ZodIssueCode.invalid_return_type,returnTypeError:n}})}const u={errorMap:a.common.contextualErrorMap},c=a.data;if(this._def.returns instanceof pe){const t=this;return(0,s.OK)(async function(...r){const s=new e.ZodError([]),n=await t._def.args.parseAsync(r,u).catch(e=>{throw s.addIssue(i(r,e)),s}),a=await Reflect.apply(c,this,n);return await t._def.returns._def.type.parseAsync(a,u).catch(e=>{throw s.addIssue(o(a,e)),s})})}{const t=this;return(0,s.OK)(function(...r){const s=t._def.args.safeParse(r,u);if(!s.success)throw new e.ZodError([i(r,s.error)]);const n=Reflect.apply(c,this,s.data),a=t._def.returns.safeParse(n,u);if(!a.success)throw new e.ZodError([o(n,a.error)]);return a.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ie({...this._def,args:re.create(e).rest(B.create())})}returns(e){return new ie({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ie({args:e||re.create([]).rest(B.create()),returns:t||B.create(),typeName:Pe.ZodFunction,...o(r)})}}class de extends u{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}de.create=(e,t)=>new de({getter:e,typeName:Pe.ZodLazy,...o(t)});class oe extends u{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return(0,s.addIssueToContext)(r,{received:r.data,code:e.ZodIssueCode.invalid_literal,expected:this._def.value}),s.INVALID}return{status:"valid",value:t.data}}get value(){return this._def.value}}function ue(e,t){return new ce({values:e,typeName:Pe.ZodEnum,...o(t)})}oe.create=(e,t)=>new oe({value:e,typeName:Pe.ZodLiteral,...o(t)});class ce extends u{_parse(t){if("string"!=typeof t.data){const r=this._getOrReturnCtx(t),a=this._def.values;return(0,s.addIssueToContext)(r,{expected:n.util.joinValues(a),received:r.parsedType,code:e.ZodIssueCode.invalid_type}),s.INVALID}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return(0,s.addIssueToContext)(r,{received:r.data,code:e.ZodIssueCode.invalid_enum_value,options:n}),s.INVALID}return(0,s.OK)(t.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ce.create(e,{...this._def,...t})}exclude(e,t=this._def){return ce.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}ce.create=ue;class le extends u{_parse(t){const r=n.util.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(t);if(a.parsedType!==n.ZodParsedType.string&&a.parsedType!==n.ZodParsedType.number){const t=n.util.objectValues(r);return(0,s.addIssueToContext)(a,{expected:n.util.joinValues(t),received:a.parsedType,code:e.ZodIssueCode.invalid_type}),s.INVALID}if(this._cache||(this._cache=new Set(n.util.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const t=n.util.objectValues(r);return(0,s.addIssueToContext)(a,{received:a.data,code:e.ZodIssueCode.invalid_enum_value,options:t}),s.INVALID}return(0,s.OK)(t.data)}get enum(){return this._def.values}}le.create=(e,t)=>new le({values:e,typeName:Pe.ZodNativeEnum,...o(t)});class pe extends u{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==n.ZodParsedType.promise&&!1===r.common.async)return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.promise,received:r.parsedType}),s.INVALID;const a=r.parsedType===n.ZodParsedType.promise?r.data:Promise.resolve(r.data);return(0,s.OK)(a.then(e=>this._def.type.parseAsync(e,{path:r.path,errorMap:r.common.contextualErrorMap})))}}pe.create=(e,t)=>new pe({type:e,typeName:Pe.ZodPromise,...o(t)});class he extends u{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Pe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:e=>{(0,s.addIssueToContext)(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===a.type){const e=a.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return s.INVALID;const n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?s.INVALID:"dirty"===n.status||"dirty"===t.value?(0,s.DIRTY)(n.value):n});{if("aborted"===t.value)return s.INVALID;const n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?s.INVALID:"dirty"===n.status||"dirty"===t.value?(0,s.DIRTY)(n.value):n}}if("refinement"===a.type){const e=e=>{const t=a.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?s.INVALID:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?s.INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))))}if("transform"===a.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!(0,s.isValid)(e))return s.INVALID;const n=a.transform(e.value,i);if(n instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>(0,s.isValid)(e)?Promise.resolve(a.transform(e.value,i)).then(e=>({status:t.value,value:e})):s.INVALID)}n.util.assertNever(a)}}he.create=(e,t,r)=>new he({schema:e,typeName:Pe.ZodEffects,effect:t,...o(r)}),he.createWithPreprocess=(e,t,r)=>new he({schema:t,effect:{type:"preprocess",transform:e},typeName:Pe.ZodEffects,...o(r)});class fe extends u{_parse(e){return this._getType(e)===n.ZodParsedType.undefined?(0,s.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fe.create=(e,t)=>new fe({innerType:e,typeName:Pe.ZodOptional,...o(t)});class me extends u{_parse(e){return this._getType(e)===n.ZodParsedType.null?(0,s.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}me.create=(e,t)=>new me({innerType:e,typeName:Pe.ZodNullable,...o(t)});class ye extends u{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===n.ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ye.create=(e,t)=>new ye({innerType:e,typeName:Pe.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...o(t)});class ge extends u{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return(0,s.isAsync)(a)?a.then(t=>({status:"valid",value:"valid"===t.status?t.value:this._def.catchValue({get error(){return new e.ZodError(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new e.ZodError(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ge.create=(e,t)=>new ge({innerType:e,typeName:Pe.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...o(t)});class ve extends u{_parse(t){if(this._getType(t)!==n.ZodParsedType.nan){const r=this._getOrReturnCtx(t);return(0,s.addIssueToContext)(r,{code:e.ZodIssueCode.invalid_type,expected:n.ZodParsedType.nan,received:r.parsedType}),s.INVALID}return{status:"valid",value:t.data}}}ve.create=e=>new ve({typeName:Pe.ZodNaN,...o(e)});const be=Symbol("zod_brand");class Ie extends u{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ze extends u{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?s.INVALID:"dirty"===e.status?(t.dirty(),(0,s.DIRTY)(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?s.INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new Ze({in:e,out:t,typeName:Pe.ZodPipeline})}}class xe extends u{_parse(e){const t=this._def.innerType._parse(e),r=e=>((0,s.isValid)(e)&&(e.value=Object.freeze(e.value)),e);return(0,s.isAsync)(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function Te(e,t){const r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function Ce(e,t={},r){return e?K.create().superRefine((s,n)=>{const a=e(s);if(a instanceof Promise)return a.then(e=>{if(!e){const e=Te(t,s),a=e.fatal??r??!0;n.addIssue({code:"custom",...e,fatal:a})}});if(!a){const e=Te(t,s),a=e.fatal??r??!0;n.addIssue({code:"custom",...e,fatal:a})}}):K.create()}xe.create=(e,t)=>new xe({innerType:e,typeName:Pe.ZodReadonly,...o(t)});const ke={object:J.lazycreate};var Pe;!(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Pe||(Pe={}));const Oe=(e,t={message:`Input not instance of ${e.name}`})=>Ce(t=>t instanceof e,t),we=U.create,je=R.create,Ae=ve.create,Ne=E.create,Se=V.create,Le=F.create,Ue=M.create,De=z.create,Re=$.create,Ee=K.create,Ve=B.create,Fe=W.create,Me=Y.create,ze=q.create,$e=J.create,Ke=J.strictCreate,Be=G.create,We=Q.create,Ye=te.create,qe=re.create,He=se.create,Je=ne.create,Ge=ae.create,Xe=ie.create,Qe=de.create,et=oe.create,tt=ce.create,rt=le.create,st=pe.create,nt=he.create,at=fe.create,it=me.create,dt=he.createWithPreprocess,ot=Ze.create,ut=()=>we().optional(),ct=()=>je().optional(),lt=()=>Se().optional(),pt={string:e=>U.create({...e,coerce:!0}),number:e=>R.create({...e,coerce:!0}),boolean:e=>V.create({...e,coerce:!0}),bigint:e=>E.create({...e,coerce:!0}),date:e=>F.create({...e,coerce:!0})},ht=s.INVALID},3025,[3021,3019,3026,3023,3022]);
__d(function(g,r,i,a,m,e,d){"use strict";var t;Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"errorUtil",{enumerable:!0,get:function(){return t}}),(function(t){t.errToObj=t=>"string"==typeof t?{message:t}:t||{},t.toString=t=>"string"==typeof t?t:t?.message})(t||(t={}))},3026,[]);
__d(function(g,r,_i,a,m,_e,d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"asValidator",{enumerable:!0,get:function(){return S}}),Object.defineProperty(_e,"combineHeaders",{enumerable:!0,get:function(){return u}}),Object.defineProperty(_e,"convertAsyncIteratorToReadableStream",{enumerable:!0,get:function(){return i}}),Object.defineProperty(_e,"convertBase64ToUint8Array",{enumerable:!0,get:function(){return Q}}),Object.defineProperty(_e,"convertUint8ArrayToBase64",{enumerable:!0,get:function(){return X}}),Object.defineProperty(_e,"createBinaryResponseHandler",{enumerable:!0,get:function(){return M}}),Object.defineProperty(_e,"createEventSourceParserStream",{enumerable:!0,get:function(){return c}}),Object.defineProperty(_e,"createEventSourceResponseHandler",{enumerable:!0,get:function(){return _}}),Object.defineProperty(_e,"createIdGenerator",{enumerable:!0,get:function(){return y}}),Object.defineProperty(_e,"createJsonErrorResponseHandler",{enumerable:!0,get:function(){return F}}),Object.defineProperty(_e,"createJsonResponseHandler",{enumerable:!0,get:function(){return U}}),Object.defineProperty(_e,"createJsonStreamResponseHandler",{enumerable:!0,get:function(){return D}}),Object.defineProperty(_e,"createStatusCodeErrorResponseHandler",{enumerable:!0,get:function(){return z}}),Object.defineProperty(_e,"delay",{enumerable:!0,get:function(){return l}}),Object.defineProperty(_e,"extractResponseHeaders",{enumerable:!0,get:function(){return p}}),Object.defineProperty(_e,"generateId",{enumerable:!0,get:function(){return b}}),Object.defineProperty(_e,"getErrorMessage",{enumerable:!0,get:function(){return h}}),Object.defineProperty(_e,"getFromApi",{enumerable:!0,get:function(){return E}}),Object.defineProperty(_e,"isAbortError",{enumerable:!0,get:function(){return w}}),Object.defineProperty(_e,"isParsableJson",{enumerable:!0,get:function(){return $}}),Object.defineProperty(_e,"isValidator",{enumerable:!0,get:function(){return H}}),Object.defineProperty(_e,"loadApiKey",{enumerable:!0,get:function(){return O}}),Object.defineProperty(_e,"loadOptionalSetting",{enumerable:!0,get:function(){return j}}),Object.defineProperty(_e,"loadSetting",{enumerable:!0,get:function(){return A}}),Object.defineProperty(_e,"parseJSON",{enumerable:!0,get:function(){return R}}),Object.defineProperty(_e,"parseProviderOptions",{enumerable:!0,get:function(){return x}}),Object.defineProperty(_e,"postFormDataToApi",{enumerable:!0,get:function(){return k}}),Object.defineProperty(_e,"postJsonToApi",{enumerable:!0,get:function(){return J}}),Object.defineProperty(_e,"postToApi",{enumerable:!0,get:function(){return L}}),Object.defineProperty(_e,"removeUndefinedEntries",{enumerable:!0,get:function(){return v}}),Object.defineProperty(_e,"resolve",{enumerable:!0,get:function(){return K}}),Object.defineProperty(_e,"safeParseJSON",{enumerable:!0,get:function(){return q}}),Object.defineProperty(_e,"safeValidateTypes",{enumerable:!0,get:function(){return C}}),Object.defineProperty(_e,"validateTypes",{enumerable:!0,get:function(){return B}}),Object.defineProperty(_e,"validator",{enumerable:!0,get:function(){return T}}),Object.defineProperty(_e,"validatorSymbol",{enumerable:!0,get:function(){return I}}),Object.defineProperty(_e,"withoutTrailingSlash",{enumerable:!0,get:function(){return Y}}),Object.defineProperty(_e,"zodValidator",{enumerable:!0,get:function(){return V}});var e,t=r(d[0]),n=r(d[1]),s=r(d[2]),o=(e=s)&&e.__esModule?e:{default:e};function u(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}function i(e){return new ReadableStream({async pull(t){try{const{value:n,done:s}=await e.next();s?t.close():t.enqueue(n)}catch(e){t.error(e)}},cancel(){}})}async function l(e){return null==e?Promise.resolve():new Promise(t=>setTimeout(t,e))}function c(){let e,t,n,s="",o=[];function u(e,t){if(""===e)return void i(t);if(e.startsWith(":"))return;const n=e.indexOf(":");if(-1===n)return void l(e,"");const s=n+1;l(e.slice(0,n),s<e.length&&" "===e[s]?e.slice(s+1):e.slice(s))}function i(s){o.length>0&&(s.enqueue({event:e,data:o.join("\n"),id:t,retry:n}),o=[],e=void 0,n=void 0)}function l(s,u){switch(s){case"event":e=u;break;case"data":o.push(u);break;case"id":t=u;break;case"retry":const s=parseInt(u,10);isNaN(s)||(n=s)}}return new TransformStream({transform(e,t){const{lines:n,incompleteLine:o}=f(s,e);s=o;for(let e=0;e<n.length;e++)u(n[e],t)},flush(e){u(s,e),i(e)}})}function f(e,t){const n=[];let s=e;for(let e=0;e<t.length;){const o=t[e++];"\n"===o?(n.push(s),s=""):"\r"===o?(n.push(s),s="","\n"===t[e+1]&&e++):s+=o}return{lines:n,incompleteLine:s}}function p(e){const t={};return e.headers.forEach((e,n)=>{t[n]=e}),t}var y=({prefix:e,size:s=16,alphabet:o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:u="-"}={})=>{const i=(0,n.customAlphabet)(o,s);if(null==e)return i;if(o.includes(u))throw new t.InvalidArgumentError({argument:"separator",message:`The separator "${u}" must not be part of the alphabet "${o}".`});return t=>`${e}${u}${i(t)}`},b=y();function h(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}function v(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>null!=t))}function w(e){return e instanceof Error&&("AbortError"===e.name||"TimeoutError"===e.name)}var P=()=>globalThis.fetch,E=async({url:e,headers:n={},successfulResponseHandler:s,failedResponseHandler:o,abortSignal:u,fetch:i=P()})=>{try{const l=await i(e,{method:"GET",headers:v(n),signal:u}),c=p(l);if(!l.ok){let n;try{n=await o({response:l,url:e,requestBodyValues:{}})}catch(n){if(w(n)||t.APICallError.isInstance(n))throw n;throw new t.APICallError({message:"Failed to process error response",cause:n,statusCode:l.status,url:e,responseHeaders:c,requestBodyValues:{}})}throw n.value}try{return await s({response:l,url:e,requestBodyValues:{}})}catch(n){if(n instanceof Error&&(w(n)||t.APICallError.isInstance(n)))throw n;throw new t.APICallError({message:"Failed to process successful response",cause:n,statusCode:l.status,url:e,responseHeaders:c,requestBodyValues:{}})}}catch(n){if(w(n))throw n;if(n instanceof TypeError&&"fetch failed"===n.message){const s=n.cause;if(null!=s)throw new t.APICallError({message:`Cannot connect to API: ${s.message}`,cause:s,url:e,isRetryable:!0,requestBodyValues:{}})}throw n}};function O({apiKey:e,environmentVariableName:n,apiKeyParameterName:s="apiKey",description:o}){if("string"==typeof e)return e;if(null!=e)throw new t.LoadAPIKeyError({message:`${o} API key must be a string.`});if("undefined"==typeof process)throw new t.LoadAPIKeyError({message:`${o} API key is missing. Pass it using the '${s}' parameter. Environment variables is not supported in this environment.`});if(null==(e=process.env[n]))throw new t.LoadAPIKeyError({message:`${o} API key is missing. Pass it using the '${s}' parameter or the ${n} environment variable.`});if("string"!=typeof e)throw new t.LoadAPIKeyError({message:`${o} API key must be a string. The value of the ${n} environment variable is not a string.`});return e}function j({settingValue:e,environmentVariableName:t}){return"string"==typeof e||null==e&&"undefined"!=typeof process&&null!=(e=process.env[t])&&"string"==typeof e?e:void 0}function A({settingValue:e,environmentVariableName:n,settingName:s,description:o}){if("string"==typeof e)return e;if(null!=e)throw new t.LoadSettingError({message:`${o} setting must be a string.`});if("undefined"==typeof process)throw new t.LoadSettingError({message:`${o} setting is missing. Pass it using the '${s}' parameter. Environment variables is not supported in this environment.`});if(null==(e=process.env[n]))throw new t.LoadSettingError({message:`${o} setting is missing. Pass it using the '${s}' parameter or the ${n} environment variable.`});if("string"!=typeof e)throw new t.LoadSettingError({message:`${o} setting must be a string. The value of the ${n} environment variable is not a string.`});return e}var I=Symbol.for("vercel.ai.validator");function T(e){return{[I]:!0,validate:e}}function H(e){return"object"==typeof e&&null!==e&&I in e&&!0===e[I]&&"validate"in e}function S(e){return H(e)?e:V(e)}function V(e){return T(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function B({value:e,schema:n}){const s=C({value:e,schema:n});if(!s.success)throw t.TypeValidationError.wrap({value:e,cause:s.error});return s.value}function C({value:e,schema:n}){const s=S(n);try{if(null==s.validate)return{success:!0,value:e};const n=s.validate(e);return n.success?n:{success:!1,error:t.TypeValidationError.wrap({value:e,cause:n.error})}}catch(n){return{success:!1,error:t.TypeValidationError.wrap({value:e,cause:n})}}}function R({text:e,schema:n}){try{const t=o.default.parse(e);return null==n?t:B({value:t,schema:n})}catch(n){if(t.JSONParseError.isInstance(n)||t.TypeValidationError.isInstance(n))throw n;throw new t.JSONParseError({text:e,cause:n})}}function q({text:e,schema:n}){try{const t=o.default.parse(e);if(null==n)return{success:!0,value:t,rawValue:t};const s=C({value:t,schema:n});return s.success?{...s,rawValue:t}:s}catch(n){return{success:!1,error:t.JSONParseError.isInstance(n)?n:new t.JSONParseError({text:e,cause:n})}}}function $(e){try{return o.default.parse(e),!0}catch(e){return!1}}function x({provider:e,providerOptions:n,schema:s}){if(null==(null==n?void 0:n[e]))return;const o=C({value:n[e],schema:s});if(!o.success)throw new t.InvalidArgumentError({argument:"providerOptions",message:`invalid ${e} provider options`,cause:o.error});return o.value}var N=()=>globalThis.fetch,J=async({url:e,headers:t,body:n,failedResponseHandler:s,successfulResponseHandler:o,abortSignal:u,fetch:i})=>L({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:s,successfulResponseHandler:o,abortSignal:u,fetch:i}),k=async({url:e,headers:t,formData:n,failedResponseHandler:s,successfulResponseHandler:o,abortSignal:u,fetch:i})=>L({url:e,headers:t,body:{content:n,values:Object.fromEntries(n.entries())},failedResponseHandler:s,successfulResponseHandler:o,abortSignal:u,fetch:i}),L=async({url:e,headers:n={},body:s,successfulResponseHandler:o,failedResponseHandler:u,abortSignal:i,fetch:l=N()})=>{try{const c=await l(e,{method:"POST",headers:v(n),body:s.content,signal:i}),f=p(c);if(!c.ok){let n;try{n=await u({response:c,url:e,requestBodyValues:s.values})}catch(n){if(w(n)||t.APICallError.isInstance(n))throw n;throw new t.APICallError({message:"Failed to process error response",cause:n,statusCode:c.status,url:e,responseHeaders:f,requestBodyValues:s.values})}throw n.value}try{return await o({response:c,url:e,requestBodyValues:s.values})}catch(n){if(n instanceof Error&&(w(n)||t.APICallError.isInstance(n)))throw n;throw new t.APICallError({message:"Failed to process successful response",cause:n,statusCode:c.status,url:e,responseHeaders:f,requestBodyValues:s.values})}}catch(n){if(w(n))throw n;if(n instanceof TypeError&&"fetch failed"===n.message){const o=n.cause;if(null!=o)throw new t.APICallError({message:`Cannot connect to API: ${o.message}`,cause:o,url:e,requestBodyValues:s.values,isRetryable:!0})}throw n}};async function K(e){return"function"==typeof e&&(e=e()),Promise.resolve(e)}var F=({errorSchema:e,errorToMessage:n,isRetryable:s})=>async({response:o,url:u,requestBodyValues:i})=>{const l=await o.text(),c=p(o);if(""===l.trim())return{responseHeaders:c,value:new t.APICallError({message:o.statusText,url:u,requestBodyValues:i,statusCode:o.status,responseHeaders:c,responseBody:l,isRetryable:null==s?void 0:s(o)})};try{const f=R({text:l,schema:e});return{responseHeaders:c,value:new t.APICallError({message:n(f),url:u,requestBodyValues:i,statusCode:o.status,responseHeaders:c,responseBody:l,data:f,isRetryable:null==s?void 0:s(o,f)})}}catch(e){return{responseHeaders:c,value:new t.APICallError({message:o.statusText,url:u,requestBodyValues:i,statusCode:o.status,responseHeaders:c,responseBody:l,isRetryable:null==s?void 0:s(o)})}}},_=e=>async({response:n})=>{const s=p(n);if(null==n.body)throw new t.EmptyResponseBodyError({});return{responseHeaders:s,value:n.body.pipeThrough(new TextDecoderStream).pipeThrough(c()).pipeThrough(new TransformStream({transform({data:t},n){"[DONE]"!==t&&n.enqueue(q({text:t,schema:e}))}}))}},D=e=>async({response:n})=>{const s=p(n);if(null==n.body)throw new t.EmptyResponseBodyError({});let o="";return{responseHeaders:s,value:n.body.pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform(t,n){t.endsWith("\n")?(n.enqueue(q({text:o+t,schema:e})),o=""):o+=t}}))}},U=e=>async({response:n,url:s,requestBodyValues:o})=>{const u=await n.text(),i=q({text:u,schema:e}),l=p(n);if(!i.success)throw new t.APICallError({message:"Invalid JSON response",cause:i.error,statusCode:n.status,responseHeaders:l,responseBody:u,url:s,requestBodyValues:o});return{responseHeaders:l,value:i.value,rawValue:i.rawValue}},M=()=>async({response:e,url:n,requestBodyValues:s})=>{const o=p(e);if(!e.body)throw new t.APICallError({message:"Response body is empty",url:n,requestBodyValues:s,statusCode:e.status,responseHeaders:o,responseBody:void 0});try{const t=await e.arrayBuffer();return{responseHeaders:o,value:new Uint8Array(t)}}catch(u){throw new t.APICallError({message:"Failed to read response as array buffer",url:n,requestBodyValues:s,statusCode:e.status,responseHeaders:o,responseBody:void 0,cause:u})}},z=()=>async({response:e,url:n,requestBodyValues:s})=>{const o=p(e),u=await e.text();return{responseHeaders:o,value:new t.APICallError({message:e.statusText,url:n,requestBodyValues:s,statusCode:e.status,responseHeaders:o,responseBody:u})}},{btoa:G,atob:W}=globalThis;function Q(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=W(t);return Uint8Array.from(n,e=>e.codePointAt(0))}function X(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return G(t)}function Y(e){return null==e?void 0:e.replace(/\/$/,"")}},3045,[3046,290,3047]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"AISDKError",{enumerable:!0,get:function(){return c}}),Object.defineProperty(e,"APICallError",{enumerable:!0,get:function(){return f}}),Object.defineProperty(e,"EmptyResponseBodyError",{enumerable:!0,get:function(){return E}}),Object.defineProperty(e,"InvalidArgumentError",{enumerable:!0,get:function(){return A}}),Object.defineProperty(e,"InvalidPromptError",{enumerable:!0,get:function(){return N}}),Object.defineProperty(e,"InvalidResponseDataError",{enumerable:!0,get:function(){return B}}),Object.defineProperty(e,"JSONParseError",{enumerable:!0,get:function(){return D}}),Object.defineProperty(e,"LoadAPIKeyError",{enumerable:!0,get:function(){return U}}),Object.defineProperty(e,"LoadSettingError",{enumerable:!0,get:function(){return Y}}),Object.defineProperty(e,"NoContentGeneratedError",{enumerable:!0,get:function(){return se}}),Object.defineProperty(e,"NoSuchModelError",{enumerable:!0,get:function(){return ue}}),Object.defineProperty(e,"TooManyEmbeddingValuesForCallError",{enumerable:!0,get:function(){return ye}}),Object.defineProperty(e,"TypeValidationError",{enumerable:!0,get:function(){return he}}),Object.defineProperty(e,"UnsupportedFunctionalityError",{enumerable:!0,get:function(){return Pe}}),Object.defineProperty(e,"getErrorMessage",{enumerable:!0,get:function(){return O}}),Object.defineProperty(e,"isJSONArray",{enumerable:!0,get:function(){return $e}}),Object.defineProperty(e,"isJSONObject",{enumerable:!0,get:function(){return je}}),Object.defineProperty(e,"isJSONValue",{enumerable:!0,get:function(){return Se}});var t,s="vercel.ai.error",n=Symbol.for(s),o=class n extends Error{constructor({name:s,message:n,cause:o}){super(n),this[t]=!0,this.name=s,this.cause=o}static isInstance(t){return n.hasMarker(t,s)}static hasMarker(t,s){const n=Symbol.for(s);return null!=t&&"object"==typeof t&&n in t&&"boolean"==typeof t[n]&&!0===t[n]}};t=n;var u,c=o,l="AI_APICallError",y=`vercel.ai.error.${l}`,p=Symbol.for(y),f=class extends c{constructor({message:t,url:s,requestBodyValues:n,statusCode:o,responseHeaders:c,responseBody:y,cause:p,isRetryable:f=null!=o&&(408===o||409===o||429===o||o>=500),data:b}){super({name:l,message:t,cause:p}),this[u]=!0,this.url=s,this.requestBodyValues=n,this.statusCode=o,this.responseHeaders=c,this.responseBody=y,this.isRetryable=f,this.data=b}static isInstance(t){return c.hasMarker(t,y)}};u=p;var b,v="AI_EmptyResponseBodyError",h=`vercel.ai.error.${v}`,I=Symbol.for(h),E=class extends c{constructor({message:t="Empty response body"}={}){super({name:v,message:t}),this[b]=!0}static isInstance(t){return c.hasMarker(t,h)}};function O(t){return null==t?"unknown error":"string"==typeof t?t:t instanceof Error?t.message:JSON.stringify(t)}b=I;var P,S="AI_InvalidArgumentError",$=`vercel.ai.error.${S}`,j=Symbol.for($),A=class extends c{constructor({message:t,cause:s,argument:n}){super({name:S,message:t,cause:s}),this[P]=!0,this.argument=n}static isInstance(t){return c.hasMarker(t,$)}};P=j;var M,x="AI_InvalidPromptError",_=`vercel.ai.error.${x}`,k=Symbol.for(_),N=class extends c{constructor({prompt:t,message:s,cause:n}){super({name:x,message:`Invalid prompt: ${s}`,cause:n}),this[M]=!0,this.prompt=t}static isInstance(t){return c.hasMarker(t,_)}};M=k;var C,T="AI_InvalidResponseDataError",J=`vercel.ai.error.${T}`,V=Symbol.for(J),B=class extends c{constructor({data:t,message:s=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:T,message:s}),this[C]=!0,this.data=t}static isInstance(t){return c.hasMarker(t,J)}};C=V;var R,w="AI_JSONParseError",F=`vercel.ai.error.${w}`,L=Symbol.for(F),D=class extends c{constructor({text:t,cause:s}){super({name:w,message:`JSON parsing failed: Text: ${t}.\nError message: ${O(s)}`,cause:s}),this[R]=!0,this.text=t}static isInstance(t){return c.hasMarker(t,F)}};R=L;var K,q="AI_LoadAPIKeyError",G=`vercel.ai.error.${q}`,H=Symbol.for(G),U=class extends c{constructor({message:t}){super({name:q,message:t}),this[K]=!0}static isInstance(t){return c.hasMarker(t,G)}};K=H;var z,Q="AI_LoadSettingError",W=`vercel.ai.error.${Q}`,X=Symbol.for(W),Y=class extends c{constructor({message:t}){super({name:Q,message:t}),this[z]=!0}static isInstance(t){return c.hasMarker(t,W)}};z=X;var Z,ee="AI_NoContentGeneratedError",re=`vercel.ai.error.${ee}`,te=Symbol.for(re),se=class extends c{constructor({message:t="No content generated."}={}){super({name:ee,message:t}),this[Z]=!0}static isInstance(t){return c.hasMarker(t,re)}};Z=te;var ne,ae="AI_NoSuchModelError",oe=`vercel.ai.error.${ae}`,ie=Symbol.for(oe),ue=class extends c{constructor({errorName:t=ae,modelId:s,modelType:n,message:o=`No such ${n}: ${s}`}){super({name:t,message:o}),this[ne]=!0,this.modelId=s,this.modelType=n}static isInstance(t){return c.hasMarker(t,oe)}};ne=ie;var ce,le="AI_TooManyEmbeddingValuesForCallError",me=`vercel.ai.error.${le}`,de=Symbol.for(me),ye=class extends c{constructor(t){super({name:le,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[ce]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return c.hasMarker(t,me)}};ce=de;var pe,fe="AI_TypeValidationError",be=`vercel.ai.error.${fe}`,ge=Symbol.for(be);pe=ge;var ve,he=class t extends c{constructor({value:t,cause:s}){super({name:fe,message:`Type validation failed: Value: ${JSON.stringify(t)}.\nError message: ${O(s)}`,cause:s}),this[pe]=!0,this.value=t}static isInstance(t){return c.hasMarker(t,be)}static wrap({value:s,cause:n}){return t.isInstance(n)&&n.value===s?n:new t({value:s,cause:n})}},Ie="AI_UnsupportedFunctionalityError",Ee=`vercel.ai.error.${Ie}`,Oe=Symbol.for(Ee),Pe=class extends c{constructor({functionality:t,message:s=`'${t}' functionality not supported.`}){super({name:Ie,message:s}),this[ve]=!0,this.functionality=t}static isInstance(t){return c.hasMarker(t,Ee)}};function Se(t){return null===t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t||(Array.isArray(t)?t.every(Se):"object"==typeof t&&Object.entries(t).every(([t,s])=>"string"==typeof t&&Se(s)))}function $e(t){return Array.isArray(t)&&t.every(Se)}function je(t){return null!=t&&"object"==typeof t&&Object.entries(t).every(([t,s])=>"string"==typeof t&&Se(s))}ve=Oe},3046,[]);
__d(function(g,r,i,a,m,e,d){'use strict';const t='undefined'!=typeof Buffer,o=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function c(c,s,f){null==f&&null!==s&&'object'==typeof s&&(f=s,s=void 0),t&&Buffer.isBuffer(c)&&(c=c.toString()),c&&65279===c.charCodeAt(0)&&(c=c.slice(1));const p=JSON.parse(c,s);if(null===p||'object'!=typeof p)return p;const l=f&&f.protoAction||'error',y=f&&f.constructorAction||'error';if('ignore'===l&&'ignore'===y)return p;if('ignore'!==l&&'ignore'!==y){if(!1===o.test(c)&&!1===n.test(c))return p}else if('ignore'!==l&&'ignore'===y){if(!1===o.test(c))return p}else if(!1===n.test(c))return p;return u(p,{protoAction:l,constructorAction:y,safe:f&&f.safe})}function u(t,{protoAction:o="error",constructorAction:n="error",safe:c}={}){let u=[t];for(;u.length;){const t=u;u=[];for(const s of t){if('ignore'!==o&&Object.prototype.hasOwnProperty.call(s,'__proto__')){if(!0===c)return null;if('error'===o)throw new SyntaxError('Object contains forbidden prototype property');delete s.__proto__}if('ignore'!==n&&Object.prototype.hasOwnProperty.call(s,'constructor')&&Object.prototype.hasOwnProperty.call(s.constructor,'prototype')){if(!0===c)return null;if('error'===n)throw new SyntaxError('Object contains forbidden prototype property');delete s.constructor}for(const t in s){const o=s[t];o&&'object'==typeof o&&u.push(o)}}}return t}function s(t,o,n){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return c(t,o,n)}finally{Error.stackTraceLimit=u}}m.exports=s,m.exports.default=s,m.exports.parse=s,m.exports.safeParse=function(t,o){const n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return c(t,o,{safe:!0})}catch(t){return null}finally{Error.stackTraceLimit=n}},m.exports.scan=u},3047,[]);
__d(function(g,r,_i,a,m,_e,d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"asSchema",{enumerable:!0,get:function(){return z}}),Object.defineProperty(_e,"callChatApi",{enumerable:!0,get:function(){return D}}),Object.defineProperty(_e,"callCompletionApi",{enumerable:!0,get:function(){return F}}),Object.defineProperty(_e,"extractMaxToolInvocationStep",{enumerable:!0,get:function(){return J}}),Object.defineProperty(_e,"fillMessageParts",{enumerable:!0,get:function(){return L}}),Object.defineProperty(_e,"formatAssistantStreamPart",{enumerable:!0,get:function(){return I}}),Object.defineProperty(_e,"formatDataStreamPart",{enumerable:!0,get:function(){return R}}),Object.defineProperty(_e,"generateId",{enumerable:!0,get:function(){return t.generateId}}),Object.defineProperty(_e,"getMessageParts",{enumerable:!0,get:function(){return U}}),Object.defineProperty(_e,"getTextFromDataUrl",{enumerable:!0,get:function(){return M}}),Object.defineProperty(_e,"isAssistantMessageWithCompletedToolCalls",{enumerable:!0,get:function(){return Q}}),Object.defineProperty(_e,"isDeepEqualData",{enumerable:!0,get:function(){return B}}),Object.defineProperty(_e,"jsonSchema",{enumerable:!0,get:function(){return q}}),Object.defineProperty(_e,"parseAssistantStreamPart",{enumerable:!0,get:function(){return y}}),Object.defineProperty(_e,"parseDataStreamPart",{enumerable:!0,get:function(){return A}}),Object.defineProperty(_e,"parsePartialJson",{enumerable:!0,get:function(){return b}}),Object.defineProperty(_e,"prepareAttachmentsForRequest",{enumerable:!0,get:function(){return Y}}),Object.defineProperty(_e,"processAssistantStream",{enumerable:!0,get:function(){return K}}),Object.defineProperty(_e,"processDataStream",{enumerable:!0,get:function(){return k}}),Object.defineProperty(_e,"processTextStream",{enumerable:!0,get:function(){return x}}),Object.defineProperty(_e,"shouldResubmitMessages",{enumerable:!0,get:function(){return H}}),Object.defineProperty(_e,"updateToolCallResult",{enumerable:!0,get:function(){return X}}),Object.defineProperty(_e,"zodSchema",{enumerable:!0,get:function(){return W}});var e,t=r(d[0]),o=r(d[1]),n=(e=o)&&e.__esModule?e:{default:e},s={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},l={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},i={code:"4",name:"assistant_message",parse:e=>{if(!(null!=e&&"object"==typeof e&&"id"in e&&"role"in e&&"content"in e&&"string"==typeof e.id&&"string"==typeof e.role&&"assistant"===e.role&&Array.isArray(e.content)&&e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value)))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},c={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},u={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},p=[s,l,i,c,u],f={[s.code]:s,[l.code]:l,[i.code]:i,[c.code]:c,[u.code]:u},h=p.map(e=>e.code),y=e=>{const t=e.indexOf(":");if(-1===t)throw new Error("Failed to parse stream string. No separator found.");const o=e.slice(0,t);if(!h.includes(o))throw new Error(`Failed to parse stream string. Invalid code ${o}.`);const n=o,s=e.slice(t+1),l=JSON.parse(s);return f[n].parse(l)};function I(e,t){const o=p.find(t=>t.name===e);if(!o)throw new Error(`Invalid stream part type: ${e}`);return`${o.code}:${JSON.stringify(t)}\n`}function _({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function E(e){const t=["ROOT"];let o=-1,n=null;function s(e,s,l){switch(e){case'"':o=s,t.pop(),t.push(l),t.push("INSIDE_STRING");break;case"f":case"t":case"n":o=s,n=s,t.pop(),t.push(l),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(l),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":o=s,t.pop(),t.push(l),t.push("INSIDE_NUMBER");break;case"{":o=s,t.pop(),t.push(l),t.push("INSIDE_OBJECT_START");break;case"[":o=s,t.pop(),t.push(l),t.push("INSIDE_ARRAY_START")}}function l(e,n){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":o=n,t.pop()}}function i(e,n){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":o=n,t.pop()}}for(let c=0;c<e.length;c++){const u=e[c];switch(t[t.length-1]){case"ROOT":s(u,c,"FINISH");break;case"INSIDE_OBJECT_START":switch(u){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":o=c,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":if('"'===u)t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"INSIDE_OBJECT_KEY":if('"'===u)t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break;case"INSIDE_OBJECT_AFTER_KEY":if(":"===u)t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break;case"INSIDE_OBJECT_BEFORE_VALUE":s(u,c,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":l(u,c);break;case"INSIDE_STRING":switch(u){case'"':t.pop(),o=c;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:o=c}break;case"INSIDE_ARRAY_START":if("]"===u)o=c,t.pop();else o=c,s(u,c,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_ARRAY_AFTER_VALUE":switch(u){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":o=c,t.pop();break;default:o=c}break;case"INSIDE_ARRAY_AFTER_COMMA":s(u,c,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),o=c;break;case"INSIDE_NUMBER":switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":o=c;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(u,c),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&l(u,c);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&l(u,c);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(u,c);break;default:t.pop()}break;case"INSIDE_LITERAL":{const s=e.substring(n,c+1);"false".startsWith(s)||"true".startsWith(s)||"null".startsWith(s)?o=c:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?l(u,c):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(u,c));break}}}let c=e.slice(0,o+1);for(let o=t.length-1;o>=0;o--){switch(t[o]){case"INSIDE_STRING":c+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":c+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":c+="]";break;case"INSIDE_LITERAL":{const t=e.substring(n,e.length);"true".startsWith(t)?c+="true".slice(t.length):"false".startsWith(t)?c+="false".slice(t.length):"null".startsWith(t)&&(c+="null".slice(t.length))}}}return c}function b(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let o=(0,t.safeParseJSON)({text:e});return o.success?{value:o.value,state:"successful-parse"}:(o=(0,t.safeParseJSON)({text:E(e)}),o.success?{value:o.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var w=[{code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},{code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},{code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},{code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},{code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},{code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},{code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},{code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},{code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},{code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},{code:"f",name:"start_step",parse:e=>{if(null==e||"object"!=typeof e||!("messageId"in e)||"string"!=typeof e.messageId)throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},{code:"g",name:"reasoning",parse:e=>{if("string"!=typeof e)throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},{code:"h",name:"source",parse:e=>{if(null==e||"object"!=typeof e)throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},{code:"i",name:"redacted_reasoning",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data)throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},{code:"j",name:"reasoning_signature",parse:e=>{if(null==e||"object"!=typeof e||!("signature"in e)||"string"!=typeof e.signature)throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},{code:"k",name:"file",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data||!("mimeType"in e)||"string"!=typeof e.mimeType)throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}}],v=Object.fromEntries(w.map(e=>[e.code,e])),T=(Object.fromEntries(w.map(e=>[e.name,e.code])),w.map(e=>e.code)),A=e=>{const t=e.indexOf(":");if(-1===t)throw new Error("Failed to parse stream string. No separator found.");const o=e.slice(0,t);if(!T.includes(o))throw new Error(`Failed to parse stream string. Invalid code ${o}.`);const n=o,s=e.slice(t+1),l=JSON.parse(s);return v[n].parse(l)};function R(e,t){const o=w.find(t=>t.name===e);if(!o)throw new Error(`Invalid stream part type: ${e}`);return`${o.code}:${JSON.stringify(t)}\n`}var S="\n".charCodeAt(0);function N(e,t){const o=new Uint8Array(t);let n=0;for(const t of e)o.set(t,n),n+=t.length;return e.length=0,o}async function k({stream:e,onTextPart:t,onReasoningPart:o,onReasoningSignaturePart:n,onRedactedReasoningPart:s,onSourcePart:l,onFilePart:i,onDataPart:c,onErrorPart:u,onToolCallStreamingStartPart:p,onToolCallDeltaPart:f,onToolCallPart:h,onToolResultPart:y,onMessageAnnotationsPart:I,onFinishMessagePart:_,onFinishStepPart:E,onStartStepPart:b}){const w=e.getReader(),v=new TextDecoder,T=[];let R=0;for(;;){const{value:e}=await w.read();if(e&&(T.push(e),R+=e.length,e[e.length-1]!==S))continue;if(0===T.length)break;const k=N(T,R);R=0;const C=v.decode(k,{stream:!0}).split("\n").filter(e=>""!==e).map(A);for(const{type:e,value:w}of C)switch(e){case"text":await(null==t?void 0:t(w));break;case"reasoning":await(null==o?void 0:o(w));break;case"reasoning_signature":await(null==n?void 0:n(w));break;case"redacted_reasoning":await(null==s?void 0:s(w));break;case"file":await(null==i?void 0:i(w));break;case"source":await(null==l?void 0:l(w));break;case"data":await(null==c?void 0:c(w));break;case"error":await(null==u?void 0:u(w));break;case"message_annotations":await(null==I?void 0:I(w));break;case"tool_call_streaming_start":await(null==p?void 0:p(w));break;case"tool_call_delta":await(null==f?void 0:f(w));break;case"tool_call":await(null==h?void 0:h(w));break;case"tool_result":await(null==y?void 0:y(w));break;case"finish_message":await(null==_?void 0:_(w));break;case"finish_step":await(null==E?void 0:E(w));break;case"start_step":await(null==b?void 0:b(w));break;default:throw new Error(`Unknown stream part type: ${e}`)}}}async function C({stream:e,update:o,onToolCall:n,onFinish:s,generateId:l=t.generateId,getCurrentDate:i=()=>new Date,lastMessage:c}){var u,p;const f="assistant"===(null==c?void 0:c.role);let h=f?1+(null!=(p=null==(u=c.toolInvocations)?void 0:u.reduce((e,t)=>{var o;return Math.max(e,null!=(o=t.step)?o:0)},0))?p:0):0;const y=f?structuredClone(c):{id:l(),createdAt:i(),role:"assistant",content:"",parts:[]};let I,E,w;function v(e,t){const o=y.parts.find(t=>"tool-invocation"===t.type&&t.toolInvocation.toolCallId===e);null!=o?o.toolInvocation=t:y.parts.push({type:"tool-invocation",toolInvocation:t})}const T=[];let A=f?null==c?void 0:c.annotations:void 0;const R={};let S={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},N="unknown";function C(){const e=[...T];(null==A?void 0:A.length)&&(y.annotations=A);const t={...structuredClone(y),revisionId:l()};o({message:t,data:e,replaceLastMessage:f})}await k({stream:e,onTextPart(e){null==I?(I={type:"text",text:e},y.parts.push(I)):I.text+=e,y.content+=e,C()},onReasoningPart(e){var t;null==w?(w={type:"text",text:e},null!=E&&E.details.push(w)):w.text+=e,null==E?(E={type:"reasoning",reasoning:e,details:[w]},y.parts.push(E)):E.reasoning+=e,y.reasoning=(null!=(t=y.reasoning)?t:"")+e,C()},onReasoningSignaturePart(e){null!=w&&(w.signature=e.signature)},onRedactedReasoningPart(e){null==E&&(E={type:"reasoning",reasoning:"",details:[]},y.parts.push(E)),E.details.push({type:"redacted",data:e.data}),w=void 0,C()},onFilePart(e){y.parts.push({type:"file",mimeType:e.mimeType,data:e.data}),C()},onSourcePart(e){y.parts.push({type:"source",source:e}),C()},onToolCallStreamingStartPart(e){null==y.toolInvocations&&(y.toolInvocations=[]),R[e.toolCallId]={text:"",step:h,toolName:e.toolName,index:y.toolInvocations.length};const t={state:"partial-call",step:h,toolCallId:e.toolCallId,toolName:e.toolName,args:void 0};y.toolInvocations.push(t),v(e.toolCallId,t),C()},onToolCallDeltaPart(e){const t=R[e.toolCallId];t.text+=e.argsTextDelta;const{value:o}=b(t.text),n={state:"partial-call",step:t.step,toolCallId:e.toolCallId,toolName:t.toolName,args:o};y.toolInvocations[t.index]=n,v(e.toolCallId,n),C()},async onToolCallPart(e){const t={state:"call",step:h,...e};if(null!=R[e.toolCallId]?y.toolInvocations[R[e.toolCallId].index]=t:(null==y.toolInvocations&&(y.toolInvocations=[]),y.toolInvocations.push(t)),v(e.toolCallId,t),C(),n){const t=await n({toolCall:e});if(null!=t){const o={state:"result",step:h,...e,result:t};y.toolInvocations[y.toolInvocations.length-1]=o,v(e.toolCallId,o),C()}}},onToolResultPart(e){const t=y.toolInvocations;if(null==t)throw new Error("tool_result must be preceded by a tool_call");const o=t.findIndex(t=>t.toolCallId===e.toolCallId);if(-1===o)throw new Error("tool_result must be preceded by a tool_call with the same toolCallId");const n={...t[o],state:"result",...e};t[o]=n,v(e.toolCallId,n),C()},onDataPart(e){T.push(...e),C()},onMessageAnnotationsPart(e){null==A?A=[...e]:A.push(...e),C()},onFinishStepPart(e){h+=1,I=e.isContinued?I:void 0,E=void 0,w=void 0},onStartStepPart(e){f||(y.id=e.messageId),y.parts.push({type:"step-start"}),C()},onFinishMessagePart(e){N=e.finishReason,null!=e.usage&&(S=_(e.usage))},onErrorPart(e){throw new Error(e)}}),null==s||s({message:y,finishReason:N,usage:S})}async function x({stream:e,onTextPart:t}){const o=e.pipeThrough(new TextDecoderStream).getReader();for(;;){const{done:e,value:n}=await o.read();if(e)break;await t(n)}}async function P({stream:e,update:o,onFinish:n,getCurrentDate:s=()=>new Date,generateId:l=t.generateId}){const i={type:"text",text:""},c={id:l(),createdAt:s(),role:"assistant",content:"",parts:[i]};await x({stream:e,onTextPart:e=>{c.content+=e,i.text+=e,o({message:{...c},data:[],replaceLastMessage:!1})}}),null==n||n(c,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"})}var O=()=>fetch;async function D({api:e,body:t,streamProtocol:o="data",credentials:n,headers:s,abortController:l,restoreMessagesOnFailure:i,onResponse:c,onUpdate:u,onFinish:p,onToolCall:f,generateId:h,fetch:y=O(),lastMessage:I}){var _,E;const b=await y(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...s},signal:null==(_=null==l?void 0:l())?void 0:_.signal,credentials:n}).catch(e=>{throw i(),e});if(c)try{await c(b)}catch(e){throw e}if(!b.ok)throw i(),new Error(null!=(E=await b.text())?E:"Failed to fetch the chat response.");if(!b.body)throw new Error("The response body is empty.");switch(o){case"text":return void await P({stream:b.body,update:u,onFinish:p,generateId:h});case"data":return void await C({stream:b.body,update:u,lastMessage:I,onToolCall:f,onFinish({message:e,finishReason:t,usage:o}){p&&null!=e&&p(e,{usage:o,finishReason:t})},generateId:h});default:throw new Error(`Unknown stream protocol: ${o}`)}}var j=()=>fetch;async function F({api:e,prompt:t,credentials:o,headers:n,body:s,streamProtocol:l="data",setCompletion:i,setLoading:c,setError:u,setAbortController:p,onResponse:f,onFinish:h,onError:y,onData:I,fetch:_=j()}){var E;try{c(!0),u(void 0);const y=new AbortController;p(y),i("");const b=await _(e,{method:"POST",body:JSON.stringify({prompt:t,...s}),credentials:o,headers:{"Content-Type":"application/json",...n},signal:y.signal}).catch(e=>{throw e});if(f)try{await f(b)}catch(e){throw e}if(!b.ok)throw new Error(null!=(E=await b.text())?E:"Failed to fetch the chat response.");if(!b.body)throw new Error("The response body is empty.");let w="";switch(l){case"text":await x({stream:b.body,onTextPart:e=>{w+=e,i(w)}});break;case"data":await k({stream:b.body,onTextPart(e){w+=e,i(w)},onDataPart(e){null==I||I(e)},onErrorPart(e){throw new Error(e)}});break;default:throw new Error(`Unknown stream protocol: ${l}`)}return h&&h(t,w),p(null),w}catch(e){if("AbortError"===e.name)return p(null),null;e instanceof Error&&y&&y(e),u(e)}finally{c(!1)}}function M(e){const[t,o]=e.split(",");if(null==t.split(";")[0].split(":")[1]||null==o)throw new Error("Invalid data URL format");try{return window.atob(o)}catch(e){throw new Error("Error decoding data URL")}}function J(e){return null==e?void 0:e.reduce((e,t)=>{var o;return Math.max(e,null!=(o=t.step)?o:0)},0)}function U(e){var t;return null!=(t=e.parts)?t:[...e.toolInvocations?e.toolInvocations.map(e=>({type:"tool-invocation",toolInvocation:e})):[],...e.reasoning?[{type:"reasoning",reasoning:e.reasoning,details:[{type:"text",text:e.reasoning}]}]:[],...e.content?[{type:"text",text:e.content}]:[]]}function L(e){return e.map(e=>({...e,parts:U(e)}))}function B(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if("object"!=typeof e&&"object"!=typeof t)return e===t;if(e.constructor!==t.constructor)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(Array.isArray(e)){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!B(e[o],t[o]))return!1;return!0}const o=Object.keys(e),n=Object.keys(t);if(o.length!==n.length)return!1;for(const s of o){if(!n.includes(s))return!1;if(!B(e[s],t[s]))return!1}return!0}async function Y(e){if(!e)return[];if(e instanceof FileList)return Promise.all(Array.from(e).map(async e=>{const{name:t,type:o}=e;return{name:t,contentType:o,url:await new Promise((t,o)=>{const n=new FileReader;n.onload=e=>{var o;t(null==(o=e.target)?void 0:o.result)},n.onerror=e=>o(e),n.readAsDataURL(e)})}}));if(Array.isArray(e))return e;throw new Error("Invalid attachments type")}var V="\n".charCodeAt(0);function $(e,t){const o=new Uint8Array(t);let n=0;for(const t of e)o.set(t,n),n+=t.length;return e.length=0,o}async function K({stream:e,onTextPart:t,onErrorPart:o,onAssistantMessagePart:n,onAssistantControlDataPart:s,onDataMessagePart:l}){const i=e.getReader(),c=new TextDecoder,u=[];let p=0;for(;;){const{value:e}=await i.read();if(e&&(u.push(e),p+=e.length,e[e.length-1]!==V))continue;if(0===u.length)break;const f=$(u,p);p=0;const h=c.decode(f,{stream:!0}).split("\n").filter(e=>""!==e).map(y);for(const{type:e,value:i}of h)switch(e){case"text":await(null==t?void 0:t(i));break;case"error":await(null==o?void 0:o(i));break;case"assistant_message":await(null==n?void 0:n(i));break;case"assistant_control_data":await(null==s?void 0:s(i));break;case"data_message":await(null==l?void 0:l(i));break;default:throw new Error(`Unknown stream part type: ${e}`)}}}function W(e,t){var o;const s=null!=(o=null==t?void 0:t.useReferences)&&o;return q((0,n.default)(e,{$refStrategy:s?"root":"none",target:"jsonSchema7"}),{validate:t=>{const o=e.safeParse(t);return o.success?{success:!0,value:o.data}:{success:!1,error:o.error}}})}var G=Symbol.for("vercel.ai.schema");function q(e,{validate:o}={}){return{[G]:!0,_type:void 0,[t.validatorSymbol]:!0,jsonSchema:e,validate:o}}function z(e){return"object"==typeof(t=e)&&null!==t&&G in t&&!0===t[G]&&"jsonSchema"in t&&"validate"in t?e:W(e);var t}function H({originalMaxToolInvocationStep:e,originalMessageCount:t,maxSteps:o,messages:n}){var s;const l=n[n.length-1];return o>1&&null!=l&&(n.length>t||J(l.toolInvocations)!==e)&&Q(l)&&(null!=(s=J(l.toolInvocations))?s:0)<o}function Q(e){if("assistant"!==e.role)return!1;const t=e.parts.reduce((e,t,o)=>"step-start"===t.type?o:e,-1),o=e.parts.slice(t+1).filter(e=>"tool-invocation"===e.type);return o.length>0&&o.every(e=>"result"in e.toolInvocation)}function X({messages:e,toolCallId:t,toolResult:o}){var n;const s=e[e.length-1],l=s.parts.find(e=>"tool-invocation"===e.type&&e.toolInvocation.toolCallId===t);if(null==l)return;const i={...l.toolInvocation,state:"result",result:o};l.toolInvocation=i,s.toolInvocations=null==(n=s.toolInvocations)?void 0:n.map(e=>e.toolCallId===t?i:e)}},3048,[3045,3049]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return Q}});var t=r(d[0]);Object.keys(t).forEach(function(n){'default'===n||Object.prototype.hasOwnProperty.call(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})});var n=r(d[1]);Object.keys(n).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var o=r(d[2]);Object.keys(o).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var c=r(d[3]);Object.keys(c).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})});var u=r(d[4]);Object.keys(u).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})});var f=r(d[5]);Object.keys(f).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}})});var l=r(d[6]);Object.keys(l).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})});var b=r(d[7]);Object.keys(b).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return b[t]}})});var p=r(d[8]);Object.keys(p).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}})});var y=r(d[9]);Object.keys(y).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return y[t]}})});var O=r(d[10]);Object.keys(O).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return O[t]}})});var j=r(d[11]);Object.keys(j).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return j[t]}})});var s=r(d[12]);Object.keys(s).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var P=r(d[13]);Object.keys(P).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return P[t]}})});var h=r(d[14]);Object.keys(h).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}})});var v=r(d[15]);Object.keys(v).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return v[t]}})});var k=r(d[16]);Object.keys(k).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return k[t]}})});var w=r(d[17]);Object.keys(w).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return w[t]}})});var E=r(d[18]);Object.keys(E).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return E[t]}})});var _=r(d[19]);Object.keys(_).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return _[t]}})});var z=r(d[20]);Object.keys(z).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return z[t]}})});var J=r(d[21]);Object.keys(J).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return J[t]}})});var M=r(d[22]);Object.keys(M).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return M[t]}})});var S=r(d[23]);Object.keys(S).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return S[t]}})});var T=r(d[24]);Object.keys(T).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return T[t]}})});var q=r(d[25]);Object.keys(q).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return q[t]}})});var x=r(d[26]);Object.keys(x).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return x[t]}})});var A=r(d[27]);Object.keys(A).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return A[t]}})});var B=r(d[28]);Object.keys(B).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return B[t]}})});var C=r(d[29]);Object.keys(C).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return C[t]}})});var D=r(d[30]);Object.keys(D).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return D[t]}})});var F=r(d[31]);Object.keys(F).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return F[t]}})});var G=r(d[32]);Object.keys(G).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return G[t]}})});var H=r(d[33]);Object.keys(H).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return H[t]}})});var I=r(d[34]);Object.keys(I).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return I[t]}})});var K=r(d[35]);Object.keys(K).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return K[t]}})});var L=r(d[36]);Object.keys(L).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return L[t]}})});var N=r(d[37]);Object.keys(N).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return N[t]}})});var Q=N.zodToJsonSchema},3049,[3050,3051,3052,3053,3054,3087,3057,3058,3059,3060,3061,3062,3063,3064,3065,3066,3067,3068,3069,3072,3073,3074,3075,3077,3078,3079,3080,3081,3086,3070,3082,3071,3083,3084,3076,3085,3055,3088]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"ignoreOverride",{enumerable:!0,get:function(){return t}}),Object.defineProperty(e,"jsonDescription",{enumerable:!0,get:function(){return n}}),Object.defineProperty(e,"defaultOptions",{enumerable:!0,get:function(){return o}}),Object.defineProperty(e,"getDefaultOptions",{enumerable:!0,get:function(){return s}});const t=Symbol("Let zodToJsonSchema decide on which parser to use"),n=(t,n)=>{if(n.description)try{return{...t,...JSON.parse(n.description)}}catch{}return t},o={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},s=t=>"string"==typeof t?{...o,name:t}:{...o,...t}},3050,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"getRefs",{enumerable:!0,get:function(){return n}});var t=r(d[0]);const n=n=>{const o=(0,t.getDefaultOptions)(n),s=void 0!==o.name?[...o.basePath,o.definitionPath,o.name]:o.basePath;return{...o,flags:{hasReferencedOpenAiAnyType:!1},currentPath:s,propertyPath:void 0,seen:new Map(Object.entries(o.definitions).map(([t,n])=>[n._def,{def:n._def,path:[...o.basePath,o.definitionPath,t],jsonSchema:void 0}]))}}},3051,[3050]);
__d(function(g,r,i,a,m,e,d){"use strict";function s(s,o,n,t){t?.errorMessages&&n&&(s.errorMessage={...s.errorMessage,[o]:n})}Object.defineProperty(e,'__esModule',{value:!0}),e.addErrorMessage=s,e.setResponseValueAndErrors=function(o,n,t,u,c){o[n]=t,s(o,n,u,c)}},3052,[]);
__d(function(g,r,_i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"getRelativePath",{enumerable:!0,get:function(){return t}});const t=(t,n)=>{let i=0;for(;i<t.length&&i<n.length&&t[i]===n[i];i++);return[(t.length-i).toString(),...n.slice(i)].join("/")}},3053,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseDef=function o(s,u,p=!1){const h=u.seen.get(s);if(u.override){const n=u.override?.(s,u,h,p);if(n!==t.ignoreOverride)return n}if(h&&!p){const t=c(h,u);if(void 0!==t)return t}const v={def:s,path:u.currentPath,jsonSchema:void 0};u.seen.set(s,v);const P=(0,n.selectParser)(s,s.typeName,u),l="function"==typeof P?o(P(),u):P;l&&f(s,u,l);if(u.postProcess){const t=u.postProcess(l,s,u);return v.jsonSchema=l,t}return v.jsonSchema=l,l};var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]);const c=(t,n)=>{switch(n.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:(0,o.getRelativePath)(n.currentPath,t.path)};case"none":case"seen":return t.path.length<n.currentPath.length&&t.path.every((t,o)=>n.currentPath[o]===t)?(console.warn(`Recursive reference detected at ${n.currentPath.join("/")}! Defaulting to any`),(0,s.parseAnyDef)(n)):"seen"===n.$refStrategy?(0,s.parseAnyDef)(n):void 0}},f=(t,n,o)=>(t.description&&(o.description=t.description,n.markdownDescription&&(o.markdownDescription=t.description)),o)},3054,[3050,3055,3053,3057]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"selectParser",{enumerable:!0,get:function(){return L}});var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),y=r(d[4]),p=r(d[5]),Z=r(d[6]),c=r(d[7]),u=r(d[8]),f=r(d[9]),P=r(d[10]),T=r(d[11]),F=r(d[12]),K=r(d[13]),D=r(d[14]),l=r(d[15]),N=r(d[16]),b=r(d[17]),U=r(d[18]),v=r(d[19]),B=r(d[20]),E=r(d[21]),O=r(d[22]),S=r(d[23]),_=r(d[24]),j=r(d[25]),A=r(d[26]),R=r(d[27]),h=r(d[28]),w=r(d[29]),I=r(d[30]);const L=(L,M,k)=>{switch(M){case t.ZodFirstPartyTypeKind.ZodString:return(0,j.parseStringDef)(L,k);case t.ZodFirstPartyTypeKind.ZodNumber:return(0,U.parseNumberDef)(L,k);case t.ZodFirstPartyTypeKind.ZodObject:return(0,v.parseObjectDef)(L,k);case t.ZodFirstPartyTypeKind.ZodBigInt:return(0,o.parseBigintDef)(L,k);case t.ZodFirstPartyTypeKind.ZodBoolean:return(0,y.parseBooleanDef)();case t.ZodFirstPartyTypeKind.ZodDate:return(0,c.parseDateDef)(L,k);case t.ZodFirstPartyTypeKind.ZodUndefined:return(0,R.parseUndefinedDef)(k);case t.ZodFirstPartyTypeKind.ZodNull:return(0,N.parseNullDef)(k);case t.ZodFirstPartyTypeKind.ZodArray:return(0,s.parseArrayDef)(L,k);case t.ZodFirstPartyTypeKind.ZodUnion:case t.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,h.parseUnionDef)(L,k);case t.ZodFirstPartyTypeKind.ZodIntersection:return(0,T.parseIntersectionDef)(L,k);case t.ZodFirstPartyTypeKind.ZodTuple:return(0,A.parseTupleDef)(L,k);case t.ZodFirstPartyTypeKind.ZodRecord:return(0,S.parseRecordDef)(L,k);case t.ZodFirstPartyTypeKind.ZodLiteral:return(0,F.parseLiteralDef)(L,k);case t.ZodFirstPartyTypeKind.ZodEnum:return(0,P.parseEnumDef)(L);case t.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,D.parseNativeEnumDef)(L);case t.ZodFirstPartyTypeKind.ZodNullable:return(0,b.parseNullableDef)(L,k);case t.ZodFirstPartyTypeKind.ZodOptional:return(0,B.parseOptionalDef)(L,k);case t.ZodFirstPartyTypeKind.ZodMap:return(0,K.parseMapDef)(L,k);case t.ZodFirstPartyTypeKind.ZodSet:return(0,_.parseSetDef)(L,k);case t.ZodFirstPartyTypeKind.ZodLazy:return()=>L.getter()._def;case t.ZodFirstPartyTypeKind.ZodPromise:return(0,O.parsePromiseDef)(L,k);case t.ZodFirstPartyTypeKind.ZodNaN:case t.ZodFirstPartyTypeKind.ZodNever:return(0,l.parseNeverDef)(k);case t.ZodFirstPartyTypeKind.ZodEffects:return(0,f.parseEffectsDef)(L,k);case t.ZodFirstPartyTypeKind.ZodAny:return(0,n.parseAnyDef)(k);case t.ZodFirstPartyTypeKind.ZodUnknown:return(0,w.parseUnknownDef)(k);case t.ZodFirstPartyTypeKind.ZodDefault:return(0,u.parseDefaultDef)(L,k);case t.ZodFirstPartyTypeKind.ZodBranded:return(0,p.parseBrandedDef)(L,k);case t.ZodFirstPartyTypeKind.ZodReadonly:return(0,I.parseReadonlyDef)(L,k);case t.ZodFirstPartyTypeKind.ZodCatch:return(0,Z.parseCatchDef)(L,k);case t.ZodFirstPartyTypeKind.ZodPipeline:return(0,E.parsePipelineDef)(L,k);case t.ZodFirstPartyTypeKind.ZodFunction:case t.ZodFirstPartyTypeKind.ZodVoid:case t.ZodFirstPartyTypeKind.ZodSymbol:default:return}}},3055,[3056,3057,3058,3059,3060,3061,3062,3063,3064,3065,3066,3067,3068,3069,3072,3073,3074,3075,3077,3078,3079,3080,3081,3070,3082,3071,3083,3084,3076,3085,3086]);
__d(function(g,r,i,a,m,_e,_d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return n}}),Object.defineProperty(_e,"z",{enumerable:!0,get:function(){return t}});var e=r(_d[0]);Object.keys(e).forEach(function(t){'default'===t||Object.prototype.hasOwnProperty.call(_e,t)||Object.defineProperty(_e,t,{enumerable:!0,get:function(){return e[t]}})});var t=(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(n){var u=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,u.get?u:{enumerable:!0,get:function(){return e[n]}})}),t.default=e,t})(e),n=t},3056,[3018]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseAnyDef=function(n){if("openAi"!==n.target)return{};const f=[...n.basePath,n.definitionPath,n.openAiAnyTypeName];return n.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===n.$refStrategy?(0,t.getRelativePath)(f,n.currentPath):f.join("/")}};var t=r(d[0])},3057,[3053]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseArrayDef=function(u,o){const h={type:"array"};u.type?._def&&u.type?._def?.typeName!==t.ZodFirstPartyTypeKind.ZodAny&&(h.items=(0,n.parseDef)(u.type._def,{...o,currentPath:[...o.currentPath,"items"]}));u.minLength&&(0,s.setResponseValueAndErrors)(h,"minItems",u.minLength.value,u.minLength.message,o);u.maxLength&&(0,s.setResponseValueAndErrors)(h,"maxItems",u.maxLength.value,u.maxLength.message,o);u.exactLength&&((0,s.setResponseValueAndErrors)(h,"minItems",u.exactLength.value,u.exactLength.message,o),(0,s.setResponseValueAndErrors)(h,"maxItems",u.exactLength.value,u.exactLength.message,o));return h};var t=r(d[0]),s=r(d[1]),n=r(d[2])},3058,[3056,3052,3054]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseBigintDef=function(u,n){const t={type:"integer",format:"int64"};if(!u.checks)return t;for(const l of u.checks)switch(l.kind){case"min":"jsonSchema7"===n.target?l.inclusive?(0,s.setResponseValueAndErrors)(t,"minimum",l.value,l.message,n):(0,s.setResponseValueAndErrors)(t,"exclusiveMinimum",l.value,l.message,n):(l.inclusive||(t.exclusiveMinimum=!0),(0,s.setResponseValueAndErrors)(t,"minimum",l.value,l.message,n));break;case"max":"jsonSchema7"===n.target?l.inclusive?(0,s.setResponseValueAndErrors)(t,"maximum",l.value,l.message,n):(0,s.setResponseValueAndErrors)(t,"exclusiveMaximum",l.value,l.message,n):(l.inclusive||(t.exclusiveMaximum=!0),(0,s.setResponseValueAndErrors)(t,"maximum",l.value,l.message,n));break;case"multipleOf":(0,s.setResponseValueAndErrors)(t,"multipleOf",l.value,l.message,n)}return t};var s=r(d[0])},3059,[3052]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseBooleanDef=function(){return{type:"boolean"}}},3060,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseBrandedDef=function(n,f){return(0,t.parseDef)(n.type._def,f)};var t=r(d[0])},3061,[3054]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"parseCatchDef",{enumerable:!0,get:function(){return n}});var t=r(d[0]);const n=(n,c)=>(0,t.parseDef)(n.innerType._def,c)},3062,[3054]);
__d(function(g,r,_i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseDateDef=function t(n,i,o){const c=o??i.dateStrategy;if(Array.isArray(c))return{anyOf:c.map((s,o)=>t(n,i,s))};switch(c){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return s(n,i)}};var t=r(d[0]);const s=(s,n)=>{const i={type:"integer",format:"unix-time"};if("openApi3"===n.target)return i;for(const o of s.checks)switch(o.kind){case"min":(0,t.setResponseValueAndErrors)(i,"minimum",o.value,o.message,n);break;case"max":(0,t.setResponseValueAndErrors)(i,"maximum",o.value,o.message,n)}return i}},3063,[3052]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseDefaultDef=function(u,f){return{...(0,t.parseDef)(u.innerType._def,f),default:u.defaultValue()}};var t=r(d[0])},3064,[3054]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseEffectsDef=function(n,s){return"input"===s.effectStrategy?(0,t.parseDef)(n.schema._def,s):(0,f.parseAnyDef)(s)};var t=r(d[0]),f=r(d[1])},3065,[3054,3057]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseEnumDef=function(n){return{type:"string",enum:Array.from(n.values)}}},3066,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseIntersectionDef=function(l,o){const s=[(0,t.parseDef)(l.left._def,{...o,currentPath:[...o.currentPath,"allOf","0"]}),(0,t.parseDef)(l.right._def,{...o,currentPath:[...o.currentPath,"allOf","1"]})].filter(t=>!!t);let f="jsonSchema2019-09"===o.target?{unevaluatedProperties:!1}:void 0;const u=[];return s.forEach(t=>{if(n(t))u.push(...t.allOf),void 0===t.unevaluatedProperties&&(f=void 0);else{let n=t;if("additionalProperties"in t&&!1===t.additionalProperties){const{additionalProperties:l,...o}=t;n=o}else f=void 0;u.push(n)}}),u.length?{allOf:u,...f}:void 0};var t=r(d[0]);const n=t=>(!("type"in t)||"string"!==t.type)&&"allOf"in t},3067,[3054]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseLiteralDef=function(t,n){const u=typeof t.value;if("bigint"!==u&&"number"!==u&&"boolean"!==u&&"string"!==u)return{type:Array.isArray(t.value)?"array":"object"};if("openApi3"===n.target)return{type:"bigint"===u?"integer":u,enum:[t.value]};return{type:"bigint"===u?"integer":u,const:t.value}}},3068,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseMapDef=function(p,f){if("record"===f.mapStrategy)return(0,s.parseRecordDef)(p,f);const u=(0,t.parseDef)(p.keyType._def,{...f,currentPath:[...f.currentPath,"items","items","0"]})||(0,n.parseAnyDef)(f),c=(0,t.parseDef)(p.valueType._def,{...f,currentPath:[...f.currentPath,"items","items","1"]})||(0,n.parseAnyDef)(f);return{type:"array",maxItems:125,items:{type:"array",items:[u,c],minItems:2,maxItems:2}}};var t=r(d[0]),s=r(d[1]),n=r(d[2])},3069,[3054,3070,3057]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseRecordDef=function(s,f){"openAi"===f.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.");if("openApi3"===f.target&&s.keyType?._def.typeName===t.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:s.keyType._def.values,properties:s.keyType._def.values.reduce((t,y)=>({...t,[y]:(0,p.parseDef)(s.valueType._def,{...f,currentPath:[...f.currentPath,"properties",y]})??(0,o.parseAnyDef)(f)}),{}),additionalProperties:f.rejectedAdditionalProperties};const u={type:"object",additionalProperties:(0,p.parseDef)(s.valueType._def,{...f,currentPath:[...f.currentPath,"additionalProperties"]})??f.allowedAdditionalProperties};if("openApi3"===f.target)return u;if(s.keyType?._def.typeName===t.ZodFirstPartyTypeKind.ZodString&&s.keyType._def.checks?.length){const{type:t,...p}=(0,y.parseStringDef)(s.keyType._def,f);return{...u,propertyNames:p}}if(s.keyType?._def.typeName===t.ZodFirstPartyTypeKind.ZodEnum)return{...u,propertyNames:{enum:s.keyType._def.values}};if(s.keyType?._def.typeName===t.ZodFirstPartyTypeKind.ZodBranded&&s.keyType._def.type._def.typeName===t.ZodFirstPartyTypeKind.ZodString&&s.keyType._def.type._def.checks?.length){const{type:t,...p}=(0,n.parseBrandedDef)(s.keyType._def,f);return{...u,propertyNames:p}}return u};var t=r(d[0]),p=r(d[1]),y=r(d[2]),n=r(d[3]),o=r(d[4])},3070,[3056,3054,3071,3061,3057]);
__d(function(g,r,_i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"zodPatterns",{enumerable:!0,get:function(){return n}}),e.parseStringDef=function(t,i){const f={type:"string"};if(t.checks)for(const l of t.checks)switch(l.kind){case"min":(0,s.setResponseValueAndErrors)(f,"minLength","number"==typeof f.minLength?Math.max(f.minLength,l.value):l.value,l.message,i);break;case"max":(0,s.setResponseValueAndErrors)(f,"maxLength","number"==typeof f.maxLength?Math.min(f.maxLength,l.value):l.value,l.message,i);break;case"email":switch(i.emailStrategy){case"format:email":c(f,"email",l.message,i);break;case"format:idn-email":c(f,"idn-email",l.message,i);break;case"pattern:zod":u(f,n.email,l.message,i)}break;case"url":c(f,"uri",l.message,i);break;case"uuid":c(f,"uuid",l.message,i);break;case"regex":u(f,l.regex,l.message,i);break;case"cuid":u(f,n.cuid,l.message,i);break;case"cuid2":u(f,n.cuid2,l.message,i);break;case"startsWith":u(f,RegExp(`^${o(l.value,i)}`),l.message,i);break;case"endsWith":u(f,RegExp(`${o(l.value,i)}$`),l.message,i);break;case"datetime":c(f,"date-time",l.message,i);break;case"date":c(f,"date",l.message,i);break;case"time":c(f,"time",l.message,i);break;case"duration":c(f,"duration",l.message,i);break;case"length":(0,s.setResponseValueAndErrors)(f,"minLength","number"==typeof f.minLength?Math.max(f.minLength,l.value):l.value,l.message,i),(0,s.setResponseValueAndErrors)(f,"maxLength","number"==typeof f.maxLength?Math.min(f.maxLength,l.value):l.value,l.message,i);break;case"includes":u(f,RegExp(o(l.value,i)),l.message,i);break;case"ip":"v6"!==l.version&&c(f,"ipv4",l.message,i),"v4"!==l.version&&c(f,"ipv6",l.message,i);break;case"base64url":u(f,n.base64url,l.message,i);break;case"jwt":u(f,n.jwt,l.message,i);break;case"cidr":"v6"!==l.version&&u(f,n.ipv4Cidr,l.message,i),"v4"!==l.version&&u(f,n.ipv6Cidr,l.message,i);break;case"emoji":u(f,n.emoji(),l.message,i);break;case"ulid":u(f,n.ulid,l.message,i);break;case"base64":switch(i.base64Strategy){case"format:binary":c(f,"binary",l.message,i);break;case"contentEncoding:base64":(0,s.setResponseValueAndErrors)(f,"contentEncoding","base64",l.message,i);break;case"pattern:zod":u(f,n.base64,l.message,i)}break;case"nanoid":u(f,n.nanoid,l.message,i);case"toLowerCase":case"toUpperCase":case"trim":break;default:(()=>{})()}return f};var s=r(d[0]);let t;const n={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===t&&(t=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),t),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function o(s,t){return"escape"===t.patternStrategy?f(s):s}const i=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function f(s){let t="";for(let n=0;n<s.length;n++)i.has(s[n])||(t+="\\"),t+=s[n];return t}function c(t,n,o,i){t.format||t.anyOf?.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&i.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,0===Object.keys(t.errorMessage).length&&delete t.errorMessage)),t.anyOf.push({format:n,...o&&i.errorMessages&&{errorMessage:{format:o}}})):(0,s.setResponseValueAndErrors)(t,"format",n,o,i)}function u(t,n,o,i){t.pattern||t.allOf?.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&i.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,0===Object.keys(t.errorMessage).length&&delete t.errorMessage)),t.allOf.push({pattern:l(n,i),...o&&i.errorMessages&&{errorMessage:{pattern:o}}})):(0,s.setResponseValueAndErrors)(t,"pattern",l(n,i),o,i)}function l(s,t){if(!t.applyRegexFlags||!s.flags)return s.source;const n=s.flags.includes("i"),o=s.flags.includes("m"),i=s.flags.includes("s"),f=n?s.source.toLowerCase():s.source;let c="",u=!1,l=!1,p=!1;for(let s=0;s<f.length;s++)if(u)c+=f[s],u=!1;else{if(n)if(l){if(f[s].match(/[a-z]/)){p?(c+=f[s],c+=`${f[s-2]}-${f[s]}`.toUpperCase(),p=!1):"-"===f[s+1]&&f[s+2]?.match(/[a-z]/)?(c+=f[s],p=!0):c+=`${f[s]}${f[s].toUpperCase()}`;continue}}else if(f[s].match(/[a-z]/)){c+=`[${f[s]}${f[s].toUpperCase()}]`;continue}if(o){if("^"===f[s]){c+="(^|(?<=[\r\n]))";continue}if("$"===f[s]){c+="($|(?=[\r\n]))";continue}}i&&"."===f[s]?c+=l?`${f[s]}\r\n`:`[${f[s]}\r\n]`:(c+=f[s],"\\"===f[s]?u=!0:l&&"]"===f[s]?l=!1:l||"["!==f[s]||(l=!0))}try{new RegExp(c)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),s.source}return c}},3071,[3052]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseNativeEnumDef=function(t){const n=t.values,u=Object.keys(t.values).filter(t=>"number"!=typeof n[n[t]]).map(t=>n[t]),s=Array.from(new Set(u.map(t=>typeof t)));return{type:1===s.length?"string"===s[0]?"string":"number":["string","number"],enum:u}}},3072,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseNeverDef=function(n){return"openAi"===n.target?void 0:{not:(0,t.parseAnyDef)({...n,currentPath:[...n.currentPath,"not"]})}};var t=r(d[0])},3073,[3057]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseNullDef=function(l){return"openApi3"===l.target?{enum:["null"],nullable:!0}:{type:"null"}}},3074,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseNullableDef=function(p,l){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(p.innerType._def.typeName)&&(!p.innerType._def.checks||!p.innerType._def.checks.length))return"openApi3"===l.target?{type:t.primitiveMappings[p.innerType._def.typeName],nullable:!0}:{type:[t.primitiveMappings[p.innerType._def.typeName],"null"]};if("openApi3"===l.target){const t=(0,n.parseDef)(p.innerType._def,{...l,currentPath:[...l.currentPath]});return t&&"$ref"in t?{allOf:[t],nullable:!0}:t&&{...t,nullable:!0}}const u=(0,n.parseDef)(p.innerType._def,{...l,currentPath:[...l.currentPath,"anyOf","0"]});return u&&{anyOf:[u,{type:"null"}]}};var n=r(d[0]),t=r(d[1])},3075,[3054,3076]);
__d(function(g,r,_i,_a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"primitiveMappings",{enumerable:!0,get:function(){return t}}),e.parseUnionDef=function(n,i){if("openApi3"===i.target)return o(n,i);const u=n.options instanceof Map?Array.from(n.options.values()):n.options;if(u.every(n=>n._def.typeName in t&&(!n._def.checks||!n._def.checks.length))){const n=u.reduce((n,o)=>{const i=t[o._def.typeName];return i&&!n.includes(i)?[...n,i]:n},[]);return{type:n.length>1?n:n[0]}}if(u.every(n=>"ZodLiteral"===n._def.typeName&&!n.description)){const n=u.reduce((n,t)=>{const o=typeof t._def.value;switch(o){case"string":case"number":case"boolean":return[...n,o];case"bigint":return[...n,"integer"];case"object":if(null===t._def.value)return[...n,"null"];default:return n}},[]);if(n.length===u.length){const t=n.filter((n,t,o)=>o.indexOf(n)===t);return{type:t.length>1?t:t[0],enum:u.reduce((n,t)=>n.includes(t._def.value)?n:[...n,t._def.value],[])}}}else if(u.every(n=>"ZodEnum"===n._def.typeName))return{type:"string",enum:u.reduce((n,t)=>[...n,...t._def.values.filter(t=>!n.includes(t))],[])};return o(n,i)};var n=r(d[0]);const t={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};const o=(t,o)=>{const i=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((t,i)=>(0,n.parseDef)(t._def,{...o,currentPath:[...o.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!o.strictUnions||"object"==typeof n&&Object.keys(n).length>0));return i.length?{anyOf:i}:void 0}},3076,[3054]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseNumberDef=function(u,n){const t={type:"number"};if(!u.checks)return t;for(const l of u.checks)switch(l.kind){case"int":t.type="integer",(0,s.addErrorMessage)(t,"type",l.message,n);break;case"min":"jsonSchema7"===n.target?l.inclusive?(0,s.setResponseValueAndErrors)(t,"minimum",l.value,l.message,n):(0,s.setResponseValueAndErrors)(t,"exclusiveMinimum",l.value,l.message,n):(l.inclusive||(t.exclusiveMinimum=!0),(0,s.setResponseValueAndErrors)(t,"minimum",l.value,l.message,n));break;case"max":"jsonSchema7"===n.target?l.inclusive?(0,s.setResponseValueAndErrors)(t,"maximum",l.value,l.message,n):(0,s.setResponseValueAndErrors)(t,"exclusiveMaximum",l.value,l.message,n):(l.inclusive||(t.exclusiveMaximum=!0),(0,s.setResponseValueAndErrors)(t,"maximum",l.value,l.message,n));break;case"multipleOf":(0,s.setResponseValueAndErrors)(t,"multipleOf",l.value,l.message,n)}return t};var s=r(d[0])},3077,[3052]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseObjectDef=function(s,c){const p="openAi"===c.target,l={type:"object",properties:{}},u=[],f=s.shape();for(const n in f){let s=f[n];if(void 0===s||void 0===s._def)continue;let h=o(s);h&&p&&("ZodOptional"===s._def.typeName&&(s=s._def.innerType),s.isNullable()||(s=s.nullable()),h=!1);const P=(0,t.parseDef)(s._def,{...c,currentPath:[...c.currentPath,"properties",n],propertyPath:[...c.currentPath,"properties",n]});void 0!==P&&(l.properties[n]=P,h||u.push(n))}u.length&&(l.required=u);const h=n(s,c);void 0!==h&&(l.additionalProperties=h);return l};var t=r(d[0]);function n(n,o){if("ZodNever"!==n.catchall._def.typeName)return(0,t.parseDef)(n.catchall._def,{...o,currentPath:[...o.currentPath,"additionalProperties"]});switch(n.unknownKeys){case"passthrough":return o.allowedAdditionalProperties;case"strict":return o.rejectedAdditionalProperties;case"strip":return"strict"===o.removeAdditionalStrategy?o.allowedAdditionalProperties:o.rejectedAdditionalProperties}}function o(t){try{return t.isOptional()}catch{return!0}}},3078,[3054]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"parseOptionalDef",{enumerable:!0,get:function(){return f}});var t=r(d[0]),n=r(d[1]);const f=(f,o)=>{if(o.currentPath.toString()===o.propertyPath?.toString())return(0,t.parseDef)(f.innerType._def,o);const p=(0,t.parseDef)(f.innerType._def,{...o,currentPath:[...o.currentPath,"anyOf","1"]});return p?{anyOf:[{not:(0,n.parseAnyDef)(o)},p]}:(0,n.parseAnyDef)(o)}},3079,[3054,3057]);
__d(function(g,r,i,_a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"parsePipelineDef",{enumerable:!0,get:function(){return n}});var t=r(d[0]);const n=(n,f)=>{if("input"===f.pipeStrategy)return(0,t.parseDef)(n.in._def,f);if("output"===f.pipeStrategy)return(0,t.parseDef)(n.out._def,f);const u=(0,t.parseDef)(n.in._def,{...f,currentPath:[...f.currentPath,"allOf","0"]});return{allOf:[u,(0,t.parseDef)(n.out._def,{...f,currentPath:[...f.currentPath,"allOf",u?"1":"0"]})].filter(t=>void 0!==t)}}},3080,[3054]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parsePromiseDef=function(f,n){return(0,t.parseDef)(f.type._def,n)};var t=r(d[0])},3081,[3054]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseSetDef=function(n,u){const o={type:"array",uniqueItems:!0,items:(0,t.parseDef)(n.valueType._def,{...u,currentPath:[...u.currentPath,"items"]})};n.minSize&&(0,s.setResponseValueAndErrors)(o,"minItems",n.minSize.value,n.minSize.message,u);n.maxSize&&(0,s.setResponseValueAndErrors)(o,"maxItems",n.maxSize.value,n.maxSize.message,u);return o};var s=r(d[0]),t=r(d[1])},3082,[3052,3054]);
__d(function(g,r,_i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseTupleDef=function(s,i){return s.rest?{type:"array",minItems:s.items.length,items:s.items.map((s,n)=>(0,t.parseDef)(s._def,{...i,currentPath:[...i.currentPath,"items",`${n}`]})).reduce((t,s)=>void 0===s?t:[...t,s],[]),additionalItems:(0,t.parseDef)(s.rest._def,{...i,currentPath:[...i.currentPath,"additionalItems"]})}:{type:"array",minItems:s.items.length,maxItems:s.items.length,items:s.items.map((s,n)=>(0,t.parseDef)(s._def,{...i,currentPath:[...i.currentPath,"items",`${n}`]})).reduce((t,s)=>void 0===s?t:[...t,s],[])}};var t=r(d[0])},3083,[3054]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseUndefinedDef=function(t){return{not:(0,n.parseAnyDef)(t)}};var n=r(d[0])},3084,[3057]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.parseUnknownDef=function(t){return(0,n.parseAnyDef)(t)};var n=r(d[0])},3085,[3057]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"parseReadonlyDef",{enumerable:!0,get:function(){return t}});var n=r(d[0]);const t=(t,f)=>(0,n.parseDef)(t.innerType._def,f)},3086,[3054]);
__d(function(g,r,i,a,m,e,d){},3087,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"zodToJsonSchema",{enumerable:!0,get:function(){return s}});var t=r(d[0]),n=r(d[1]),o=r(d[2]);const s=(s,f)=>{const p=(0,n.getRefs)(f);let y="object"==typeof f&&f.definitions?Object.entries(f.definitions).reduce((n,[s,f])=>({...n,[s]:(0,t.parseDef)(f._def,{...p,currentPath:[...p.basePath,p.definitionPath,s]},!0)??(0,o.parseAnyDef)(p)}),{}):void 0;const c="string"==typeof f?f:"title"===f?.nameStrategy?void 0:f?.name,h=(0,t.parseDef)(s._def,void 0===c?p:{...p,currentPath:[...p.basePath,p.definitionPath,c]},!1)??(0,o.parseAnyDef)(p),l="object"==typeof f&&void 0!==f.name&&"title"===f.nameStrategy?f.name:void 0;void 0!==l&&(h.title=l),p.flags.hasReferencedOpenAiAnyType&&(y||(y={}),y[p.openAiAnyTypeName]||(y[p.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===p.$refStrategy?"1":[...p.basePath,p.definitionPath,p.openAiAnyTypeName].join("/")}}));const u=void 0===c?y?{...h,[p.definitionPath]:y}:h:{$ref:[..."relative"===p.$refStrategy?[]:p.basePath,p.definitionPath,c].join("/"),[p.definitionPath]:{...y,[c]:h}};return"jsonSchema7"===p.target?u.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"!==p.target&&"openAi"!==p.target||(u.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===p.target&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u}},3088,[3054,3051,3057]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"ObjectScheme",{enumerable:!0,get:function(){return s}});var n=r(d[0]);const t=n.z.object({name:n.z.string().describe("\u015eark\u0131n\u0131n ad\u0131"),artist:n.z.string().describe("Sanat\xe7\u0131n\u0131n ad\u0131"),album:n.z.string().describe("Alb\xfcm ad\u0131"),duration:n.z.number().optional().describe("\u015eark\u0131 s\xfcresi (saniye cinsinden)"),genre:n.z.string().optional().describe("M\xfczik t\xfcr\xfc (\xf6rn: Pop, Rock, Jazz)"),year:n.z.number().optional().describe("Yay\u0131nlanma y\u0131l\u0131"),energyLevel:n.z.enum(["low","medium","high"]).optional().describe("Enerji seviyesi"),mood:n.z.array(n.z.string()).optional().describe("\u015eark\u0131n\u0131n ruh hali etiketleri (\xf6rn: ['enerjik', 'ne\u015feli', 'motivasyonel'])")}),l=n.z.object({playlistName:n.z.string().optional().describe("Olu\u015fturulan playlist'in ad\u0131"),description:n.z.string().optional().describe("Playlist a\xe7\u0131klamas\u0131"),totalDuration:n.z.number().optional().describe("Toplam s\xfcre (saniye cinsinden)"),mood:n.z.string().optional().describe("Playlist'in genel ruh hali"),energyLevel:n.z.enum(["low","medium","high"]).optional().describe("Playlist'in genel enerji seviyesi"),tags:n.z.array(n.z.string()).optional().describe("Playlist etiketleri")}),s=n.z.object({songs:n.z.array(t).describe("\xd6nerilen \u015fark\u0131lar\u0131n listesi"),playlistInfo:l.optional().describe("Playlist hakk\u0131nda genel bilgiler"),recommendationReason:n.z.string().optional().describe("Bu \u015fark\u0131lar\u0131n neden \xf6nerildi\u011finin a\xe7\u0131klamas\u0131"),createdAt:n.z.string().datetime().optional().describe("Playlist'in olu\u015fturulma tarihi (ISO 8601 format\u0131nda)")})},3104,[3017]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),e.POST=async function(s){try{const c=await s.text(),{input:u}=JSON.parse(c);if(!u)return Response.json({error:"Input must be a string"},{status:400});const k=u.toLowerCase().includes('g\xfcncel')||u.toLowerCase().includes('pop\xfcler')||u.toLowerCase().includes('trend')||u.toLowerCase().includes((new Date).getFullYear().toString())||u.toLowerCase().includes('yeni')||u.toLowerCase().includes('son \xe7\u0131kan');let p="";try{let n="";n=k?`${u} pop\xfcler \u015fark\u0131lar ${(new Date).getFullYear()}`:`${u} m\xfczik \xf6nerileri ${(new Date).getFullYear()}`,p=await o(n)}catch{p=""}const y=p?`${u}\n\n[G\xfcncel Bilgiler]\n${p}\n\nYukar\u0131daki g\xfcncel bilgileri kullanarak \xf6neriler yap.`:u,A=await(0,l.generateObject)({model:(0,n.google)("gemini-2.5-flash"),messages:[{role:'user',content:y}],system:"Sen profesyonel bir m\xfczik \xf6nerisi asistan\u0131s\u0131n. Kullan\u0131c\u0131lar\u0131n m\xfczik zevklerine uygun, \xe7e\u015fitli ve kaliteli \u015fark\u0131 \xf6nerileri sunuyorsun.\n\n\xd6NEML\u0130 KURALLAR:\n1. T\xdcRK\xc7E \u015eARKILAR: Her playlist'te mutlaka T\xfcrk\xe7e \u015fark\u0131lar da \xf6ner. T\xfcrk pop, T\xfcrk rock, T\xfcrk rap, Anadolu rock gibi t\xfcrlerden g\xfcncel ve pop\xfcler \u015fark\u0131lar ekle.\n\n2. G\xdcNCEL \u015eARKILAR: 2020-2024 y\u0131llar\u0131 aras\u0131ndaki pop\xfcler ve g\xfcncel \u015fark\u0131lar\u0131 \xf6ncelik ver.\n\n3. \xc7E\u015e\u0130TL\u0130L\u0130K: Her playlist'te farkl\u0131 t\xfcrlerden, farkl\u0131 d\xf6nemlerden ve farkl\u0131 dillerden \u015fark\u0131lar olsun.\n\n4. POP\xdcLER \u015eARKILAR: Spotify, Apple Music gibi platformlarda pop\xfcler olan \u015fark\u0131lar\u0131 \xf6ner.\n\n5. \u015eARKI B\u0130LG\u0130LER\u0130: Her \u015fark\u0131 i\xe7in do\u011fru bilgiler ver (ad, sanat\xe7\u0131, alb\xfcm, y\u0131l, t\xfcr\xfc, s\xfcre, enerji, mood).\n\n6. PLAYLIST B\u0130LG\u0130LER\u0130: Her playlist i\xe7in isim, a\xe7\u0131klama, toplam s\xfcre, ruh hali ve etiketler ekle.\n\n7. \xd6NER\u0130 NEDEN\u0130: Neden bu \u015fark\u0131lar\u0131 \xf6nerdi\u011fini a\xe7\u0131kla.\n\n8. \u015eARKI SAYISI: 8-15 \u015fark\u0131 \xf6ner.\n\n9. KAL\u0130TE: Sadece ger\xe7ekten var olan, pop\xfcler \u015fark\u0131lar\u0131 \xf6ner.\n\n10. D\u0130L DENGES\u0130: T\xfcrk\xe7e ve yabanc\u0131 \u015fark\u0131lar aras\u0131nda denge kur.",schema:t.ObjectScheme});return Response.json(A.object)}catch(n){return console.error("API Error:",n),Response.json({error:n.message||"Bir hata olu\u015ftu"},{status:500})}},e.GET=async function(){return Response.json({message:"Chat API endpoint is working"})},e.OPTIONS=async function(){return new Response(null,{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type"}})};var n=r(d[0]),l=r(d[1]),t=r(d[2]),s=r(d[3]);async function o(n){try{const l=await s.webSearchTool.execute({query:n});if('error'in l&&l.error)return console.log(l.error),"";let t="";return l.answer&&(t+=`Web Arama Sonucu: ${l.answer}\n\n`),l.results&&l.results.length>0&&(t+="\u0130lgili Kaynaklar:\n",l.results.slice(0,3).forEach((n,l)=>{t+=`${l+1}. ${n.title}: ${n.content?.substring(0,200)}...\n`})),t}catch{return""}}},5340,[5341,5342,3104,5390]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"createGoogleGenerativeAI",{enumerable:!0,get:function(){return A}}),Object.defineProperty(e,"google",{enumerable:!0,get:function(){return x}});var t=r(d[0]),n=r(d[1]),o=r(d[2]);function s(t){if(l(t))return;if("boolean"==typeof t)return{type:"boolean",properties:{}};const{type:n,description:o,required:u,properties:c,items:p,allOf:h,anyOf:f,oneOf:y,format:b,const:v,minLength:z,enum:C}=t,T={};if(o&&(T.description=o),u&&(T.required=u),b&&(T.format=b),void 0!==v&&(T.enum=[v]),n&&(Array.isArray(n)?n.includes("null")?(T.type=n.filter(t=>"null"!==t)[0],T.nullable=!0):T.type=n:T.type="null"===n?"null":n),void 0!==C&&(T.enum=C),null!=c&&(T.properties=Object.entries(c).reduce((t,[n,o])=>(t[n]=s(o),t),{})),p&&(T.items=Array.isArray(p)?p.map(s):s(p)),h&&(T.allOf=h.map(s)),f)if(f.some(t=>"object"==typeof t&&"null"===(null==t?void 0:t.type))){const t=f.filter(t=>!("object"==typeof t&&"null"===(null==t?void 0:t.type)));if(1===t.length){const n=s(t[0]);"object"==typeof n&&(T.nullable=!0,Object.assign(T,n))}else T.anyOf=t.map(s),T.nullable=!0}else T.anyOf=f.map(s);return y&&(T.oneOf=y.map(s)),void 0!==z&&(T.minLength=z),T}function l(t){return null!=t&&"object"==typeof t&&"object"===t.type&&(null==t.properties||0===Object.keys(t.properties).length)}function u(n){var s,l;const u=[],c=[];let p=!0;for(const{role:h,content:f}of n)switch(h){case"system":if(!p)throw new o.UnsupportedFunctionalityError({functionality:"system messages are only supported at the beginning of the conversation"});u.push({text:f});break;case"user":{p=!1;const n=[];for(const o of f)switch(o.type){case"text":n.push({text:o.text});break;case"image":n.push(o.image instanceof URL?{fileData:{mimeType:null!=(s=o.mimeType)?s:"image/jpeg",fileUri:o.image.toString()}}:{inlineData:{mimeType:null!=(l=o.mimeType)?l:"image/jpeg",data:(0,t.convertUint8ArrayToBase64)(o.image)}});break;case"file":n.push(o.data instanceof URL?{fileData:{mimeType:o.mimeType,fileUri:o.data.toString()}}:{inlineData:{mimeType:o.mimeType,data:o.data}})}c.push({role:"user",parts:n});break}case"assistant":p=!1,c.push({role:"model",parts:f.map(t=>{switch(t.type){case"text":return 0===t.text.length?void 0:{text:t.text};case"file":if("image/png"!==t.mimeType)throw new o.UnsupportedFunctionalityError({functionality:"Only PNG images are supported in assistant messages"});if(t.data instanceof URL)throw new o.UnsupportedFunctionalityError({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:t.mimeType,data:t.data}};case"tool-call":return{functionCall:{name:t.toolName,args:t.args}}}}).filter(t=>void 0!==t)});break;case"tool":p=!1,c.push({role:"user",parts:f.map(t=>({functionResponse:{name:t.toolName,response:{name:t.toolName,content:t.result}}}))})}return{systemInstruction:u.length>0?{parts:u}:void 0,contents:c}}function c(t){return t.includes("/")?t:`models/${t}`}var p=n.z.object({error:n.z.object({code:n.z.number().nullable(),message:n.z.string(),status:n.z.string()})}),h=(0,t.createJsonErrorResponseHandler)({errorSchema:p,errorToMessage:t=>t.error.message});function f(t,n,l,u){var c,p;const h=(null==(c=t.tools)?void 0:c.length)?t.tools:void 0,f=[],y=u.includes("gemini-2"),b=u.includes("gemini-1.5-flash")&&!u.includes("-8b");if(n)return{tools:y?{googleSearch:{}}:{googleSearchRetrieval:b&&l?{dynamicRetrievalConfig:l}:{}},toolConfig:void 0,toolWarnings:f};if(null==h)return{tools:void 0,toolConfig:void 0,toolWarnings:f};const v=[];for(const t of h)"provider-defined"===t.type?f.push({type:"unsupported-tool",tool:t}):v.push({name:t.name,description:null!=(p=t.description)?p:"",parameters:s(t.parameters)});const z=t.toolChoice;if(null==z)return{tools:{functionDeclarations:v},toolConfig:void 0,toolWarnings:f};const C=z.type;switch(C){case"auto":return{tools:{functionDeclarations:v},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:f};case"none":return{tools:{functionDeclarations:v},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:f};case"required":return{tools:{functionDeclarations:v},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:f};case"tool":return{tools:{functionDeclarations:v},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[z.toolName]}},toolWarnings:f};default:{const t=C;throw new o.UnsupportedFunctionalityError({functionality:`Unsupported tool choice type: ${t}`})}}}function y({finishReason:t,hasToolCalls:n}){switch(t){case"STOP":return n?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var b=class{constructor(t,n,o){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=t,this.settings=n,this.config=o}get supportsStructuredOutputs(){var t;return null==(t=this.settings.structuredOutputs)||t}get provider(){return this.config.provider}async getArgs({mode:n,prompt:o,maxTokens:l,temperature:c,topP:p,topK:h,frequencyPenalty:y,presencePenalty:b,stopSequences:v,responseFormat:z,seed:C,providerMetadata:T}){var w,I;const j=n.type,S=[],R=(0,t.parseProviderOptions)({provider:"google",providerOptions:T,schema:k}),N={maxOutputTokens:l,temperature:c,topK:h,topP:p,frequencyPenalty:y,presencePenalty:b,stopSequences:v,seed:C,responseMimeType:"json"===(null==z?void 0:z.type)?"application/json":void 0,responseSchema:"json"===(null==z?void 0:z.type)&&null!=z.schema&&this.supportsStructuredOutputs?s(z.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:null==R?void 0:R.responseModalities,thinkingConfig:null==R?void 0:R.thinkingConfig},{contents:E,systemInstruction:O}=u(o);switch(j){case"regular":{const{tools:t,toolConfig:o,toolWarnings:s}=f(n,null!=(w=this.settings.useSearchGrounding)&&w,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:N,contents:E,systemInstruction:O,safetySettings:this.settings.safetySettings,tools:t,toolConfig:o,cachedContent:this.settings.cachedContent},warnings:[...S,...s]}}case"object-json":return{args:{generationConfig:{...N,responseMimeType:"application/json",responseSchema:null!=n.schema&&this.supportsStructuredOutputs?s(n.schema):void 0},contents:E,systemInstruction:O,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:S};case"object-tool":return{args:{generationConfig:N,contents:E,tools:{functionDeclarations:[{name:n.tool.name,description:null!=(I=n.tool.description)?I:"",parameters:s(n.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:S};default:throw new Error(`Unsupported type: ${j}`)}}supportsUrl(t){return this.config.isSupportedUrl(t)}async doGenerate(n){var o,s,l,u,p;const{args:f,warnings:b}=await this.getArgs(n),w=JSON.stringify(f),I=(0,t.combineHeaders)(await(0,t.resolve)(this.config.headers),n.headers),{responseHeaders:j,value:S,rawValue:N}=await(0,t.postJsonToApi)({url:`${this.config.baseURL}/${c(this.modelId)}:generateContent`,headers:I,body:f,failedResponseHandler:h,successfulResponseHandler:(0,t.createJsonResponseHandler)(R),abortSignal:n.abortSignal,fetch:this.config.fetch}),{contents:k,...E}=f,O=S.candidates[0],M=null!=O.content&&"object"==typeof O.content&&"parts"in O.content?O.content.parts:[],A=v({parts:M,generateId:this.config.generateId}),x=S.usageMetadata;return{text:z(M),files:null==(o=C(M))?void 0:o.map(t=>({data:t.inlineData.data,mimeType:t.inlineData.mimeType})),toolCalls:A,finishReason:y({finishReason:O.finishReason,hasToolCalls:null!=A&&A.length>0}),usage:{promptTokens:null!=(s=null==x?void 0:x.promptTokenCount)?s:NaN,completionTokens:null!=(l=null==x?void 0:x.candidatesTokenCount)?l:NaN},rawCall:{rawPrompt:k,rawSettings:E},rawResponse:{headers:j,body:N},warnings:b,providerMetadata:{google:{groundingMetadata:null!=(u=O.groundingMetadata)?u:null,safetyRatings:null!=(p=O.safetyRatings)?p:null}},sources:T({groundingMetadata:O.groundingMetadata,generateId:this.config.generateId}),request:{body:w}}}async doStream(n){const{args:o,warnings:s}=await this.getArgs(n),l=JSON.stringify(o),u=(0,t.combineHeaders)(await(0,t.resolve)(this.config.headers),n.headers),{responseHeaders:p,value:f}=await(0,t.postJsonToApi)({url:`${this.config.baseURL}/${c(this.modelId)}:streamGenerateContent?alt=sse`,headers:u,body:o,failedResponseHandler:h,successfulResponseHandler:(0,t.createEventSourceResponseHandler)(N),abortSignal:n.abortSignal,fetch:this.config.fetch}),{contents:b,...w}=o;let I,j="unknown",S={promptTokens:Number.NaN,completionTokens:Number.NaN};const R=this.config.generateId;let k=!1;return{stream:f.pipeThrough(new TransformStream({transform(t,n){var o,s,l,u,c,p;if(!t.success)return void n.enqueue({type:"error",error:t.error});const h=t.value,f=h.usageMetadata;null!=f&&(S={promptTokens:null!=(o=f.promptTokenCount)?o:NaN,completionTokens:null!=(s=f.candidatesTokenCount)?s:NaN});const b=null==(l=h.candidates)?void 0:l[0];if(null==b)return;const w=b.content;if(null!=w){const t=z(w.parts);null!=t&&n.enqueue({type:"text-delta",textDelta:t});const o=C(w.parts);if(null!=o)for(const t of o)n.enqueue({type:"file",mimeType:t.inlineData.mimeType,data:t.inlineData.data});const s=v({parts:w.parts,generateId:R});if(null!=s)for(const t of s)n.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:t.toolCallId,toolName:t.toolName,argsTextDelta:t.args}),n.enqueue({type:"tool-call",toolCallType:"function",toolCallId:t.toolCallId,toolName:t.toolName,args:t.args}),k=!0}if(null!=b.finishReason){j=y({finishReason:b.finishReason,hasToolCalls:k});const t=null!=(u=T({groundingMetadata:b.groundingMetadata,generateId:R}))?u:[];for(const o of t)n.enqueue({type:"source",source:o});I={google:{groundingMetadata:null!=(c=b.groundingMetadata)?c:null,safetyRatings:null!=(p=b.safetyRatings)?p:null}}}},flush(t){t.enqueue({type:"finish",finishReason:j,usage:S,providerMetadata:I})}})),rawCall:{rawPrompt:b,rawSettings:w},rawResponse:{headers:p},warnings:s,request:{body:l}}}};function v({parts:t,generateId:n}){const o=null==t?void 0:t.filter(t=>"functionCall"in t);return null==o||0===o.length?void 0:o.map(t=>({toolCallType:"function",toolCallId:n(),toolName:t.functionCall.name,args:JSON.stringify(t.functionCall.args)}))}function z(t){const n=null==t?void 0:t.filter(t=>"text"in t);return null==n||0===n.length?void 0:n.map(t=>t.text).join("")}function C(t){return null==t?void 0:t.filter(t=>"inlineData"in t)}function T({groundingMetadata:t,generateId:n}){var o;return null==(o=null==t?void 0:t.groundingChunks)?void 0:o.filter(t=>null!=t.web).map(t=>({sourceType:"url",id:n(),url:t.web.uri,title:t.web.title}))}var w=n.z.object({role:n.z.string(),parts:n.z.array(n.z.union([n.z.object({text:n.z.string()}),n.z.object({functionCall:n.z.object({name:n.z.string(),args:n.z.unknown()})}),n.z.object({inlineData:n.z.object({mimeType:n.z.string(),data:n.z.string()})})])).nullish()}),I=n.z.object({web:n.z.object({uri:n.z.string(),title:n.z.string()}).nullish(),retrievedContext:n.z.object({uri:n.z.string(),title:n.z.string()}).nullish()}),j=n.z.object({webSearchQueries:n.z.array(n.z.string()).nullish(),retrievalQueries:n.z.array(n.z.string()).nullish(),searchEntryPoint:n.z.object({renderedContent:n.z.string()}).nullish(),groundingChunks:n.z.array(I).nullish(),groundingSupports:n.z.array(n.z.object({segment:n.z.object({startIndex:n.z.number().nullish(),endIndex:n.z.number().nullish(),text:n.z.string().nullish()}),segment_text:n.z.string().nullish(),groundingChunkIndices:n.z.array(n.z.number()).nullish(),supportChunkIndices:n.z.array(n.z.number()).nullish(),confidenceScores:n.z.array(n.z.number()).nullish(),confidenceScore:n.z.array(n.z.number()).nullish()})).nullish(),retrievalMetadata:n.z.union([n.z.object({webDynamicRetrievalScore:n.z.number()}),n.z.object({})]).nullish()}),S=n.z.object({category:n.z.string(),probability:n.z.string(),probabilityScore:n.z.number().nullish(),severity:n.z.string().nullish(),severityScore:n.z.number().nullish(),blocked:n.z.boolean().nullish()}),R=n.z.object({candidates:n.z.array(n.z.object({content:w.nullish().or(n.z.object({}).strict()),finishReason:n.z.string().nullish(),safetyRatings:n.z.array(S).nullish(),groundingMetadata:j.nullish()})),usageMetadata:n.z.object({promptTokenCount:n.z.number().nullish(),candidatesTokenCount:n.z.number().nullish(),totalTokenCount:n.z.number().nullish()}).nullish()}),N=n.z.object({candidates:n.z.array(n.z.object({content:w.nullish(),finishReason:n.z.string().nullish(),safetyRatings:n.z.array(S).nullish(),groundingMetadata:j.nullish()})).nullish(),usageMetadata:n.z.object({promptTokenCount:n.z.number().nullish(),candidatesTokenCount:n.z.number().nullish(),totalTokenCount:n.z.number().nullish()}).nullish()}),k=n.z.object({responseModalities:n.z.array(n.z.enum(["TEXT","IMAGE"])).nullish(),thinkingConfig:n.z.object({thinkingBudget:n.z.number().nullish()}).nullish()}),E=class{constructor(t,n,o){this.specificationVersion="v1",this.modelId=t,this.settings=n,this.config=o}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:n,headers:s,abortSignal:l}){if(n.length>this.maxEmbeddingsPerCall)throw new o.TooManyEmbeddingValuesForCallError({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:n});const u=(0,t.combineHeaders)(await(0,t.resolve)(this.config.headers),s),{responseHeaders:c,value:p}=await(0,t.postJsonToApi)({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:u,body:{requests:n.map(t=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:t}]},outputDimensionality:this.settings.outputDimensionality,taskType:this.settings.taskType}))},failedResponseHandler:h,successfulResponseHandler:(0,t.createJsonResponseHandler)(O),abortSignal:l,fetch:this.config.fetch});return{embeddings:p.embeddings.map(t=>t.values),usage:void 0,rawResponse:{headers:c}}}},O=n.z.object({embeddings:n.z.array(n.z.object({values:n.z.array(n.z.number())}))});function M(t){return t.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function A(n={}){var o;const s=null!=(o=(0,t.withoutTrailingSlash)(n.baseURL))?o:"https://generativelanguage.googleapis.com/v1beta",l=()=>({"x-goog-api-key":(0,t.loadApiKey)({apiKey:n.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...n.headers}),u=(o,u={})=>{var c;return new b(o,u,{provider:"google.generative-ai",baseURL:s,headers:l,generateId:null!=(c=n.generateId)?c:t.generateId,isSupportedUrl:M,fetch:n.fetch})},c=(t,o={})=>new E(t,o,{provider:"google.generative-ai",baseURL:s,headers:l,fetch:n.fetch}),p=function(t,n){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return u(t,n)};return p.languageModel=u,p.chat=u,p.generativeAI=u,p.embedding=c,p.textEmbedding=c,p.textEmbeddingModel=c,p}var x=A()},5341,[3045,3017,3046]);
__d(function(e,t,r,a,s,n,o){"use strict";Object.defineProperty(n,'__esModule',{value:!0}),Object.defineProperty(n,"AISDKError",{enumerable:!0,get:function(){return u.AISDKError}}),Object.defineProperty(n,"APICallError",{enumerable:!0,get:function(){return u.APICallError}}),Object.defineProperty(n,"AssistantResponse",{enumerable:!0,get:function(){return Ga}}),Object.defineProperty(n,"DownloadError",{enumerable:!0,get:function(){return he}}),Object.defineProperty(n,"EmptyResponseBodyError",{enumerable:!0,get:function(){return u.EmptyResponseBodyError}}),Object.defineProperty(n,"InvalidArgumentError",{enumerable:!0,get:function(){return I}}),Object.defineProperty(n,"InvalidDataContentError",{enumerable:!0,get:function(){return xe}}),Object.defineProperty(n,"InvalidMessageRoleError",{enumerable:!0,get:function(){return Me}}),Object.defineProperty(n,"InvalidPromptError",{enumerable:!0,get:function(){return u.InvalidPromptError}}),Object.defineProperty(n,"InvalidResponseDataError",{enumerable:!0,get:function(){return u.InvalidResponseDataError}}),Object.defineProperty(n,"InvalidStreamPartError",{enumerable:!0,get:function(){return Sr}}),Object.defineProperty(n,"InvalidToolArgumentsError",{enumerable:!0,get:function(){return Ht}}),Object.defineProperty(n,"JSONParseError",{enumerable:!0,get:function(){return u.JSONParseError}}),Object.defineProperty(n,"LangChainAdapter",{enumerable:!0,get:function(){return Va}}),Object.defineProperty(n,"LlamaIndexAdapter",{enumerable:!0,get:function(){return Xa}}),Object.defineProperty(n,"LoadAPIKeyError",{enumerable:!0,get:function(){return u.LoadAPIKeyError}}),Object.defineProperty(n,"MCPClientError",{enumerable:!0,get:function(){return Er}}),Object.defineProperty(n,"MessageConversionError",{enumerable:!0,get:function(){return Je}}),Object.defineProperty(n,"NoContentGeneratedError",{enumerable:!0,get:function(){return u.NoContentGeneratedError}}),Object.defineProperty(n,"NoImageGeneratedError",{enumerable:!0,get:function(){return Z}}),Object.defineProperty(n,"NoObjectGeneratedError",{enumerable:!0,get:function(){return pe}}),Object.defineProperty(n,"NoOutputSpecifiedError",{enumerable:!0,get:function(){return qt}}),Object.defineProperty(n,"NoSuchModelError",{enumerable:!0,get:function(){return u.NoSuchModelError}}),Object.defineProperty(n,"NoSuchProviderError",{enumerable:!0,get:function(){return ua}}),Object.defineProperty(n,"NoSuchToolError",{enumerable:!0,get:function(){return er}}),Object.defineProperty(n,"Output",{enumerable:!0,get:function(){return yr}}),Object.defineProperty(n,"RetryError",{enumerable:!0,get:function(){return R}}),Object.defineProperty(n,"StreamData",{enumerable:!0,get:function(){return ss}}),Object.defineProperty(n,"ToolCallRepairError",{enumerable:!0,get:function(){return nr}}),Object.defineProperty(n,"ToolExecutionError",{enumerable:!0,get:function(){return $t}}),Object.defineProperty(n,"TypeValidationError",{enumerable:!0,get:function(){return u.TypeValidationError}}),Object.defineProperty(n,"UnsupportedFunctionalityError",{enumerable:!0,get:function(){return u.UnsupportedFunctionalityError}}),Object.defineProperty(n,"appendClientMessage",{enumerable:!0,get:function(){return ta}}),Object.defineProperty(n,"appendResponseMessages",{enumerable:!0,get:function(){return ra}}),Object.defineProperty(n,"convertToCoreMessages",{enumerable:!0,get:function(){return Ke}}),Object.defineProperty(n,"coreAssistantMessageSchema",{enumerable:!0,get:function(){return st}}),Object.defineProperty(n,"coreMessageSchema",{enumerable:!0,get:function(){return ot}}),Object.defineProperty(n,"coreSystemMessageSchema",{enumerable:!0,get:function(){return rt}}),Object.defineProperty(n,"coreToolMessageSchema",{enumerable:!0,get:function(){return nt}}),Object.defineProperty(n,"coreUserMessageSchema",{enumerable:!0,get:function(){return at}}),Object.defineProperty(n,"cosineSimilarity",{enumerable:!0,get:function(){return Ja}}),Object.defineProperty(n,"createDataStream",{enumerable:!0,get:function(){return g}}),Object.defineProperty(n,"createDataStreamResponse",{enumerable:!0,get:function(){return f}}),Object.defineProperty(n,"createIdGenerator",{enumerable:!0,get:function(){return i.createIdGenerator}}),Object.defineProperty(n,"createProviderRegistry",{enumerable:!0,get:function(){return pa}}),Object.defineProperty(n,"customProvider",{enumerable:!0,get:function(){return aa}}),Object.defineProperty(n,"defaultSettingsMiddleware",{enumerable:!0,get:function(){return Wr}}),Object.defineProperty(n,"embed",{enumerable:!0,get:function(){return F}}),Object.defineProperty(n,"embedMany",{enumerable:!0,get:function(){return G}}),Object.defineProperty(n,"experimental_createMCPClient",{enumerable:!0,get:function(){return $a}}),Object.defineProperty(n,"experimental_createProviderRegistry",{enumerable:!0,get:function(){return ma}}),Object.defineProperty(n,"experimental_customProvider",{enumerable:!0,get:function(){return na}}),Object.defineProperty(n,"experimental_generateImage",{enumerable:!0,get:function(){return se}}),Object.defineProperty(n,"experimental_generateSpeech",{enumerable:!0,get:function(){return Jr}}),Object.defineProperty(n,"experimental_transcribe",{enumerable:!0,get:function(){return Vr}}),Object.defineProperty(n,"experimental_wrapLanguageModel",{enumerable:!0,get:function(){return ea}}),Object.defineProperty(n,"extractReasoningMiddleware",{enumerable:!0,get:function(){return Zr}}),Object.defineProperty(n,"formatAssistantStreamPart",{enumerable:!0,get:function(){return l.formatAssistantStreamPart}}),Object.defineProperty(n,"formatDataStreamPart",{enumerable:!0,get:function(){return l.formatDataStreamPart}}),Object.defineProperty(n,"generateId",{enumerable:!0,get:function(){return i.generateId}}),Object.defineProperty(n,"generateObject",{enumerable:!0,get:function(){return St}}),Object.defineProperty(n,"generateText",{enumerable:!0,get:function(){return cr}}),Object.defineProperty(n,"jsonSchema",{enumerable:!0,get:function(){return l.jsonSchema}}),Object.defineProperty(n,"parseAssistantStreamPart",{enumerable:!0,get:function(){return l.parseAssistantStreamPart}}),Object.defineProperty(n,"parseDataStreamPart",{enumerable:!0,get:function(){return l.parseDataStreamPart}}),Object.defineProperty(n,"pipeDataStreamToResponse",{enumerable:!0,get:function(){return b}}),Object.defineProperty(n,"processDataStream",{enumerable:!0,get:function(){return l.processDataStream}}),Object.defineProperty(n,"processTextStream",{enumerable:!0,get:function(){return l.processTextStream}}),Object.defineProperty(n,"simulateReadableStream",{enumerable:!0,get:function(){return Ka}}),Object.defineProperty(n,"simulateStreamingMiddleware",{enumerable:!0,get:function(){return Qr}}),Object.defineProperty(n,"smoothStream",{enumerable:!0,get:function(){return Mr}}),Object.defineProperty(n,"streamObject",{enumerable:!0,get:function(){return Rt}}),Object.defineProperty(n,"streamText",{enumerable:!0,get:function(){return zr}}),Object.defineProperty(n,"tool",{enumerable:!0,get:function(){return da}}),Object.defineProperty(n,"wrapLanguageModel",{enumerable:!0,get:function(){return Xr}}),Object.defineProperty(n,"zodSchema",{enumerable:!0,get:function(){return l.zodSchema}});var i=t(o[0]),l=t(o[1]),u=t(o[2]),p=t(o[3]),m=t(o[4]),c=Object.defineProperty,d=(e,t)=>{for(var r in t)c(e,r,{get:t[r],enumerable:!0})};function g({execute:e,onError:t=()=>"An error occurred."}){let r;const a=[],s=new ReadableStream({start(e){r=e}});function n(e){try{r.enqueue(e)}catch(e){}}try{const r=e({write(e){n(e)},writeData(e){n((0,l.formatDataStreamPart)("data",[e]))},writeMessageAnnotation(e){n((0,l.formatDataStreamPart)("message_annotations",[e]))},writeSource(e){n((0,l.formatDataStreamPart)("source",e))},merge(e){a.push((async()=>{const t=e.getReader();for(;;){const{done:e,value:r}=await t.read();if(e)break;n(r)}})().catch(e=>{n((0,l.formatDataStreamPart)("error",t(e)))}))},onError:t});r&&a.push(r.catch(e=>{n((0,l.formatDataStreamPart)("error",t(e)))}))}catch(e){n((0,l.formatDataStreamPart)("error",t(e)))}return new Promise(async e=>{for(;a.length>0;)await a.shift();e()}).finally(()=>{try{r.close()}catch(e){}}),s}function h(e,{contentType:t,dataStreamVersion:r}){const a=new Headers(null!=e?e:{});return a.has("Content-Type")||a.set("Content-Type",t),void 0!==r&&a.set("X-Vercel-AI-Data-Stream",r),a}function f({status:e,statusText:t,headers:r,execute:a,onError:s}){return new Response(g({execute:a,onError:s}).pipeThrough(new TextEncoderStream),{status:e,statusText:t,headers:h(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function y(e,{contentType:t,dataStreamVersion:r}){const a={};if(null!=e)for(const[t,r]of Object.entries(e))a[t]=r;return null==a["Content-Type"]&&(a["Content-Type"]=t),void 0!==r&&(a["X-Vercel-AI-Data-Stream"]=r),a}function v({response:e,status:t,statusText:r,headers:a,stream:s}){e.writeHead(null!=t?t:200,r,a);const n=s.getReader();(async()=>{try{for(;;){const{done:t,value:r}=await n.read();if(t)break;e.write(r)}}catch(e){throw e}finally{e.end()}})()}function b(e,{status:t,statusText:r,headers:a,execute:s,onError:n}){v({response:e,status:t,statusText:r,headers:y(a,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:g({execute:s,onError:n}).pipeThrough(new TextEncoderStream)})}var w,x="AI_InvalidArgumentError",S=`vercel.ai.error.${x}`,T=Symbol.for(S),I=class extends u.AISDKError{constructor({parameter:e,value:t,message:r}){super({name:x,message:`Invalid argument for parameter ${e}: ${r}`}),this[w]=!0,this.parameter=e,this.value=t}static isInstance(e){return u.AISDKError.hasMarker(e,S)}};w=T;var P,E="AI_RetryError",k=`vercel.ai.error.${E}`,j=Symbol.for(k),R=class extends u.AISDKError{constructor({message:e,reason:t,errors:r}){super({name:E,message:e}),this[P]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return u.AISDKError.hasMarker(e,k)}};P=j;var M=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2}={})=>async a=>_(a,{maxRetries:e,delayInMs:t,backoffFactor:r});async function _(e,{maxRetries:t,delayInMs:r,backoffFactor:a},s=[]){try{return await e()}catch(n){if((0,i.isAbortError)(n))throw n;if(0===t)throw n;const o=(0,i.getErrorMessage)(n),l=[...s,n],p=l.length;if(p>t)throw new R({message:`Failed after ${p} attempts. Last error: ${o}`,reason:"maxRetriesExceeded",errors:l});if(n instanceof Error&&u.APICallError.isInstance(n)&&!0===n.isRetryable&&p<=t)return await(0,i.delay)(r),_(e,{maxRetries:t,delayInMs:a*r,backoffFactor:a},l);if(1===p)throw n;throw new R({message:`Failed after ${p} attempts with non-retryable error: '${o}'`,reason:"errorNotRetryable",errors:l})}}function C({maxRetries:e}){if(null!=e){if(!Number.isInteger(e))throw new I({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new I({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=null!=e?e:2;return{maxRetries:t,retry:M({maxRetries:t})}}function O({operationId:e,telemetry:t}){return{"operation.name":`${e}${null!=(null==t?void 0:t.functionId)?` ${t.functionId}`:""}`,"resource.name":null==t?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":null==t?void 0:t.functionId}}function D({model:e,settings:t,telemetry:r,headers:a}){var s;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,r])=>(e[`ai.settings.${t}`]=r,e),{}),...Object.entries(null!=(s=null==r?void 0:r.metadata)?s:{}).reduce((e,[t,r])=>(e[`ai.telemetry.metadata.${t}`]=r,e),{}),...Object.entries(null!=a?a:{}).reduce((e,[t,r])=>(void 0!==r&&(e[`ai.request.headers.${t}`]=r),e),{})}}var q={startSpan:()=>N,startActiveSpan:(e,t,r,a)=>"function"==typeof t?t(N):"function"==typeof r?r(N):"function"==typeof a?a(N):void 0},N={spanContext:()=>z,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},z={traceId:"",spanId:"",traceFlags:0};function A({isEnabled:e=!1,tracer:t}={}){return e?t||p.trace.getTracer("ai"):q}function U({name:e,tracer:t,attributes:r,fn:a,endWhenDone:s=!0}){return t.startActiveSpan(e,{attributes:r},async e=>{try{const t=await a(e);return s&&e.end(),t}catch(t){try{t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:p.SpanStatusCode.ERROR,message:t.message})):e.setStatus({code:p.SpanStatusCode.ERROR})}finally{e.end()}throw t}})}function $({telemetry:e,attributes:t}){return!0!==(null==e?void 0:e.isEnabled)?{}:Object.entries(t).reduce((t,[r,a])=>{if(void 0===a)return t;if("object"==typeof a&&"input"in a&&"function"==typeof a.input){if(!1===(null==e?void 0:e.recordInputs))return t;const s=a.input();return void 0===s?t:{...t,[r]:s}}if("object"==typeof a&&"output"in a&&"function"==typeof a.output){if(!1===(null==e?void 0:e.recordOutputs))return t;const s=a.output();return void 0===s?t:{...t,[r]:s}}return{...t,[r]:a}},{})}async function F({model:e,value:t,maxRetries:r,abortSignal:a,headers:s,experimental_telemetry:n}){const{maxRetries:o,retry:i}=C({maxRetries:r}),l=D({model:e,telemetry:n,headers:s,settings:{maxRetries:o}}),u=A(n);return U({name:"ai.embed",attributes:$({telemetry:n,attributes:{...O({operationId:"ai.embed",telemetry:n}),...l,"ai.value":{input:()=>JSON.stringify(t)}}}),tracer:u,fn:async r=>{const{embedding:o,usage:p,rawResponse:m}=await i(()=>U({name:"ai.embed.doEmbed",attributes:$({telemetry:n,attributes:{...O({operationId:"ai.embed.doEmbed",telemetry:n}),...l,"ai.values":{input:()=>[JSON.stringify(t)]}}}),tracer:u,fn:async r=>{var o;const i=await e.doEmbed({values:[t],abortSignal:a,headers:s}),l=i.embeddings[0],u=null!=(o=i.usage)?o:{tokens:NaN};return r.setAttributes($({telemetry:n,attributes:{"ai.embeddings":{output:()=>i.embeddings.map(e=>JSON.stringify(e))},"ai.usage.tokens":u.tokens}})),{embedding:l,usage:u,rawResponse:i.rawResponse}}}));return r.setAttributes($({telemetry:n,attributes:{"ai.embedding":{output:()=>JSON.stringify(o)},"ai.usage.tokens":p.tokens}})),new J({value:t,embedding:o,usage:p,rawResponse:m})}})}var J=class{constructor(e){this.value=e.value,this.embedding=e.embedding,this.usage=e.usage,this.rawResponse=e.rawResponse}};function K(e,t){if(t<=0)throw new Error("chunkSize must be greater than 0");const r=[];for(let a=0;a<e.length;a+=t)r.push(e.slice(a,a+t));return r}async function G({model:e,values:t,maxRetries:r,abortSignal:a,headers:s,experimental_telemetry:n}){const{maxRetries:o,retry:i}=C({maxRetries:r}),l=D({model:e,telemetry:n,headers:s,settings:{maxRetries:o}}),u=A(n);return U({name:"ai.embedMany",attributes:$({telemetry:n,attributes:{...O({operationId:"ai.embedMany",telemetry:n}),...l,"ai.values":{input:()=>t.map(e=>JSON.stringify(e))}}}),tracer:u,fn:async r=>{const o=e.maxEmbeddingsPerCall;if(null==o){const{embeddings:o,usage:p}=await i(()=>U({name:"ai.embedMany.doEmbed",attributes:$({telemetry:n,attributes:{...O({operationId:"ai.embedMany.doEmbed",telemetry:n}),...l,"ai.values":{input:()=>t.map(e=>JSON.stringify(e))}}}),tracer:u,fn:async r=>{var o;const i=await e.doEmbed({values:t,abortSignal:a,headers:s}),l=i.embeddings,u=null!=(o=i.usage)?o:{tokens:NaN};return r.setAttributes($({telemetry:n,attributes:{"ai.embeddings":{output:()=>l.map(e=>JSON.stringify(e))},"ai.usage.tokens":u.tokens}})),{embeddings:l,usage:u}}}));return r.setAttributes($({telemetry:n,attributes:{"ai.embeddings":{output:()=>o.map(e=>JSON.stringify(e))},"ai.usage.tokens":p.tokens}})),new L({values:t,embeddings:o,usage:p})}const p=K(t,o),m=[];let c=0;for(const t of p){const{embeddings:r,usage:o}=await i(()=>U({name:"ai.embedMany.doEmbed",attributes:$({telemetry:n,attributes:{...O({operationId:"ai.embedMany.doEmbed",telemetry:n}),...l,"ai.values":{input:()=>t.map(e=>JSON.stringify(e))}}}),tracer:u,fn:async r=>{var o;const i=await e.doEmbed({values:t,abortSignal:a,headers:s}),l=i.embeddings,u=null!=(o=i.usage)?o:{tokens:NaN};return r.setAttributes($({telemetry:n,attributes:{"ai.embeddings":{output:()=>l.map(e=>JSON.stringify(e))},"ai.usage.tokens":u.tokens}})),{embeddings:l,usage:u}}}));m.push(...r),c+=o.tokens}return r.setAttributes($({telemetry:n,attributes:{"ai.embeddings":{output:()=>m.map(e=>JSON.stringify(e))},"ai.usage.tokens":c}})),new L({values:t,embeddings:m,usage:{tokens:c}})}})}var V,L=class{constructor(e){this.values=e.values,this.embeddings=e.embeddings,this.usage=e.usage}},B="AI_NoImageGeneratedError",W=`vercel.ai.error.${B}`,H=Symbol.for(W),Z=class extends u.AISDKError{constructor({message:e="No image generated.",cause:t,responses:r}){super({name:B,message:e,cause:t}),this[V]=!0,this.responses=r}static isInstance(e){return u.AISDKError.hasMarker(e,W)}};V=H;var Q=class{constructor({data:e,mimeType:t}){const r=e instanceof Uint8Array;this.base64Data=r?void 0:e,this.uint8ArrayData=r?e:void 0,this.mimeType=t}get base64(){return null==this.base64Data&&(this.base64Data=(0,i.convertUint8ArrayToBase64)(this.uint8ArrayData)),this.base64Data}get uint8Array(){return null==this.uint8ArrayData&&(this.uint8ArrayData=(0,i.convertBase64ToUint8Array)(this.base64Data)),this.uint8ArrayData}},X=class extends Q{constructor(e){super(e),this.type="file"}},Y=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}],ee=[{mimeType:"audio/mpeg",bytesPrefix:[255,251],base64Prefix:"//s="},{mimeType:"audio/wav",bytesPrefix:[82,73,70,70],base64Prefix:"UklGR"},{mimeType:"audio/ogg",bytesPrefix:[79,103,103,83],base64Prefix:"T2dnUw"},{mimeType:"audio/flac",bytesPrefix:[102,76,97,67],base64Prefix:"ZkxhQw"},{mimeType:"audio/aac",bytesPrefix:[64,21,0,0],base64Prefix:"QBUA"},{mimeType:"audio/mp4",bytesPrefix:[102,116,121,112],base64Prefix:"ZnR5cA"}],te=e=>{const t="string"==typeof e?(0,i.convertBase64ToUint8Array)(e):e,r=(127&t[6])<<21|(127&t[7])<<14|(127&t[8])<<7|127&t[9];return t.slice(r+10)};function re(e){return"string"==typeof e&&e.startsWith("SUQz")||"string"!=typeof e&&e.length>10&&73===e[0]&&68===e[1]&&51===e[2]?te(e):e}function ae({data:e,signatures:t}){const r=re(e);for(const e of t)if("string"==typeof r?r.startsWith(e.base64Prefix):r.length>=e.bytesPrefix.length&&e.bytesPrefix.every((e,t)=>r[t]===e))return e.mimeType}async function se({model:e,prompt:t,n:r=1,size:a,aspectRatio:s,seed:n,providerOptions:o,maxRetries:i,abortSignal:l,headers:u}){var p;const{retry:m}=C({maxRetries:i}),c=null!=(p=e.maxImagesPerCall)?p:1,d=Math.ceil(r/c),g=Array.from({length:d},(e,t)=>{if(t<d-1)return c;const a=r%c;return 0===a?c:a}),h=await Promise.all(g.map(async r=>m(()=>e.doGenerate({prompt:t,n:r,abortSignal:l,headers:u,size:a,aspectRatio:s,seed:n,providerOptions:null!=o?o:{}})))),f=[],y=[],v=[];for(const e of h)f.push(...e.images.map(e=>{var t;return new Q({data:e,mimeType:null!=(t=ae({data:e,signatures:Y}))?t:"image/png"})})),y.push(...e.warnings),v.push(e.response);if(!f.length)throw new Z({responses:v});return new oe({images:f,warnings:y,responses:v})}var ne,oe=class{constructor(e){this.images=e.images,this.warnings=e.warnings,this.responses=e.responses}get image(){return this.images[0]}},ie="AI_NoObjectGeneratedError",le=`vercel.ai.error.${ie}`,ue=Symbol.for(le),pe=class extends u.AISDKError{constructor({message:e="No object generated.",cause:t,text:r,response:a,usage:s,finishReason:n}){super({name:ie,message:e,cause:t}),this[ne]=!0,this.text=r,this.response=a,this.usage=s,this.finishReason=n}static isInstance(e){return u.AISDKError.hasMarker(e,le)}};ne=ue;var me,ce="AI_DownloadError",de=`vercel.ai.error.${ce}`,ge=Symbol.for(de),he=class extends u.AISDKError{constructor({url:e,statusCode:t,statusText:r,cause:a,message:s=(null==a?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${a}`)}){super({name:ce,message:s,cause:a}),this[me]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return u.AISDKError.hasMarker(e,de)}};async function fe({url:e}){var t;const r=e.toString();try{const e=await fetch(r);if(!e.ok)throw new he({url:r,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mimeType:null!=(t=e.headers.get("content-type"))?t:void 0}}catch(e){if(he.isInstance(e))throw e;throw new he({url:r,cause:e})}}me=ge;var ye,ve="AI_InvalidDataContentError",be=`vercel.ai.error.${ve}`,we=Symbol.for(be),xe=class extends u.AISDKError{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:ve,message:r,cause:t}),this[ye]=!0,this.content=e}static isInstance(e){return u.AISDKError.hasMarker(e,be)}};ye=we;var Se=m.z.union([m.z.string(),m.z.instanceof(Uint8Array),m.z.instanceof(ArrayBuffer),m.z.custom(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]);function Te(e){return"string"==typeof e?e:e instanceof ArrayBuffer?(0,i.convertUint8ArrayToBase64)(new Uint8Array(e)):(0,i.convertUint8ArrayToBase64)(e)}function Ie(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)try{return(0,i.convertBase64ToUint8Array)(e)}catch(t){throw new xe({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new xe({content:e})}function Pe(e){try{return(new TextDecoder).decode(e)}catch(e){throw new Error("Error decoding Uint8Array to text")}}var Ee,ke="AI_InvalidMessageRoleError",je=`vercel.ai.error.${ke}`,Re=Symbol.for(je),Me=class extends u.AISDKError{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:ke,message:t}),this[Ee]=!0,this.role=e}static isInstance(e){return u.AISDKError.hasMarker(e,je)}};function _e(e){try{const[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch(e){return{mimeType:void 0,base64Content:void 0}}}async function Ce({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:a=fe}){const s=await De(e.messages,a,t,r);return[...null!=e.system?[{role:"system",content:e.system}]:[],...e.messages.map(e=>Oe(e,s))]}function Oe(e,t){var r,a,s,n,o,i;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:null!=(r=e.providerOptions)?r:e.experimental_providerMetadata};case"user":return"string"==typeof e.content?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:null!=(a=e.providerOptions)?a:e.experimental_providerMetadata}:{role:"user",content:e.content.map(e=>qe(e,t)).filter(e=>"text"!==e.type||""!==e.text),providerMetadata:null!=(s=e.providerOptions)?s:e.experimental_providerMetadata};case"assistant":return"string"==typeof e.content?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:null!=(n=e.providerOptions)?n:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(e=>"text"!==e.type||""!==e.text).map(e=>{var t;const r=null!=(t=e.providerOptions)?t:e.experimental_providerMetadata;switch(e.type){case"file":return{type:"file",data:e.data instanceof URL?e.data:Te(e.data),filename:e.filename,mimeType:e.mimeType,providerMetadata:r};case"reasoning":return{type:"reasoning",text:e.text,signature:e.signature,providerMetadata:r};case"redacted-reasoning":return{type:"redacted-reasoning",data:e.data,providerMetadata:r};case"text":return{type:"text",text:e.text,providerMetadata:r};case"tool-call":return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,args:e.args,providerMetadata:r}}}),providerMetadata:null!=(o=e.providerOptions)?o:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(e=>{var t;return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result,content:e.experimental_content,isError:e.isError,providerMetadata:null!=(t=e.providerOptions)?t:e.experimental_providerMetadata}}),providerMetadata:null!=(i=e.providerOptions)?i:e.experimental_providerMetadata};default:throw new Me({role:l})}}async function De(e,t,r,a){const s=e.filter(e=>"user"===e.role).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>"image"===e.type||"file"===e.type).filter(e=>!("image"===e.type&&!0===r)).map(e=>"image"===e.type?e.image:e.data).map(e=>"string"==typeof e&&(e.startsWith("http:")||e.startsWith("https:"))?new URL(e):e).filter(e=>e instanceof URL).filter(e=>!a(e)),n=await Promise.all(s.map(async e=>({url:e,data:await t({url:e})})));return Object.fromEntries(n.map(({url:e,data:t})=>[e.toString(),t]))}function qe(e,t){var r,a,s,n;if("text"===e.type)return{type:"text",text:e.text,providerMetadata:null!=(r=e.providerOptions)?r:e.experimental_providerMetadata};let o,i,l,u=e.mimeType;const p=e.type;switch(p){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${p}`)}try{i="string"==typeof o?new URL(o):o}catch(e){i=o}if(i instanceof URL)if("data:"===i.protocol){const{mimeType:e,base64Content:t}=_e(i.toString());if(null==e||null==t)throw new Error(`Invalid data URL format in part ${p}`);u=e,l=Ie(t)}else{const e=t[i.toString()];e?(l=e.data,null!=u||(u=e.mimeType)):l=i}else l=Ie(i);switch(p){case"image":return l instanceof Uint8Array&&(u=null!=(a=ae({data:l,signatures:Y}))?a:u),{type:"image",image:l,mimeType:u,providerMetadata:null!=(s=e.providerOptions)?s:e.experimental_providerMetadata};case"file":if(null==u)throw new Error("Mime type is missing for file part");return{type:"file",data:l instanceof Uint8Array?Te(l):l,filename:e.filename,mimeType:u,providerMetadata:null!=(n=e.providerOptions)?n:e.experimental_providerMetadata}}}function Ne({maxTokens:e,temperature:t,topP:r,topK:a,presencePenalty:s,frequencyPenalty:n,stopSequences:o,seed:i}){if(null!=e){if(!Number.isInteger(e))throw new I({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new I({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(null!=t&&"number"!=typeof t)throw new I({parameter:"temperature",value:t,message:"temperature must be a number"});if(null!=r&&"number"!=typeof r)throw new I({parameter:"topP",value:r,message:"topP must be a number"});if(null!=a&&"number"!=typeof a)throw new I({parameter:"topK",value:a,message:"topK must be a number"});if(null!=s&&"number"!=typeof s)throw new I({parameter:"presencePenalty",value:s,message:"presencePenalty must be a number"});if(null!=n&&"number"!=typeof n)throw new I({parameter:"frequencyPenalty",value:n,message:"frequencyPenalty must be a number"});if(null!=i&&!Number.isInteger(i))throw new I({parameter:"seed",value:i,message:"seed must be an integer"});return{maxTokens:e,temperature:null!=t?t:0,topP:r,topK:a,presencePenalty:s,frequencyPenalty:n,stopSequences:null!=o&&o.length>0?o:void 0,seed:i}}function ze(e){var t,r,a;const s=[];for(const n of e){let e;try{e=new URL(n.url)}catch(e){throw new Error(`Invalid URL: ${n.url}`)}switch(e.protocol){case"http:":case"https:":if(null==(t=n.contentType)?void 0:t.startsWith("image/"))s.push({type:"image",image:e});else{if(!n.contentType)throw new Error("If the attachment is not an image, it must specify a content type");s.push({type:"file",data:e,mimeType:n.contentType})}break;case"data:":{let e,t,o;try{[e,t]=n.url.split(","),o=e.split(";")[0].split(":")[1]}catch(e){throw new Error(`Error processing data URL: ${n.url}`)}if(null==o||null==t)throw new Error(`Invalid data URL format: ${n.url}`);if(null==(r=n.contentType)?void 0:r.startsWith("image/"))s.push({type:"image",image:Ie(t)});else if(null==(a=n.contentType)?void 0:a.startsWith("text/"))s.push({type:"text",text:Pe(Ie(t))});else{if(!n.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");s.push({type:"file",data:t,mimeType:n.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${e.protocol}`)}}return s}Ee=Re;var Ae,Ue="AI_MessageConversionError",$e=`vercel.ai.error.${Ue}`,Fe=Symbol.for($e),Je=class extends u.AISDKError{constructor({originalMessage:e,message:t}){super({name:Ue,message:t}),this[Ae]=!0,this.originalMessage=e}static isInstance(e){return u.AISDKError.hasMarker(e,$e)}};function Ke(e,t){var r,a;const s=null!=(r=null==t?void 0:t.tools)?r:{},n=[];for(let t=0;t<e.length;t++){const r=e[t],o=t===e.length-1,{role:i,content:l,experimental_attachments:u}=r;switch(i){case"system":n.push({role:"system",content:l});break;case"user":if(null==r.parts)n.push({role:"user",content:u?[{type:"text",text:l},...ze(u)]:l});else{const e=r.parts.filter(e=>"text"===e.type).map(e=>({type:"text",text:e.text}));n.push({role:"user",content:u?[...e,...ze(u)]:e})}break;case"assistant":{if(null!=r.parts){let e=function(){const e=[];for(const t of i)switch(t.type){case"file":case"text":e.push(t);break;case"reasoning":for(const r of t.details)switch(r.type){case"text":e.push({type:"reasoning",text:r.text,signature:r.signature});break;case"redacted":e.push({type:"redacted-reasoning",data:r.data})}break;case"tool-invocation":e.push({type:"tool-call",toolCallId:t.toolInvocation.toolCallId,toolName:t.toolInvocation.toolName,args:t.toolInvocation.args});break;default:throw new Error(`Unsupported part: ${t}`)}n.push({role:"assistant",content:e});const a=i.filter(e=>"tool-invocation"===e.type).map(e=>e.toolInvocation);a.length>0&&n.push({role:"tool",content:a.map(e=>{if(!("result"in e))throw new Je({originalMessage:r,message:"ToolInvocation must have a result: "+JSON.stringify(e)});const{toolCallId:t,toolName:a,result:n}=e,o=s[a];return null!=(null==o?void 0:o.experimental_toToolResultContent)?{type:"tool-result",toolCallId:t,toolName:a,result:o.experimental_toToolResultContent(n),experimental_content:o.experimental_toToolResultContent(n)}:{type:"tool-result",toolCallId:t,toolName:a,result:n}})}),i=[],o=!1,t++};let t=0,o=!1,i=[];for(const s of r.parts)switch(s.type){case"text":o&&e(),i.push(s);break;case"file":case"reasoning":i.push(s);break;case"tool-invocation":(null!=(a=s.toolInvocation.step)?a:0)!==t&&e(),i.push(s),o=!0}e();break}const e=r.toolInvocations;if(null==e||0===e.length){n.push({role:"assistant",content:l});break}const t=e.reduce((e,t)=>{var r;return Math.max(e,null!=(r=t.step)?r:0)},0);for(let a=0;a<=t;a++){const t=e.filter(e=>{var t;return(null!=(t=e.step)?t:0)===a});0!==t.length&&(n.push({role:"assistant",content:[...o&&l&&0===a?[{type:"text",text:l}]:[],...t.map(({toolCallId:e,toolName:t,args:r})=>({type:"tool-call",toolCallId:e,toolName:t,args:r}))]}),n.push({role:"tool",content:t.map(e=>{if(!("result"in e))throw new Je({originalMessage:r,message:"ToolInvocation must have a result: "+JSON.stringify(e)});const{toolCallId:t,toolName:a,result:n}=e,o=s[a];return null!=(null==o?void 0:o.experimental_toToolResultContent)?{type:"tool-result",toolCallId:t,toolName:a,result:o.experimental_toToolResultContent(n),experimental_content:o.experimental_toToolResultContent(n)}:{type:"tool-result",toolCallId:t,toolName:a,result:n}})}))}l&&!o&&n.push({role:"assistant",content:l});break}case"data":break;default:throw new Je({originalMessage:r,message:`Unsupported role: ${i}`})}}return n}function Ge(e){if(!Array.isArray(e))return"other";if(0===e.length)return"messages";const t=e.map(Ve);return t.some(e=>"has-ui-specific-parts"===e)?"ui-messages":t.every(e=>"has-core-specific-parts"===e||"message"===e)?"messages":"other"}function Ve(e){return"object"==typeof e&&null!==e&&("function"===e.role||"data"===e.role||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":"object"==typeof e&&null!==e&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":"object"==typeof e&&null!==e&&"role"in e&&"content"in e&&"string"==typeof e.content&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}Ae=Fe;var Le=m.z.lazy(()=>m.z.union([m.z.null(),m.z.string(),m.z.number(),m.z.boolean(),m.z.record(m.z.string(),Le),m.z.array(Le)])),Be=m.z.record(m.z.string(),m.z.record(m.z.string(),Le)),We=m.z.array(m.z.union([m.z.object({type:m.z.literal("text"),text:m.z.string()}),m.z.object({type:m.z.literal("image"),data:m.z.string(),mimeType:m.z.string().optional()})])),He=m.z.object({type:m.z.literal("text"),text:m.z.string(),providerOptions:Be.optional(),experimental_providerMetadata:Be.optional()}),Ze=m.z.object({type:m.z.literal("image"),image:m.z.union([Se,m.z.instanceof(URL)]),mimeType:m.z.string().optional(),providerOptions:Be.optional(),experimental_providerMetadata:Be.optional()}),Qe=m.z.object({type:m.z.literal("file"),data:m.z.union([Se,m.z.instanceof(URL)]),filename:m.z.string().optional(),mimeType:m.z.string(),providerOptions:Be.optional(),experimental_providerMetadata:Be.optional()}),Xe=m.z.object({type:m.z.literal("reasoning"),text:m.z.string(),providerOptions:Be.optional(),experimental_providerMetadata:Be.optional()}),Ye=m.z.object({type:m.z.literal("redacted-reasoning"),data:m.z.string(),providerOptions:Be.optional(),experimental_providerMetadata:Be.optional()}),et=m.z.object({type:m.z.literal("tool-call"),toolCallId:m.z.string(),toolName:m.z.string(),args:m.z.unknown(),providerOptions:Be.optional(),experimental_providerMetadata:Be.optional()}),tt=m.z.object({type:m.z.literal("tool-result"),toolCallId:m.z.string(),toolName:m.z.string(),result:m.z.unknown(),content:We.optional(),isError:m.z.boolean().optional(),providerOptions:Be.optional(),experimental_providerMetadata:Be.optional()}),rt=m.z.object({role:m.z.literal("system"),content:m.z.string(),providerOptions:Be.optional(),experimental_providerMetadata:Be.optional()}),at=m.z.object({role:m.z.literal("user"),content:m.z.union([m.z.string(),m.z.array(m.z.union([He,Ze,Qe]))]),providerOptions:Be.optional(),experimental_providerMetadata:Be.optional()}),st=m.z.object({role:m.z.literal("assistant"),content:m.z.union([m.z.string(),m.z.array(m.z.union([He,Qe,Xe,Ye,et]))]),providerOptions:Be.optional(),experimental_providerMetadata:Be.optional()}),nt=m.z.object({role:m.z.literal("tool"),content:m.z.array(tt),providerOptions:Be.optional(),experimental_providerMetadata:Be.optional()}),ot=m.z.union([rt,at,st,nt]);function it({prompt:e,tools:t}){if(null==e.prompt&&null==e.messages)throw new u.InvalidPromptError({prompt:e,message:"prompt or messages must be defined"});if(null!=e.prompt&&null!=e.messages)throw new u.InvalidPromptError({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(null!=e.system&&"string"!=typeof e.system)throw new u.InvalidPromptError({prompt:e,message:"system must be a string"});if(null!=e.prompt){if("string"!=typeof e.prompt)throw new u.InvalidPromptError({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(null!=e.messages){const r=Ge(e.messages);if("other"===r)throw new u.InvalidPromptError({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const a="ui-messages"===r?Ke(e.messages,{tools:t}):e.messages;if(0===a.length)throw new u.InvalidPromptError({prompt:e,message:"messages must not be empty"});const s=(0,i.safeValidateTypes)({value:a,schema:m.z.array(ot)});if(!s.success)throw new u.InvalidPromptError({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:s.error});return{type:"messages",messages:a,system:e.system}}throw new Error("unreachable")}function lt({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function ut(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var pt="JSON schema:",mt="You MUST answer with a JSON object that matches the JSON schema above.",ct="You MUST answer with JSON.";function dt({prompt:e,schema:t,schemaPrefix:r=(null!=t?pt:void 0),schemaSuffix:a=(null!=t?mt:ct)}){return[null!=e&&e.length>0?e:void 0,null!=e&&e.length>0?"":void 0,r,null!=t?JSON.stringify(t):void 0,a].filter(e=>null!=e).join("\n")}function gt(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const e=t.getReader();return{async next(){const{done:t,value:r}=await e.read();return t?{done:!0,value:void 0}:{done:!1,value:r}}}},t}var ht={type:"no-schema",jsonSchema:void 0,validatePartialResult:({value:e,textDelta:t})=>({success:!0,value:{partial:e,textDelta:t}}),validateFinalResult:(e,t)=>void 0===e?{success:!1,error:new pe({message:"No object generated: response did not match schema.",text:t.text,response:t.response,usage:t.usage,finishReason:t.finishReason})}:{success:!0,value:e},createElementStream(){throw new u.UnsupportedFunctionalityError({functionality:"element streams in no-schema mode"})}},ft=e=>({type:"object",jsonSchema:e.jsonSchema,validatePartialResult:({value:e,textDelta:t})=>({success:!0,value:{partial:e,textDelta:t}}),validateFinalResult:t=>(0,i.safeValidateTypes)({value:t,schema:e}),createElementStream(){throw new u.UnsupportedFunctionalityError({functionality:"element streams in object mode"})}}),yt=e=>{const{$schema:t,...r}=e.jsonSchema;return{type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:r}},required:["elements"],additionalProperties:!1},validatePartialResult({value:t,latestObject:r,isFirstDelta:a,isFinalDelta:s}){var n;if(!(0,u.isJSONObject)(t)||!(0,u.isJSONArray)(t.elements))return{success:!1,error:new u.TypeValidationError({value:t,cause:"value must be an object that contains an array of elements"})};const o=t.elements,l=[];for(let t=0;t<o.length;t++){const r=o[t],a=(0,i.safeValidateTypes)({value:r,schema:e});if(t!==o.length-1||s){if(!a.success)return a;l.push(a.value)}}const p=null!=(n=null==r?void 0:r.length)?n:0;let m="";return a&&(m+="["),p>0&&(m+=","),m+=l.slice(p).map(e=>JSON.stringify(e)).join(","),s&&(m+="]"),{success:!0,value:{partial:l,textDelta:m}}},validateFinalResult(t){if(!(0,u.isJSONObject)(t)||!(0,u.isJSONArray)(t.elements))return{success:!1,error:new u.TypeValidationError({value:t,cause:"value must be an object that contains an array of elements"})};const r=t.elements;for(const t of r){const r=(0,i.safeValidateTypes)({value:t,schema:e});if(!r.success)return r}return{success:!0,value:r}},createElementStream(e){let t=0;return gt(e.pipeThrough(new TransformStream({transform(e,r){switch(e.type){case"object":{const a=e.object;for(;t<a.length;t++)r.enqueue(a[t]);break}case"text-delta":case"finish":case"error":break;default:throw new Error(`Unsupported chunk type: ${e}`)}}})))}}},vt=e=>({type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},validateFinalResult(t){if(!(0,u.isJSONObject)(t)||"string"!=typeof t.result)return{success:!1,error:new u.TypeValidationError({value:t,cause:'value must be an object that contains a string in the "result" property.'})};const r=t.result;return e.includes(r)?{success:!0,value:r}:{success:!1,error:new u.TypeValidationError({value:t,cause:"value must be a string in the enum"})}},validatePartialResult(){throw new u.UnsupportedFunctionalityError({functionality:"partial results in enum mode"})},createElementStream(){throw new u.UnsupportedFunctionalityError({functionality:"element streams in enum mode"})}});function bt({output:e,schema:t,enumValues:r}){switch(e){case"object":return ft((0,l.asSchema)(t));case"array":return yt((0,l.asSchema)(t));case"enum":return vt(r);case"no-schema":return ht;default:throw new Error(`Unsupported output: ${e}`)}}function wt({output:e,mode:t,schema:r,schemaName:a,schemaDescription:s,enumValues:n}){if(null!=e&&"object"!==e&&"array"!==e&&"enum"!==e&&"no-schema"!==e)throw new I({parameter:"output",value:e,message:"Invalid output type."});if("no-schema"===e){if("auto"===t||"tool"===t)throw new I({parameter:"mode",value:t,message:'Mode must be "json" for no-schema output.'});if(null!=r)throw new I({parameter:"schema",value:r,message:"Schema is not supported for no-schema output."});if(null!=s)throw new I({parameter:"schemaDescription",value:s,message:"Schema description is not supported for no-schema output."});if(null!=a)throw new I({parameter:"schemaName",value:a,message:"Schema name is not supported for no-schema output."});if(null!=n)throw new I({parameter:"enumValues",value:n,message:"Enum values are not supported for no-schema output."})}if("object"===e){if(null==r)throw new I({parameter:"schema",value:r,message:"Schema is required for object output."});if(null!=n)throw new I({parameter:"enumValues",value:n,message:"Enum values are not supported for object output."})}if("array"===e){if(null==r)throw new I({parameter:"schema",value:r,message:"Element schema is required for array output."});if(null!=n)throw new I({parameter:"enumValues",value:n,message:"Enum values are not supported for array output."})}if("enum"===e){if(null!=r)throw new I({parameter:"schema",value:r,message:"Schema is not supported for enum output."});if(null!=s)throw new I({parameter:"schemaDescription",value:s,message:"Schema description is not supported for enum output."});if(null!=a)throw new I({parameter:"schemaName",value:a,message:"Schema name is not supported for enum output."});if(null==n)throw new I({parameter:"enumValues",value:n,message:"Enum values are required for enum output."});for(const e of n)if("string"!=typeof e)throw new I({parameter:"enumValues",value:e,message:"Enum values must be strings."})}}var xt=(0,i.createIdGenerator)({prefix:"aiobj",size:24});async function St({model:e,enum:t,schema:r,schemaName:a,schemaDescription:s,mode:n,output:o="object",system:l,prompt:p,messages:m,maxRetries:c,abortSignal:d,headers:g,experimental_repairText:h,experimental_telemetry:f,experimental_providerMetadata:y,providerOptions:v=y,_internal:{generateId:b=xt,currentDate:w=()=>new Date}={},...x}){wt({output:o,mode:n,schema:r,schemaName:a,schemaDescription:s,enumValues:t});const{maxRetries:S,retry:T}=C({maxRetries:c}),I=bt({output:o,schema:r,enumValues:t});"no-schema"===I.type&&void 0===n&&(n="json");const P=D({model:e,telemetry:f,headers:g,settings:{...x,maxRetries:S}}),E=A(f);return U({name:"ai.generateObject",attributes:$({telemetry:f,attributes:{...O({operationId:"ai.generateObject",telemetry:f}),...P,"ai.prompt":{input:()=>JSON.stringify({system:l,prompt:p,messages:m})},"ai.schema":null!=I.jsonSchema?{input:()=>JSON.stringify(I.jsonSchema)}:void 0,"ai.schema.name":a,"ai.schema.description":s,"ai.settings.output":I.type,"ai.settings.mode":n}}),tracer:E,fn:async t=>{var r,o,c,y;let S,k,j,R,M,_,C,D,q,N;switch("auto"!==n&&null!=n||(n=e.defaultObjectGenerationMode),n){case"json":{const t=it({prompt:{system:null==I.jsonSchema?dt({prompt:l}):e.supportsStructuredOutputs?l:dt({prompt:l,schema:I.jsonSchema}),prompt:p,messages:m},tools:void 0}),i=await Ce({prompt:t,modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:null==(r=e.supportsUrl)?void 0:r.bind(e)}),u=await T(()=>U({name:"ai.generateObject.doGenerate",attributes:$({telemetry:f,attributes:{...O({operationId:"ai.generateObject.doGenerate",telemetry:f}),...P,"ai.prompt.format":{input:()=>t.type},"ai.prompt.messages":{input:()=>JSON.stringify(i)},"ai.settings.mode":n,"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":x.frequencyPenalty,"gen_ai.request.max_tokens":x.maxTokens,"gen_ai.request.presence_penalty":x.presencePenalty,"gen_ai.request.temperature":x.temperature,"gen_ai.request.top_k":x.topK,"gen_ai.request.top_p":x.topP}}),tracer:E,fn:async r=>{var n,o,l,u,p,m;const c=await e.doGenerate({mode:{type:"object-json",schema:I.jsonSchema,name:a,description:s},...Ne(x),inputFormat:t.type,prompt:i,providerMetadata:v,abortSignal:d,headers:g}),h={id:null!=(o=null==(n=c.response)?void 0:n.id)?o:b(),timestamp:null!=(u=null==(l=c.response)?void 0:l.timestamp)?u:w(),modelId:null!=(m=null==(p=c.response)?void 0:p.modelId)?m:e.modelId};if(void 0===c.text)throw new pe({message:"No object generated: the model did not return a response.",response:h,usage:lt(c.usage),finishReason:c.finishReason});return r.setAttributes($({telemetry:f,attributes:{"ai.response.finishReason":c.finishReason,"ai.response.object":{output:()=>c.text},"ai.response.id":h.id,"ai.response.model":h.modelId,"ai.response.timestamp":h.timestamp.toISOString(),"ai.usage.promptTokens":c.usage.promptTokens,"ai.usage.completionTokens":c.usage.completionTokens,"gen_ai.response.finish_reasons":[c.finishReason],"gen_ai.response.id":h.id,"gen_ai.response.model":h.modelId,"gen_ai.usage.prompt_tokens":c.usage.promptTokens,"gen_ai.usage.completion_tokens":c.usage.completionTokens}})),{...c,objectText:c.text,responseData:h}}}));S=u.objectText,k=u.finishReason,j=u.usage,R=u.warnings,M=u.rawResponse,D=u.logprobs,q=u.providerMetadata,C=null!=(o=u.request)?o:{},_=u.responseData;break}case"tool":{const t=it({prompt:{system:l,prompt:p,messages:m},tools:void 0}),r=await Ce({prompt:t,modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:null==(c=e.supportsUrl)?void 0:c.bind(e)}),o=t.type,i=await T(()=>U({name:"ai.generateObject.doGenerate",attributes:$({telemetry:f,attributes:{...O({operationId:"ai.generateObject.doGenerate",telemetry:f}),...P,"ai.prompt.format":{input:()=>o},"ai.prompt.messages":{input:()=>JSON.stringify(r)},"ai.settings.mode":n,"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":x.frequencyPenalty,"gen_ai.request.max_tokens":x.maxTokens,"gen_ai.request.presence_penalty":x.presencePenalty,"gen_ai.request.temperature":x.temperature,"gen_ai.request.top_k":x.topK,"gen_ai.request.top_p":x.topP}}),tracer:E,fn:async t=>{var n,i,l,u,p,m,c,h;const y=await e.doGenerate({mode:{type:"object-tool",tool:{type:"function",name:null!=a?a:"json",description:null!=s?s:"Respond with a JSON object.",parameters:I.jsonSchema}},...Ne(x),inputFormat:o,prompt:r,providerMetadata:v,abortSignal:d,headers:g}),S=null==(i=null==(n=y.toolCalls)?void 0:n[0])?void 0:i.args,T={id:null!=(u=null==(l=y.response)?void 0:l.id)?u:b(),timestamp:null!=(m=null==(p=y.response)?void 0:p.timestamp)?m:w(),modelId:null!=(h=null==(c=y.response)?void 0:c.modelId)?h:e.modelId};if(void 0===S)throw new pe({message:"No object generated: the tool was not called.",response:T,usage:lt(y.usage),finishReason:y.finishReason});return t.setAttributes($({telemetry:f,attributes:{"ai.response.finishReason":y.finishReason,"ai.response.object":{output:()=>S},"ai.response.id":T.id,"ai.response.model":T.modelId,"ai.response.timestamp":T.timestamp.toISOString(),"ai.usage.promptTokens":y.usage.promptTokens,"ai.usage.completionTokens":y.usage.completionTokens,"gen_ai.response.finish_reasons":[y.finishReason],"gen_ai.response.id":T.id,"gen_ai.response.model":T.modelId,"gen_ai.usage.input_tokens":y.usage.promptTokens,"gen_ai.usage.output_tokens":y.usage.completionTokens}})),{...y,objectText:S,responseData:T}}}));S=i.objectText,k=i.finishReason,j=i.usage,R=i.warnings,M=i.rawResponse,D=i.logprobs,q=i.providerMetadata,C=null!=(y=i.request)?y:{},_=i.responseData;break}case void 0:throw new Error("Model does not have a default object generation mode.");default:throw new Error(`Unsupported mode: ${n}`)}function z(e){const t=(0,i.safeParseJSON)({text:e});if(!t.success)throw new pe({message:"No object generated: could not parse the response.",cause:t.error,text:e,response:_,usage:lt(j),finishReason:k});const r=I.validateFinalResult(t.value,{text:e,response:_,usage:lt(j)});if(!r.success)throw new pe({message:"No object generated: response did not match schema.",cause:r.error,text:e,response:_,usage:lt(j),finishReason:k});return r.value}try{N=z(S)}catch(e){if(null==h||!pe.isInstance(e)||!u.JSONParseError.isInstance(e.cause)&&!u.TypeValidationError.isInstance(e.cause))throw e;{const t=await h({text:S,error:e.cause});if(null===t)throw e;N=z(t)}}return t.setAttributes($({telemetry:f,attributes:{"ai.response.finishReason":k,"ai.response.object":{output:()=>JSON.stringify(N)},"ai.usage.promptTokens":j.promptTokens,"ai.usage.completionTokens":j.completionTokens}})),new Tt({object:N,finishReason:k,usage:lt(j),warnings:R,request:C,response:{..._,headers:null==M?void 0:M.headers,body:null==M?void 0:M.body},logprobs:D,providerMetadata:q})}})}var Tt=class{constructor(e){this.object=e.object,this.finishReason=e.finishReason,this.usage=e.usage,this.warnings=e.warnings,this.providerMetadata=e.providerMetadata,this.experimental_providerMetadata=e.providerMetadata,this.response=e.response,this.request=e.request,this.logprobs=e.logprobs}toJsonResponse(e){var t;return new Response(JSON.stringify(this.object),{status:null!=(t=null==e?void 0:e.status)?t:200,headers:h(null==e?void 0:e.headers,{contentType:"application/json; charset=utf-8"})})}},It=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise||(this.promise=new Promise((e,t)=>{"resolved"===this.status.type?e(this.status.value):"rejected"===this.status.type&&t(this.status.error),this._resolve=e,this._reject=t})),this.promise}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&(null==(t=this._resolve)||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&(null==(t=this._reject)||t.call(this,e))}};function Pt(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function Et(){let e=[],t=null,r=!1,a=Pt();const s=async()=>{if(r&&0===e.length)null==t||t.close();else{if(0===e.length)return a=Pt(),await a.promise,s();try{const{value:a,done:n}=await e[0].read();n?(e.shift(),e.length>0?await s():r&&(null==t||t.close())):null==t||t.enqueue(a)}catch(a){null==t||t.error(a),e.shift(),r&&0===e.length&&(null==t||t.close())}}};return{stream:new ReadableStream({start(e){t=e},pull:s,async cancel(){for(const t of e)await t.cancel();e=[],r=!0}}),addStream:t=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");e.push(t.getReader()),a.resolve()},close:()=>{r=!0,a.resolve(),0===e.length&&(null==t||t.close())},terminate:()=>{r=!0,a.resolve(),e.forEach(e=>e.cancel()),e=[],null==t||t.close()}}}function kt(){var e,t;return null!=(t=null==(e=null==globalThis?void 0:globalThis.performance)?void 0:e.now())?t:Date.now()}var jt=(0,i.createIdGenerator)({prefix:"aiobj",size:24});function Rt({model:e,schema:t,schemaName:r,schemaDescription:a,mode:s,output:n="object",system:o,prompt:i,messages:l,maxRetries:u,abortSignal:p,headers:m,experimental_telemetry:c,experimental_providerMetadata:d,providerOptions:g=d,onError:h,onFinish:f,_internal:{generateId:y=jt,currentDate:v=()=>new Date,now:b=kt}={},...w}){wt({output:n,mode:s,schema:t,schemaName:r,schemaDescription:a});const x=bt({output:n,schema:t});return"no-schema"===x.type&&void 0===s&&(s="json"),new _t({model:e,telemetry:c,headers:m,settings:w,maxRetries:u,abortSignal:p,outputStrategy:x,system:o,prompt:i,messages:l,schemaName:r,schemaDescription:a,providerOptions:g,mode:s,onError:h,onFinish:f,generateId:y,currentDate:v,now:b})}var Mt,_t=class{constructor({model:e,headers:t,telemetry:r,settings:a,maxRetries:s,abortSignal:n,outputStrategy:o,system:i,prompt:u,messages:p,schemaName:m,schemaDescription:c,providerOptions:d,mode:g,onError:h,onFinish:f,generateId:y,currentDate:v,now:b}){this.objectPromise=new It,this.usagePromise=new It,this.providerMetadataPromise=new It,this.warningsPromise=new It,this.requestPromise=new It,this.responsePromise=new It;const{maxRetries:w,retry:x}=C({maxRetries:s}),S=D({model:e,telemetry:r,headers:t,settings:{...a,maxRetries:w}}),T=A(r),I=this,P=Et(),E=new TransformStream({transform(e,t){t.enqueue(e),"error"===e.type&&(null==h||h({error:e.error}))}});this.baseStream=P.stream.pipeThrough(E),U({name:"ai.streamObject",attributes:$({telemetry:r,attributes:{...O({operationId:"ai.streamObject",telemetry:r}),...S,"ai.prompt":{input:()=>JSON.stringify({system:i,prompt:u,messages:p})},"ai.schema":null!=o.jsonSchema?{input:()=>JSON.stringify(o.jsonSchema)}:void 0,"ai.schema.name":m,"ai.schema.description":c,"ai.settings.output":o.type,"ai.settings.mode":g}}),tracer:T,endWhenDone:!1,fn:async s=>{var h,w;let E,k;switch("auto"!==g&&null!=g||(g=e.defaultObjectGenerationMode),g){case"json":{const r=it({prompt:{system:null==o.jsonSchema?dt({prompt:i}):e.supportsStructuredOutputs?i:dt({prompt:i,schema:o.jsonSchema}),prompt:u,messages:p},tools:void 0});E={mode:{type:"object-json",schema:o.jsonSchema,name:m,description:c},...Ne(a),inputFormat:r.type,prompt:await Ce({prompt:r,modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:null==(h=e.supportsUrl)?void 0:h.bind(e)}),providerMetadata:d,abortSignal:n,headers:t},k={transform:(e,t)=>{switch(e.type){case"text-delta":t.enqueue(e.textDelta);break;case"response-metadata":case"finish":case"error":t.enqueue(e)}}};break}case"tool":{const r=it({prompt:{system:i,prompt:u,messages:p},tools:void 0});E={mode:{type:"object-tool",tool:{type:"function",name:null!=m?m:"json",description:null!=c?c:"Respond with a JSON object.",parameters:o.jsonSchema}},...Ne(a),inputFormat:r.type,prompt:await Ce({prompt:r,modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:null==(w=e.supportsUrl)?void 0:w.bind(e)}),providerMetadata:d,abortSignal:n,headers:t},k={transform(e,t){switch(e.type){case"tool-call-delta":t.enqueue(e.argsTextDelta);break;case"response-metadata":case"finish":case"error":t.enqueue(e)}}};break}case void 0:throw new Error("Model does not have a default object generation mode.");default:throw new Error(`Unsupported mode: ${g}`)}const{result:{stream:j,warnings:R,rawResponse:M,request:_},doStreamSpan:C,startTimestampMs:D}=await x(()=>U({name:"ai.streamObject.doStream",attributes:$({telemetry:r,attributes:{...O({operationId:"ai.streamObject.doStream",telemetry:r}),...S,"ai.prompt.format":{input:()=>E.inputFormat},"ai.prompt.messages":{input:()=>JSON.stringify(E.prompt)},"ai.settings.mode":g,"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":a.frequencyPenalty,"gen_ai.request.max_tokens":a.maxTokens,"gen_ai.request.presence_penalty":a.presencePenalty,"gen_ai.request.temperature":a.temperature,"gen_ai.request.top_k":a.topK,"gen_ai.request.top_p":a.topP}}),tracer:T,endWhenDone:!1,fn:async t=>({startTimestampMs:b(),doStreamSpan:t,result:await e.doStream(E)})}));let q,N,z,A,F;I.requestPromise.resolve(null!=_?_:{});let J,K,G="",V="",L={id:y(),timestamp:v(),modelId:e.modelId},B=!0,W=!0;const H=j.pipeThrough(new TransformStream(k)).pipeThrough(new TransformStream({async transform(e,t){var r,a,s;if(B){const e=b()-D;B=!1,C.addEvent("ai.stream.firstChunk",{"ai.stream.msToFirstChunk":e}),C.setAttributes({"ai.stream.msToFirstChunk":e})}if("string"==typeof e){G+=e,V+=e;const{value:r,state:a}=(0,l.parsePartialJson)(G);if(void 0!==r&&!(0,l.isDeepEqualData)(J,r)){const e=o.validatePartialResult({value:r,textDelta:V,latestObject:K,isFirstDelta:W,isFinalDelta:"successful-parse"===a});e.success&&!(0,l.isDeepEqualData)(K,e.value.partial)&&(J=r,K=e.value.partial,t.enqueue({type:"object",object:K}),t.enqueue({type:"text-delta",textDelta:e.value.textDelta}),V="",W=!1)}return}switch(e.type){case"response-metadata":L={id:null!=(r=e.id)?r:L.id,timestamp:null!=(a=e.timestamp)?a:L.timestamp,modelId:null!=(s=e.modelId)?s:L.modelId};break;case"finish":{""!==V&&t.enqueue({type:"text-delta",textDelta:V}),N=e.finishReason,q=lt(e.usage),z=e.providerMetadata,t.enqueue({...e,usage:q,response:L}),I.usagePromise.resolve(q),I.providerMetadataPromise.resolve(z),I.responsePromise.resolve({...L,headers:null==M?void 0:M.headers});const r=o.validateFinalResult(J,{text:G,response:L,usage:q});r.success?(A=r.value,I.objectPromise.resolve(A)):(F=new pe({message:"No object generated: response did not match schema.",cause:r.error,text:G,response:L,usage:q,finishReason:N}),I.objectPromise.reject(F));break}default:t.enqueue(e)}},async flush(e){try{const e=null!=q?q:{promptTokens:NaN,completionTokens:NaN,totalTokens:NaN};C.setAttributes($({telemetry:r,attributes:{"ai.response.finishReason":N,"ai.response.object":{output:()=>JSON.stringify(A)},"ai.response.id":L.id,"ai.response.model":L.modelId,"ai.response.timestamp":L.timestamp.toISOString(),"ai.usage.promptTokens":e.promptTokens,"ai.usage.completionTokens":e.completionTokens,"gen_ai.response.finish_reasons":[N],"gen_ai.response.id":L.id,"gen_ai.response.model":L.modelId,"gen_ai.usage.input_tokens":e.promptTokens,"gen_ai.usage.output_tokens":e.completionTokens}})),C.end(),s.setAttributes($({telemetry:r,attributes:{"ai.usage.promptTokens":e.promptTokens,"ai.usage.completionTokens":e.completionTokens,"ai.response.object":{output:()=>JSON.stringify(A)}}})),await(null==f?void 0:f({usage:e,object:A,error:F,response:{...L,headers:null==M?void 0:M.headers},warnings:R,providerMetadata:z,experimental_providerMetadata:z}))}catch(t){e.enqueue({type:"error",error:t})}finally{s.end()}}}));P.addStream(H)}}).catch(e=>{P.addStream(new ReadableStream({start(t){t.enqueue({type:"error",error:e}),t.close()}}))}).finally(()=>{P.close()}),this.outputStrategy=o}get object(){return this.objectPromise.value}get usage(){return this.usagePromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get warnings(){return this.warningsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get partialObjectStream(){return gt(this.baseStream.pipeThrough(new TransformStream({transform(e,t){switch(e.type){case"object":t.enqueue(e.object);break;case"text-delta":case"finish":case"error":break;default:throw new Error(`Unsupported chunk type: ${e}`)}}})))}get elementStream(){return this.outputStrategy.createElementStream(this.baseStream)}get textStream(){return gt(this.baseStream.pipeThrough(new TransformStream({transform(e,t){switch(e.type){case"text-delta":t.enqueue(e.textDelta);break;case"object":case"finish":case"error":break;default:throw new Error(`Unsupported chunk type: ${e}`)}}})))}get fullStream(){return gt(this.baseStream)}pipeTextStreamToResponse(e,t){v({response:e,status:null==t?void 0:t.status,statusText:null==t?void 0:t.statusText,headers:y(null==t?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:null!=(t=null==e?void 0:e.status)?t:200,headers:h(null==e?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},Ct="AI_NoOutputSpecifiedError",Ot=`vercel.ai.error.${Ct}`,Dt=Symbol.for(Ot),qt=class extends u.AISDKError{constructor({message:e="No output specified."}={}){super({name:Ct,message:e}),this[Mt]=!0}static isInstance(e){return u.AISDKError.hasMarker(e,Ot)}};Mt=Dt;var Nt,zt="AI_ToolExecutionError",At=`vercel.ai.error.${zt}`,Ut=Symbol.for(At),$t=class extends u.AISDKError{constructor({toolArgs:e,toolName:t,toolCallId:r,cause:a,message:s=`Error executing tool ${t}: ${(0,u.getErrorMessage)(a)}`}){super({name:zt,message:s,cause:a}),this[Nt]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=r}static isInstance(e){return u.AISDKError.hasMarker(e,At)}};function Ft({tools:e,toolChoice:t,activeTools:r}){if(!(null!=(a=e)&&Object.keys(a).length>0))return{tools:void 0,toolChoice:void 0};var a;return{tools:(null!=r?Object.entries(e).filter(([e])=>r.includes(e)):Object.entries(e)).map(([e,t])=>{const r=t.type;switch(r){case void 0:case"function":return{type:"function",name:e,description:t.description,parameters:(0,l.asSchema)(t.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:e,id:t.id,args:t.args};default:throw new Error(`Unsupported tool type: ${r}`)}}),toolChoice:null==t?{type:"auto"}:"string"==typeof t?{type:t}:{type:"tool",toolName:t.toolName}}}Nt=Ut;var Jt=/^([\s\S]*?)(\s+)(\S*)$/;function Kt(e){const t=e.match(Jt);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}function Gt(e){const t=Kt(e);return t?t.prefix+t.whitespace:e}var Vt,Lt="AI_InvalidToolArgumentsError",Bt=`vercel.ai.error.${Lt}`,Wt=Symbol.for(Bt),Ht=class extends u.AISDKError{constructor({toolArgs:e,toolName:t,cause:r,message:a=`Invalid arguments for tool ${t}: ${(0,u.getErrorMessage)(r)}`}){super({name:Lt,message:a,cause:r}),this[Vt]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return u.AISDKError.hasMarker(e,Bt)}};Vt=Wt;var Zt,Qt="AI_NoSuchToolError",Xt=`vercel.ai.error.${Qt}`,Yt=Symbol.for(Xt),er=class extends u.AISDKError{constructor({toolName:e,availableTools:t,message:r=`Model tried to call unavailable tool '${e}'. ${void 0===t?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:Qt,message:r}),this[Zt]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return u.AISDKError.hasMarker(e,Xt)}};Zt=Yt;var tr,rr="AI_ToolCallRepairError",ar=`vercel.ai.error.${rr}`,sr=Symbol.for(ar),nr=class extends u.AISDKError{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${(0,u.getErrorMessage)(e)}`}){super({name:rr,message:r,cause:e}),this[tr]=!0,this.originalError=t}static isInstance(e){return u.AISDKError.hasMarker(e,ar)}};async function or({toolCall:e,tools:t,repairToolCall:r,system:a,messages:s}){if(null==t)throw new er({toolName:e.toolName});try{return await ir({toolCall:e,tools:t})}catch(n){if(null==r||!er.isInstance(n)&&!Ht.isInstance(n))throw n;let o=null;try{o=await r({toolCall:e,tools:t,parameterSchema:({toolName:e})=>(0,l.asSchema)(t[e].parameters).jsonSchema,system:a,messages:s,error:n})}catch(e){throw new nr({cause:e,originalError:n})}if(null==o)throw n;return await ir({toolCall:o,tools:t})}}async function ir({toolCall:e,tools:t}){const r=e.toolName,a=t[r];if(null==a)throw new er({toolName:e.toolName,availableTools:Object.keys(t)});const s=(0,l.asSchema)(a.parameters),n=""===e.args.trim()?(0,i.safeValidateTypes)({value:{},schema:s}):(0,i.safeParseJSON)({text:e.args,schema:s});if(!1===n.success)throw new Ht({toolName:r,toolArgs:e.args,cause:n.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:r,args:n.value}}function lr(e){const t=e.filter(e=>"text"===e.type).map(e=>e.text).join("");return t.length>0?t:void 0}function ur({text:e="",files:t,reasoning:r,tools:a,toolCalls:s,toolResults:n,messageId:o,generateMessageId:i}){const l=[],u=[];return r.length>0&&u.push(...r.map(e=>"text"===e.type?{...e,type:"reasoning"}:{...e,type:"redacted-reasoning"})),t.length>0&&u.push(...t.map(e=>({type:"file",data:e.base64,mimeType:e.mimeType}))),e.length>0&&u.push({type:"text",text:e}),s.length>0&&u.push(...s),u.length>0&&l.push({role:"assistant",content:u,id:o}),n.length>0&&l.push({role:"tool",id:i(),content:n.map(e=>{const t=a[e.toolName];return null!=(null==t?void 0:t.experimental_toToolResultContent)?{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:t.experimental_toToolResultContent(e.result),experimental_content:t.experimental_toToolResultContent(e.result)}:{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result}})}),l}tr=sr;var pr=(0,i.createIdGenerator)({prefix:"aitxt",size:24}),mr=(0,i.createIdGenerator)({prefix:"msg",size:24});async function cr({model:e,tools:t,toolChoice:r,system:a,prompt:s,messages:n,maxRetries:o,abortSignal:i,headers:l,maxSteps:u=1,experimental_generateMessageId:p=mr,experimental_output:m,experimental_continueSteps:c=!1,experimental_telemetry:d,experimental_providerMetadata:g,providerOptions:h=g,experimental_activeTools:f,experimental_prepareStep:y,experimental_repairToolCall:v,_internal:{generateId:b=pr,currentDate:w=()=>new Date}={},onStepFinish:x,...S}){var T;if(u<1)throw new I({parameter:"maxSteps",value:u,message:"maxSteps must be at least 1"});const{maxRetries:P,retry:E}=C({maxRetries:o}),k=D({model:e,telemetry:d,headers:l,settings:{...S,maxRetries:P}}),j=it({prompt:{system:null!=(T=null==m?void 0:m.injectIntoSystemPrompt({system:a,model:e}))?T:a,prompt:s,messages:n},tools:t}),R=A(d);return U({name:"ai.generateText",attributes:$({telemetry:d,attributes:{...O({operationId:"ai.generateText",telemetry:d}),...k,"ai.model.provider":e.provider,"ai.model.id":e.modelId,"ai.prompt":{input:()=>JSON.stringify({system:a,prompt:s,messages:n})},"ai.settings.maxSteps":u}}),tracer:R,fn:async s=>{var n,o,g,T,I,P,M,_,C,D,q,N,z,A;const F=Ne(S);let J,K=[],G=[],V=[],L=0;const B=[];let W="";const H=[],Z=[];let Q={completionTokens:0,promptTokens:0,totalTokens:0},X="initial";do{const s=0===L?j.type:"messages",N=[...j.messages,...B],z=await(null==y?void 0:y({model:e,steps:Z,maxSteps:u,stepNumber:L})),A=null!=(n=null==z?void 0:z.toolChoice)?n:r,Y=null!=(o=null==z?void 0:z.experimental_activeTools)?o:f,ee=null!=(g=null==z?void 0:z.model)?g:e,te=await Ce({prompt:{type:s,system:j.system,messages:N},modelSupportsImageUrls:ee.supportsImageUrls,modelSupportsUrl:null==(T=ee.supportsUrl)?void 0:T.bind(ee)}),re={type:"regular",...Ft({tools:t,toolChoice:A,activeTools:Y})};J=await E(()=>U({name:"ai.generateText.doGenerate",attributes:$({telemetry:d,attributes:{...O({operationId:"ai.generateText.doGenerate",telemetry:d}),...k,"ai.model.provider":ee.provider,"ai.model.id":ee.modelId,"ai.prompt.format":{input:()=>s},"ai.prompt.messages":{input:()=>JSON.stringify(te)},"ai.prompt.tools":{input:()=>{var e;return null==(e=re.tools)?void 0:e.map(e=>JSON.stringify(e))}},"ai.prompt.toolChoice":{input:()=>null!=re.toolChoice?JSON.stringify(re.toolChoice):void 0},"gen_ai.system":ee.provider,"gen_ai.request.model":ee.modelId,"gen_ai.request.frequency_penalty":S.frequencyPenalty,"gen_ai.request.max_tokens":S.maxTokens,"gen_ai.request.presence_penalty":S.presencePenalty,"gen_ai.request.stop_sequences":S.stopSequences,"gen_ai.request.temperature":S.temperature,"gen_ai.request.top_k":S.topK,"gen_ai.request.top_p":S.topP}}),tracer:R,fn:async t=>{var r,a,n,o,u,p;const c=await ee.doGenerate({mode:re,...F,inputFormat:s,responseFormat:null==m?void 0:m.responseFormat({model:e}),prompt:te,providerMetadata:h,abortSignal:i,headers:l}),g={id:null!=(a=null==(r=c.response)?void 0:r.id)?a:b(),timestamp:null!=(o=null==(n=c.response)?void 0:n.timestamp)?o:w(),modelId:null!=(p=null==(u=c.response)?void 0:u.modelId)?p:ee.modelId};return t.setAttributes($({telemetry:d,attributes:{"ai.response.finishReason":c.finishReason,"ai.response.text":{output:()=>c.text},"ai.response.toolCalls":{output:()=>JSON.stringify(c.toolCalls)},"ai.response.id":g.id,"ai.response.model":g.modelId,"ai.response.timestamp":g.timestamp.toISOString(),"ai.usage.promptTokens":c.usage.promptTokens,"ai.usage.completionTokens":c.usage.completionTokens,"gen_ai.response.finish_reasons":[c.finishReason],"gen_ai.response.id":g.id,"gen_ai.response.model":g.modelId,"gen_ai.usage.input_tokens":c.usage.promptTokens,"gen_ai.usage.output_tokens":c.usage.completionTokens}})),{...c,response:g}}})),K=await Promise.all((null!=(I=J.toolCalls)?I:[]).map(e=>or({toolCall:e,tools:t,repairToolCall:v,system:a,messages:N}))),G=null==t?[]:await dr({toolCalls:K,tools:t,tracer:R,telemetry:d,messages:N,abortSignal:i});const ae=lt(J.usage);Q=ut(Q,ae);let se="done";++L<u&&(c&&"length"===J.finishReason&&0===K.length?se="continue":K.length>0&&G.length===K.length&&(se="tool-result"));const ne=null!=(P=J.text)?P:"",oe="continue"===X&&W.trimEnd()!==W?ne.trimStart():ne,ie="continue"===se?Gt(oe):oe;if(W="continue"===se||"continue"===X?W+ie:ie,V=hr(J.reasoning),H.push(...null!=(M=J.sources)?M:[]),"continue"===X){const e=B[B.length-1];"string"==typeof e.content?e.content+=ie:e.content.push({text:ie,type:"text"})}else B.push(...ur({text:W,files:fr(J.files),reasoning:hr(J.reasoning),tools:null!=t?t:{},toolCalls:K,toolResults:G,messageId:p(),generateMessageId:p}));const le={stepType:X,text:ie,reasoning:lr(V),reasoningDetails:V,files:fr(J.files),sources:null!=(_=J.sources)?_:[],toolCalls:K,toolResults:G,finishReason:J.finishReason,usage:ae,warnings:J.warnings,logprobs:J.logprobs,request:null!=(C=J.request)?C:{},response:{...J.response,headers:null==(D=J.rawResponse)?void 0:D.headers,body:null==(q=J.rawResponse)?void 0:q.body,messages:structuredClone(B)},providerMetadata:J.providerMetadata,experimental_providerMetadata:J.providerMetadata,isContinued:"continue"===se};Z.push(le),await(null==x?void 0:x(le)),X=se}while("done"!==X);return s.setAttributes($({telemetry:d,attributes:{"ai.response.finishReason":J.finishReason,"ai.response.text":{output:()=>J.text},"ai.response.toolCalls":{output:()=>JSON.stringify(J.toolCalls)},"ai.usage.promptTokens":J.usage.promptTokens,"ai.usage.completionTokens":J.usage.completionTokens}})),new gr({text:W,files:fr(J.files),reasoning:lr(V),reasoningDetails:V,sources:H,outputResolver:()=>{if(null==m)throw new qt;return m.parseOutput({text:W},{response:J.response,usage:Q,finishReason:J.finishReason})},toolCalls:K,toolResults:G,finishReason:J.finishReason,usage:Q,warnings:J.warnings,request:null!=(N=J.request)?N:{},response:{...J.response,headers:null==(z=J.rawResponse)?void 0:z.headers,body:null==(A=J.rawResponse)?void 0:A.body,messages:B},logprobs:J.logprobs,steps:Z,providerMetadata:J.providerMetadata})}})}async function dr({toolCalls:e,tools:t,tracer:r,telemetry:a,messages:s,abortSignal:n}){return(await Promise.all(e.map(async({toolCallId:e,toolName:o,args:i})=>{const l=t[o];if(null==(null==l?void 0:l.execute))return;const u=await U({name:"ai.toolCall",attributes:$({telemetry:a,attributes:{...O({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":o,"ai.toolCall.id":e,"ai.toolCall.args":{output:()=>JSON.stringify(i)}}}),tracer:r,fn:async t=>{try{const r=await l.execute(i,{toolCallId:e,messages:s,abortSignal:n});try{t.setAttributes($({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(r)}}}))}catch(e){}return r}catch(t){throw new $t({toolCallId:e,toolName:o,toolArgs:i,cause:t})}}});return{type:"tool-result",toolCallId:e,toolName:o,args:i,result:u}}))).filter(e=>null!=e)}var gr=class{constructor(e){this.text=e.text,this.files=e.files,this.reasoning=e.reasoning,this.reasoningDetails=e.reasoningDetails,this.toolCalls=e.toolCalls,this.toolResults=e.toolResults,this.finishReason=e.finishReason,this.usage=e.usage,this.warnings=e.warnings,this.request=e.request,this.response=e.response,this.steps=e.steps,this.experimental_providerMetadata=e.providerMetadata,this.providerMetadata=e.providerMetadata,this.logprobs=e.logprobs,this.outputResolver=e.outputResolver,this.sources=e.sources}get experimental_output(){return this.outputResolver()}};function hr(e){return null==e?[]:"string"==typeof e?[{type:"text",text:e}]:e}function fr(e){var t;return null!=(t=null==e?void 0:e.map(e=>new Q(e)))?t:[]}var yr={};d(yr,{object:()=>jr,text:()=>kr});var vr,br="AI_InvalidStreamPartError",wr=`vercel.ai.error.${br}`,xr=Symbol.for(wr),Sr=class extends u.AISDKError{constructor({chunk:e,message:t}){super({name:br,message:t}),this[vr]=!0,this.chunk=e}static isInstance(e){return u.AISDKError.hasMarker(e,wr)}};vr=xr;var Tr,Ir="vercel.ai.error.AI_MCPClientError",Pr=Symbol.for(Ir),Er=class extends u.AISDKError{constructor({name:e="MCPClientError",message:t,cause:r}){super({name:e,message:t,cause:r}),this[Tr]=!0}static isInstance(e){return u.AISDKError.hasMarker(e,Ir)}};Tr=Pr;var kr=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt:({system:e})=>e,parsePartial:({text:e})=>({partial:e}),parseOutput:({text:e})=>e}),jr=({schema:e})=>{const t=(0,l.asSchema)(e);return{type:"object",responseFormat:({model:e})=>({type:"json",schema:e.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt:({system:e,model:r})=>r.supportsStructuredOutputs?e:dt({prompt:e,schema:t.jsonSchema}),parsePartial({text:e}){const t=(0,l.parsePartialJson)(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:t.value};default:{const e=t.state;throw new Error(`Unsupported parse state: ${e}`)}}},parseOutput({text:e},r){const a=(0,i.safeParseJSON)({text:e});if(!a.success)throw new pe({message:"No object generated: could not parse the response.",cause:a.error,text:e,response:r.response,usage:r.usage,finishReason:r.finishReason});const s=(0,i.safeValidateTypes)({value:a.value,schema:t});if(!s.success)throw new pe({message:"No object generated: response did not match schema.",cause:s.error,text:e,response:r.response,usage:r.usage,finishReason:r.finishReason});return s.value}}},Rr={word:/\S+\s+/m,line:/\n+/m};function Mr({delayInMs:e=10,chunking:t="word",_internal:{delay:r=i.delay}={}}={}){let a;if("function"==typeof t)a=e=>{const r=t(e);if(null==r)return null;if(!r.length)throw new Error("Chunking function must return a non-empty string.");if(!e.startsWith(r))throw new Error(`Chunking function must return a match that is a prefix of the buffer. Received: "${r}" expected to start with "${e}"`);return r};else{const e="string"==typeof t?Rr[t]:t;if(null==e)throw new u.InvalidArgumentError({argument:"chunking",message:`Chunking must be "word" or "line" or a RegExp. Received: ${t}`});a=t=>{const r=e.exec(t);return r?t.slice(0,r.index)+(null==r?void 0:r[0]):null}}return()=>{let t="";return new TransformStream({async transform(s,n){if("text-delta"!==s.type)return t.length>0&&(n.enqueue({type:"text-delta",textDelta:t}),t=""),void n.enqueue(s);let o;for(t+=s.textDelta;null!=(o=a(t));)n.enqueue({type:"text-delta",textDelta:o}),t=t.slice(o.length),await r(e)}})}}function _r(e){return void 0===e?[]:Array.isArray(e)?e:[e]}async function Cr({stream:e,onError:t}){const r=e.getReader();try{for(;;){const{done:e}=await r.read();if(e)break}}catch(e){null==t||t(e)}finally{r.releaseLock()}}function Or(e,t){const r=e.getReader(),a=t.getReader();let s,n,o=!1,i=!1;async function l(e){try{null==s&&(s=r.read());const t=await s;s=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}async function u(e){try{null==n&&(n=a.read());const t=await n;n=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}return new ReadableStream({async pull(e){try{if(o)return void await u(e);if(i)return void await l(e);null==s&&(s=r.read()),null==n&&(n=a.read());const{result:t,reader:p}=await Promise.race([s.then(e=>({result:e,reader:r})),n.then(e=>({result:e,reader:a}))]);t.done||e.enqueue(t.value),p===r?(s=void 0,t.done&&(await u(e),o=!0)):(n=void 0,t.done&&(i=!0,await l(e)))}catch(t){e.error(t)}},cancel(){r.cancel(),a.cancel()}})}function Dr({tools:e,generatorStream:t,toolCallStreaming:r,tracer:a,telemetry:s,system:n,messages:o,abortSignal:i,repairToolCall:u}){let p=null;const m=new ReadableStream({start(e){p=e}}),c={},d=new Set;let g,h=!1;function f(){h&&0===d.size&&(null!=g&&p.enqueue(g),p.close())}const y=new TransformStream({async transform(t,m){const h=t.type;switch(h){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":m.enqueue(t);break;case"file":m.enqueue(new X({data:t.data,mimeType:t.mimeType}));break;case"tool-call-delta":r&&(c[t.toolCallId]||(m.enqueue({type:"tool-call-streaming-start",toolCallId:t.toolCallId,toolName:t.toolName}),c[t.toolCallId]=!0),m.enqueue({type:"tool-call-delta",toolCallId:t.toolCallId,toolName:t.toolName,argsTextDelta:t.argsTextDelta}));break;case"tool-call":try{const r=await or({toolCall:t,tools:e,repairToolCall:u,system:n,messages:o});m.enqueue(r);const c=e[r.toolName];if(null!=c.execute){const e=(0,l.generateId)();d.add(e),U({name:"ai.toolCall",attributes:$({telemetry:s,attributes:{...O({operationId:"ai.toolCall",telemetry:s}),"ai.toolCall.name":r.toolName,"ai.toolCall.id":r.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(r.args)}}}),tracer:a,fn:async t=>c.execute(r.args,{toolCallId:r.toolCallId,messages:o,abortSignal:i}).then(a=>{p.enqueue({...r,type:"tool-result",result:a}),d.delete(e),f();try{t.setAttributes($({telemetry:s,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(a)}}}))}catch(e){}},t=>{p.enqueue({type:"error",error:new $t({toolCallId:r.toolCallId,toolName:r.toolName,toolArgs:r.args,cause:t})}),d.delete(e),f()})})}}catch(e){p.enqueue({type:"error",error:e})}break;case"finish":g={type:"finish",finishReason:t.finishReason,logprobs:t.logprobs,usage:lt(t.usage),experimental_providerMetadata:t.providerMetadata};break;default:throw new Error(`Unhandled chunk type: ${h}`)}},flush(){h=!0,f()}});return new ReadableStream({start:async e=>Promise.all([t.pipeThrough(y).pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){}})),m.pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){e.close()}}))])})}var qr=(0,i.createIdGenerator)({prefix:"aitxt",size:24}),Nr=(0,i.createIdGenerator)({prefix:"msg",size:24});function zr({model:e,tools:t,toolChoice:r,system:a,prompt:s,messages:n,maxRetries:o,abortSignal:i,headers:l,maxSteps:u=1,experimental_generateMessageId:p=Nr,experimental_output:m,experimental_continueSteps:c=!1,experimental_telemetry:d,experimental_providerMetadata:g,providerOptions:h=g,experimental_toolCallStreaming:f=!1,toolCallStreaming:y=f,experimental_activeTools:v,experimental_repairToolCall:b,experimental_transform:w,onChunk:x,onError:S,onFinish:T,onStepFinish:I,_internal:{now:P=kt,generateId:E=qr,currentDate:k=()=>new Date}={},...j}){return new Ur({model:e,telemetry:d,headers:l,settings:j,maxRetries:o,abortSignal:i,system:a,prompt:s,messages:n,tools:t,toolChoice:r,toolCallStreaming:y,transforms:_r(w),activeTools:v,repairToolCall:b,maxSteps:u,output:m,continueSteps:c,providerOptions:h,onChunk:x,onError:S,onFinish:T,onStepFinish:I,now:P,currentDate:k,generateId:E,generateMessageId:p})}function Ar(e){if(!e)return new TransformStream({transform(e,t){t.enqueue({part:e,partialOutput:void 0})}});let t="",r="",a="";function s({controller:e,partialOutput:t}){e.enqueue({part:{type:"text-delta",textDelta:r},partialOutput:t}),r=""}return new TransformStream({transform(n,o){if("step-finish"===n.type&&s({controller:o}),"text-delta"!==n.type)return void o.enqueue({part:n,partialOutput:void 0});t+=n.textDelta,r+=n.textDelta;const i=e.parsePartial({text:t});if(null!=i){const e=JSON.stringify(i.partial);e!==a&&(s({controller:o,partialOutput:i.partial}),a=e)}},flush(e){r.length>0&&s({controller:e})}})}var Ur=class{constructor({model:e,telemetry:t,headers:r,settings:a,maxRetries:s,abortSignal:n,system:o,prompt:i,messages:l,tools:p,toolChoice:m,toolCallStreaming:c,transforms:d,activeTools:g,repairToolCall:h,maxSteps:f,output:y,continueSteps:v,providerOptions:b,now:w,currentDate:x,generateId:S,generateMessageId:T,onChunk:P,onError:E,onFinish:k,onStepFinish:j}){var R;if(this.warningsPromise=new It,this.usagePromise=new It,this.finishReasonPromise=new It,this.providerMetadataPromise=new It,this.textPromise=new It,this.reasoningPromise=new It,this.reasoningDetailsPromise=new It,this.sourcesPromise=new It,this.filesPromise=new It,this.toolCallsPromise=new It,this.toolResultsPromise=new It,this.requestPromise=new It,this.responsePromise=new It,this.stepsPromise=new It,f<1)throw new I({parameter:"maxSteps",value:f,message:"maxSteps must be at least 1"});this.output=y;let M,_="",q="",N="",z=[],F=[],J=[];const K=[],G={id:S(),timestamp:x(),modelId:e.modelId,messages:[]};let V,L,B=[],W=[],H="initial";const Z=[];let Q;const X=new TransformStream({async transform(e,t){t.enqueue(e);const{part:r}=e;if("text-delta"!==r.type&&"reasoning"!==r.type&&"source"!==r.type&&"tool-call"!==r.type&&"tool-result"!==r.type&&"tool-call-streaming-start"!==r.type&&"tool-call-delta"!==r.type||await(null==P?void 0:P({chunk:r})),"error"===r.type&&await(null==E?void 0:E({error:r.error})),"text-delta"===r.type&&(_+=r.textDelta,q+=r.textDelta,N+=r.textDelta),"reasoning"===r.type&&(null==M?(M={type:"text",text:r.textDelta},z.push(M)):M.text+=r.textDelta),"reasoning-signature"===r.type){if(null==M)throw new u.AISDKError({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});M.signature=r.signature,M=void 0}if("redacted-reasoning"===r.type&&z.push({type:"redacted",data:r.data}),"file"===r.type&&F.push(r),"source"===r.type&&(K.push(r.source),J.push(r.source)),"tool-call"===r.type&&B.push(r),"tool-result"===r.type&&W.push(r),"step-finish"===r.type){const e=ur({text:q,files:F,reasoning:z,tools:null!=p?p:{},toolCalls:B,toolResults:W,messageId:r.messageId,generateMessageId:T});let t="done";Z.length+1<f&&(v&&"length"===r.finishReason&&0===B.length?t="continue":B.length>0&&W.length===B.length&&(t="tool-result"));const a={stepType:H,text:_,reasoning:lr(z),reasoningDetails:z,files:F,sources:J,toolCalls:B,toolResults:W,finishReason:r.finishReason,usage:r.usage,warnings:r.warnings,logprobs:r.logprobs,request:r.request,response:{...r.response,messages:[...G.messages,...e]},providerMetadata:r.experimental_providerMetadata,experimental_providerMetadata:r.experimental_providerMetadata,isContinued:r.isContinued};await(null==j?void 0:j(a)),Z.push(a),B=[],W=[],_="",J=[],z=[],F=[],M=void 0,"done"!==t&&(H=t),"continue"!==t&&(G.messages.push(...e),q="")}"finish"===r.type&&(G.id=r.response.id,G.timestamp=r.response.timestamp,G.modelId=r.response.modelId,G.headers=r.response.headers,L=r.usage,V=r.finishReason)},async flush(e){var r;try{if(0===Z.length)return;const e=Z[Z.length-1];oe.warningsPromise.resolve(e.warnings),oe.requestPromise.resolve(e.request),oe.responsePromise.resolve(e.response),oe.toolCallsPromise.resolve(e.toolCalls),oe.toolResultsPromise.resolve(e.toolResults),oe.providerMetadataPromise.resolve(e.experimental_providerMetadata),oe.reasoningPromise.resolve(e.reasoning),oe.reasoningDetailsPromise.resolve(e.reasoningDetails);const a=null!=V?V:"unknown",s=null!=L?L:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};oe.finishReasonPromise.resolve(a),oe.usagePromise.resolve(s),oe.textPromise.resolve(N),oe.sourcesPromise.resolve(K),oe.filesPromise.resolve(e.files),oe.stepsPromise.resolve(Z),await(null==k?void 0:k({finishReason:a,logprobs:void 0,usage:s,text:N,reasoning:e.reasoning,reasoningDetails:e.reasoningDetails,files:e.files,sources:e.sources,toolCalls:e.toolCalls,toolResults:e.toolResults,request:null!=(r=e.request)?r:{},response:e.response,warnings:e.warnings,providerMetadata:e.providerMetadata,experimental_providerMetadata:e.experimental_providerMetadata,steps:Z})),Q.setAttributes($({telemetry:t,attributes:{"ai.response.finishReason":a,"ai.response.text":{output:()=>N},"ai.response.toolCalls":{output:()=>{var t;return(null==(t=e.toolCalls)?void 0:t.length)?JSON.stringify(e.toolCalls):void 0}},"ai.usage.promptTokens":s.promptTokens,"ai.usage.completionTokens":s.completionTokens}}))}catch(t){e.error(t)}finally{Q.end()}}}),Y=Et();this.addStream=Y.addStream,this.closeStream=Y.close;let ee=Y.stream;for(const e of d)ee=ee.pipeThrough(e({tools:p,stopStream(){Y.terminate()}}));this.baseStream=ee.pipeThrough(Ar(y)).pipeThrough(X);const{maxRetries:te,retry:re}=C({maxRetries:s}),ae=A(t),se=D({model:e,telemetry:t,headers:r,settings:{...a,maxRetries:te}}),ne=it({prompt:{system:null!=(R=null==y?void 0:y.injectIntoSystemPrompt({system:o,model:e}))?R:o,prompt:i,messages:l},tools:p}),oe=this;U({name:"ai.streamText",attributes:$({telemetry:t,attributes:{...O({operationId:"ai.streamText",telemetry:t}),...se,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:i,messages:l})},"ai.settings.maxSteps":f}}),tracer:ae,endWhenDone:!1,fn:async s=>{Q=s,await(async function s({currentStep:i,responseMessages:l,usage:u,stepType:d,previousStepText:I,hasLeadingWhitespace:P,messageId:E}){var k;const j=0===l.length?ne.type:"messages",R=[...ne.messages,...l],M=await Ce({prompt:{type:j,system:ne.system,messages:R},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:null==(k=e.supportsUrl)?void 0:k.bind(e)}),_={type:"regular",...Ft({tools:p,toolChoice:m,activeTools:g})},{result:{stream:C,warnings:D,rawResponse:q,request:N},doStreamSpan:z,startTimestampMs:A}=await re(()=>U({name:"ai.streamText.doStream",attributes:$({telemetry:t,attributes:{...O({operationId:"ai.streamText.doStream",telemetry:t}),...se,"ai.prompt.format":{input:()=>j},"ai.prompt.messages":{input:()=>JSON.stringify(M)},"ai.prompt.tools":{input:()=>{var e;return null==(e=_.tools)?void 0:e.map(e=>JSON.stringify(e))}},"ai.prompt.toolChoice":{input:()=>null!=_.toolChoice?JSON.stringify(_.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":a.frequencyPenalty,"gen_ai.request.max_tokens":a.maxTokens,"gen_ai.request.presence_penalty":a.presencePenalty,"gen_ai.request.stop_sequences":a.stopSequences,"gen_ai.request.temperature":a.temperature,"gen_ai.request.top_k":a.topK,"gen_ai.request.top_p":a.topP}}),tracer:ae,endWhenDone:!1,fn:async t=>({startTimestampMs:w(),doStreamSpan:t,result:await e.doStream({mode:_,...Ne(a),inputFormat:j,responseFormat:null==y?void 0:y.responseFormat({model:e}),prompt:M,providerMetadata:b,abortSignal:n,headers:r})})})),F=Dr({tools:p,generatorStream:C,toolCallStreaming:c,tracer:ae,telemetry:t,system:o,messages:R,repairToolCall:h,abortSignal:n}),J=null!=N?N:{},K=[],G=[],V=[],L=[];let B,W,H,Z="unknown",Q={promptTokens:0,completionTokens:0,totalTokens:0},X=!0,Y="",ee="continue"===d?I:"",te={id:S(),timestamp:x(),modelId:e.modelId},ie="",le=!1,ue=!0,pe=!1;async function me({controller:e,chunk:t}){e.enqueue(t),Y+=t.textDelta,ee+=t.textDelta,le=!0,pe=t.textDelta.trimEnd()!==t.textDelta}oe.addStream(F.pipeThrough(new TransformStream({async transform(e,t){var r,a,s;if(X){const e=w()-A;X=!1,z.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":e}),z.setAttributes({"ai.response.msToFirstChunk":e}),t.enqueue({type:"step-start",messageId:E,request:J,warnings:null!=D?D:[]})}if("text-delta"===e.type&&0===e.textDelta.length)return;const n=e.type;switch(n){case"text-delta":if(v){const r=ue&&P?e.textDelta.trimStart():e.textDelta;if(0===r.length)break;ue=!1,ie+=r;const a=Kt(ie);null!=a&&(ie=a.suffix,await me({controller:t,chunk:{type:"text-delta",textDelta:a.prefix+a.whitespace}}))}else await me({controller:t,chunk:e});break;case"reasoning":t.enqueue(e),null==B?(B={type:"text",text:e.textDelta},V.push(B)):B.text+=e.textDelta;break;case"reasoning-signature":if(t.enqueue(e),null==B)throw new Sr({chunk:e,message:"reasoning-signature without reasoning"});B.signature=e.signature,B=void 0;break;case"redacted-reasoning":t.enqueue(e),V.push({type:"redacted",data:e.data});break;case"tool-call":t.enqueue(e),K.push(e);break;case"tool-result":t.enqueue(e),G.push(e);break;case"response-metadata":te={id:null!=(r=e.id)?r:te.id,timestamp:null!=(a=e.timestamp)?a:te.timestamp,modelId:null!=(s=e.modelId)?s:te.modelId};break;case"finish":{Q=e.usage,Z=e.finishReason,W=e.experimental_providerMetadata,H=e.logprobs;const t=w()-A;z.addEvent("ai.stream.finish"),z.setAttributes({"ai.response.msToFinish":t,"ai.response.avgCompletionTokensPerSecond":1e3*Q.completionTokens/t});break}case"file":L.push(e),t.enqueue(e);break;case"source":case"tool-call-streaming-start":case"tool-call-delta":t.enqueue(e);break;case"error":t.enqueue(e),Z="error";break;default:throw new Error(`Unknown chunk type: ${n}`)}},async flush(e){const r=K.length>0?JSON.stringify(K):void 0;let a="done";i+1<f&&(v&&"length"===Z&&0===K.length?a="continue":K.length>0&&G.length===K.length&&(a="tool-result")),v&&ie.length>0&&("continue"!==a||"continue"===d&&!le)&&(await me({controller:e,chunk:{type:"text-delta",textDelta:ie}}),ie="");try{z.setAttributes($({telemetry:t,attributes:{"ai.response.finishReason":Z,"ai.response.text":{output:()=>Y},"ai.response.toolCalls":{output:()=>r},"ai.response.id":te.id,"ai.response.model":te.modelId,"ai.response.timestamp":te.timestamp.toISOString(),"ai.usage.promptTokens":Q.promptTokens,"ai.usage.completionTokens":Q.completionTokens,"gen_ai.response.finish_reasons":[Z],"gen_ai.response.id":te.id,"gen_ai.response.model":te.modelId,"gen_ai.usage.input_tokens":Q.promptTokens,"gen_ai.usage.output_tokens":Q.completionTokens}}))}catch(e){}finally{z.end()}e.enqueue({type:"step-finish",finishReason:Z,usage:Q,providerMetadata:W,experimental_providerMetadata:W,logprobs:H,request:J,response:{...te,headers:null==q?void 0:q.headers},warnings:D,isContinued:"continue"===a,messageId:E});const n=ut(u,Q);if("done"===a)e.enqueue({type:"finish",finishReason:Z,usage:n,providerMetadata:W,experimental_providerMetadata:W,logprobs:H,response:{...te,headers:null==q?void 0:q.headers}}),oe.closeStream();else{if("continue"===d){const e=l[l.length-1];"string"==typeof e.content?e.content+=Y:e.content.push({text:Y,type:"text"})}else l.push(...ur({text:Y,files:L,reasoning:V,tools:null!=p?p:{},toolCalls:K,toolResults:G,messageId:E,generateMessageId:T}));await s({currentStep:i+1,responseMessages:l,usage:n,stepType:a,previousStepText:ee,hasLeadingWhitespace:pe,messageId:"continue"===a?E:T()})}}})))})({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:T()})}}).catch(e=>{oe.addStream(new ReadableStream({start(t){t.enqueue({type:"error",error:e}),t.close()}})),oe.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return gt(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){"text-delta"===e.type&&t.enqueue(e.textDelta)}})))}get fullStream(){return gt(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await Cr({stream:this.fullStream,onError:null==e?void 0:e.onError})}catch(r){null==(t=null==e?void 0:e.onError)||t.call(e,r)}}get experimental_partialOutputStream(){if(null==this.output)throw new qt;return gt(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){null!=e&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:r=!1,sendSources:a=!1,experimental_sendFinish:s=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(n,o)=>{const i=n.type;switch(i){case"text-delta":o.enqueue((0,l.formatDataStreamPart)("text",n.textDelta));break;case"reasoning":r&&o.enqueue((0,l.formatDataStreamPart)("reasoning",n.textDelta));break;case"redacted-reasoning":r&&o.enqueue((0,l.formatDataStreamPart)("redacted_reasoning",{data:n.data}));break;case"reasoning-signature":r&&o.enqueue((0,l.formatDataStreamPart)("reasoning_signature",{signature:n.signature}));break;case"file":o.enqueue((0,l.formatDataStreamPart)("file",{mimeType:n.mimeType,data:n.base64}));break;case"source":a&&o.enqueue((0,l.formatDataStreamPart)("source",n.source));break;case"tool-call-streaming-start":o.enqueue((0,l.formatDataStreamPart)("tool_call_streaming_start",{toolCallId:n.toolCallId,toolName:n.toolName}));break;case"tool-call-delta":o.enqueue((0,l.formatDataStreamPart)("tool_call_delta",{toolCallId:n.toolCallId,argsTextDelta:n.argsTextDelta}));break;case"tool-call":o.enqueue((0,l.formatDataStreamPart)("tool_call",{toolCallId:n.toolCallId,toolName:n.toolName,args:n.args}));break;case"tool-result":o.enqueue((0,l.formatDataStreamPart)("tool_result",{toolCallId:n.toolCallId,result:n.result}));break;case"error":o.enqueue((0,l.formatDataStreamPart)("error",e(n.error)));break;case"step-start":o.enqueue((0,l.formatDataStreamPart)("start_step",{messageId:n.messageId}));break;case"step-finish":o.enqueue((0,l.formatDataStreamPart)("finish_step",{finishReason:n.finishReason,usage:t?{promptTokens:n.usage.promptTokens,completionTokens:n.usage.completionTokens}:void 0,isContinued:n.isContinued}));break;case"finish":s&&o.enqueue((0,l.formatDataStreamPart)("finish_message",{finishReason:n.finishReason,usage:t?{promptTokens:n.usage.promptTokens,completionTokens:n.usage.completionTokens}:void 0}));break;default:throw new Error(`Unknown chunk type: ${i}`)}}}))}pipeDataStreamToResponse(e,{status:t,statusText:r,headers:a,data:s,getErrorMessage:n,sendUsage:o,sendReasoning:i,sendSources:l,experimental_sendFinish:u}={}){v({response:e,status:t,statusText:r,headers:y(a,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:s,getErrorMessage:n,sendUsage:o,sendReasoning:i,sendSources:l,experimental_sendFinish:u})})}pipeTextStreamToResponse(e,t){v({response:e,status:null==t?void 0:t.status,statusText:null==t?void 0:t.statusText,headers:y(null==t?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:null==e?void 0:e.getErrorMessage,sendUsage:null==e?void 0:e.sendUsage,sendReasoning:null==e?void 0:e.sendReasoning,sendSources:null==e?void 0:e.sendSources,experimental_sendFinish:null==e?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return(null==e?void 0:e.data)?Or(null==e?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:null==t?void 0:t.sendUsage,sendReasoning:null==t?void 0:t.sendReasoning,sendSources:null==t?void 0:t.sendSources,experimental_sendFinish:null==t?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:r,data:a,getErrorMessage:s,sendUsage:n,sendReasoning:o,sendSources:i,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:a,getErrorMessage:s,sendUsage:n,sendReasoning:o,sendSources:i,experimental_sendFinish:l}),{status:t,statusText:r,headers:h(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:null!=(t=null==e?void 0:e.status)?t:200,headers:h(null==e?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},$r=class extends u.AISDKError{constructor(e){super({name:"AI_NoSpeechGeneratedError",message:"No speech audio generated."}),this.responses=e.responses}},Fr=class extends Q{constructor({data:e,mimeType:t}){super({data:e,mimeType:t});let r="mp3";if(t){const e=t.split("/");2===e.length&&"audio/mpeg"!==t&&(r=e[1])}if(!r)throw new Error("Audio format must be provided or determinable from mimeType");this.format=r}};async function Jr({model:e,text:t,voice:r,outputFormat:a,instructions:s,speed:n,providerOptions:o={},maxRetries:i,abortSignal:l,headers:u}){var p;const{retry:m}=C({maxRetries:i}),c=await m(()=>e.doGenerate({text:t,voice:r,outputFormat:a,instructions:s,speed:n,abortSignal:l,headers:u,providerOptions:o}));if(!c.audio||0===c.audio.length)throw new $r({responses:[c.response]});return new Kr({audio:new Fr({data:c.audio,mimeType:null!=(p=ae({data:c.audio,signatures:ee}))?p:"audio/mp3"}),warnings:c.warnings,responses:[c.response],providerMetadata:c.providerMetadata})}var Kr=class{constructor(e){var t;this.audio=e.audio,this.warnings=e.warnings,this.responses=e.responses,this.providerMetadata=null!=(t=e.providerMetadata)?t:{}}},Gr=class extends u.AISDKError{constructor(e){super({name:"AI_NoTranscriptGeneratedError",message:"No transcript generated."}),this.responses=e.responses}};async function Vr({model:e,audio:t,providerOptions:r={},maxRetries:a,abortSignal:s,headers:n}){const{retry:o}=C({maxRetries:a}),i=t instanceof URL?(await fe({url:t})).data:Ie(t),l=await o(()=>{var t;return e.doGenerate({audio:i,abortSignal:s,headers:n,providerOptions:r,mediaType:null!=(t=ae({data:i,signatures:ee}))?t:"audio/wav"})});if(!l.text)throw new Gr({responses:[l.response]});return new Lr({text:l.text,segments:l.segments,language:l.language,durationInSeconds:l.durationInSeconds,warnings:l.warnings,responses:[l.response],providerMetadata:l.providerMetadata})}var Lr=class{constructor(e){var t;this.text=e.text,this.segments=e.segments,this.language=e.language,this.durationInSeconds=e.durationInSeconds,this.warnings=e.warnings,this.responses=e.responses,this.providerMetadata=null!=(t=e.providerMetadata)?t:{}}};function Br(e,t){if(void 0===e&&void 0===t)return;if(void 0===e)return t;if(void 0===t)return e;const r={...e};for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)){const s=t[a];if(void 0===s)continue;const n=a in e?e[a]:void 0,o=!(null===s||"object"!=typeof s||Array.isArray(s)||s instanceof Date||s instanceof RegExp),i=!(null==n||"object"!=typeof n||Array.isArray(n)||n instanceof Date||n instanceof RegExp);r[a]=o&&i?Br(n,s):s}return r}function Wr({settings:e}){return{middlewareVersion:"v1",transformParams:async({params:t})=>{var r;return{...e,...t,providerMetadata:Br(e.providerMetadata,t.providerMetadata),temperature:0===t.temperature||null==t.temperature?null!=(r=e.temperature)?r:0:t.temperature}}}}function Hr(e,t){if(0===t.length)return null;const r=e.indexOf(t);if(-1!==r)return r;for(let r=e.length-1;r>=0;r--){const a=e.substring(r);if(t.startsWith(a))return r}return null}function Zr({tagName:e,separator:t="\n",startWithReasoning:r=!1}){const a=`<${e}>`,s=`</${e}>`;return{middlewareVersion:"v1",wrapGenerate:async({doGenerate:e})=>{const{text:n,...o}=await e();if(null==n)return{text:n,...o};const i=r?a+n:n,l=new RegExp(`${a}(.*?)${s}`,"gs"),u=Array.from(i.matchAll(l));if(!u.length)return{text:i,...o};const p=u.map(e=>e[1]).join(t);let m=i;for(let e=u.length-1;e>=0;e--){const r=u[e],a=m.slice(0,r.index),s=m.slice(r.index+r[0].length);m=a+(a.length>0&&s.length>0?t:"")+s}return{...o,text:m,reasoning:p}},wrapStream:async({doStream:e})=>{const{stream:n,...o}=await e();let i=!0,l=!0,u=!1,p=r,m="";return{stream:n.pipeThrough(new TransformStream({transform:(e,r)=>{if("text-delta"===e.type)for(m+=e.textDelta;;){const e=p?s:a,t=Hr(m,e);if(null==t){n(m),m="";break}n(m.slice(0,t));if(!(t+e.length<=m.length)){m=m.slice(t);break}m=m.slice(t+e.length),p=!p,u=!0}else r.enqueue(e);function n(e){if(e.length>0){const a=!u||(p?i:l)?"":t;r.enqueue({type:p?"reasoning":"text-delta",textDelta:a+e}),u=!1,p?i=!1:l=!1}}}})),...o}}}}function Qr(){return{middlewareVersion:"v1",wrapStream:async({doGenerate:e})=>{const t=await e();return{stream:new ReadableStream({start(e){if(e.enqueue({type:"response-metadata",...t.response}),t.reasoning)if("string"==typeof t.reasoning)e.enqueue({type:"reasoning",textDelta:t.reasoning});else for(const r of t.reasoning)switch(r.type){case"text":e.enqueue({type:"reasoning",textDelta:r.text}),null!=r.signature&&e.enqueue({type:"reasoning-signature",signature:r.signature});break;case"redacted":e.enqueue({type:"redacted-reasoning",data:r.data})}if(t.text&&e.enqueue({type:"text-delta",textDelta:t.text}),t.toolCalls)for(const r of t.toolCalls)e.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:r.toolCallId,toolName:r.toolName,argsTextDelta:r.args}),e.enqueue({type:"tool-call",...r});e.enqueue({type:"finish",finishReason:t.finishReason,usage:t.usage,logprobs:t.logprobs,providerMetadata:t.providerMetadata}),e.close()}}),rawCall:t.rawCall,rawResponse:t.rawResponse,warnings:t.warnings}}}}var Xr=({model:e,middleware:t,modelId:r,providerId:a})=>_r(t).reverse().reduce((e,t)=>Yr({model:e,middleware:t,modelId:r,providerId:a}),e),Yr=({model:e,middleware:{transformParams:t,wrapGenerate:r,wrapStream:a},modelId:s,providerId:n})=>{var o;async function i({params:e,type:r}){return t?await t({params:e,type:r}):e}return{specificationVersion:"v1",provider:null!=n?n:e.provider,modelId:null!=s?s:e.modelId,defaultObjectGenerationMode:e.defaultObjectGenerationMode,supportsImageUrls:e.supportsImageUrls,supportsUrl:null==(o=e.supportsUrl)?void 0:o.bind(e),supportsStructuredOutputs:e.supportsStructuredOutputs,async doGenerate(t){const a=await i({params:t,type:"generate"}),s=async()=>e.doGenerate(a);return r?r({doGenerate:s,doStream:async()=>e.doStream(a),params:a,model:e}):s()},async doStream(t){const r=await i({params:t,type:"stream"}),s=async()=>e.doStream(r);return a?a({doGenerate:async()=>e.doGenerate(r),doStream:s,params:r,model:e}):s()}}},ea=Xr;function ta({messages:e,message:t}){return[...e.length>0&&e[e.length-1].id===t.id?e.slice(0,-1):e,t]}function ra({messages:e,responseMessages:t,_internal:{currentDate:r=()=>new Date}={}}){var a;const s=structuredClone(e);for(const e of t){const t=e.role,n=s[s.length-1],o="assistant"===n.role;switch(t){case"assistant":{let t=function(t){return("string"==typeof e.content?[]:e.content.filter(e=>"tool-call"===e.type)).map(e=>({state:"call",step:t,args:e.args,toolCallId:e.toolCallId,toolName:e.toolName}))};const i=[{type:"step-start"}];let p,m="";if("string"==typeof e.content)m=e.content,i.push({type:"text",text:e.content});else{let t;for(const r of e.content)switch(r.type){case"text":t=void 0,m+=r.text,i.push({type:"text",text:r.text});break;case"reasoning":null==t&&(t={type:"reasoning",reasoning:"",details:[]},i.push(t)),p=(null!=p?p:"")+r.text,t.reasoning+=r.text,t.details.push({type:"text",text:r.text,signature:r.signature});break;case"redacted-reasoning":null==t&&(t={type:"reasoning",reasoning:"",details:[]},i.push(t)),t.details.push({type:"redacted",data:r.data});break;case"tool-call":break;case"file":if(r.data instanceof URL)throw new u.AISDKError({name:"InvalidAssistantFileData",message:"File data cannot be a URL"});i.push({type:"file",mimeType:r.mimeType,data:Te(r.data)})}}if(o){const e=(0,l.extractMaxToolInvocationStep)(n.toolInvocations);null!=n.parts||(n.parts=[]),n.content=m,n.reasoning=p,n.parts.push(...i),n.toolInvocations=[...null!=(a=n.toolInvocations)?a:[],...t(void 0===e?0:e+1)],t(void 0===e?0:e+1).map(e=>({type:"tool-invocation",toolInvocation:e})).forEach(e=>{n.parts.push(e)})}else s.push({role:"assistant",id:e.id,createdAt:r(),content:m,reasoning:p,toolInvocations:t(0),parts:[...i,...t(0).map(e=>({type:"tool-invocation",toolInvocation:e}))]});break}case"tool":if(null!=n.toolInvocations||(n.toolInvocations=[]),"assistant"!==n.role)throw new Error(`Tool result must follow an assistant message: ${n.role}`);null!=n.parts||(n.parts=[]);for(const t of e.content){const e=n.toolInvocations.find(e=>e.toolCallId===t.toolCallId),r=n.parts.find(e=>"tool-invocation"===e.type&&e.toolInvocation.toolCallId===t.toolCallId);if(!e)throw new Error("Tool call not found in previous message");e.state="result";const a=e;a.result=t.result,r?r.toolInvocation=a:n.parts.push({type:"tool-invocation",toolInvocation:a})}break;default:throw new Error(`Unsupported message role: ${t}`)}}return s}function aa({languageModels:e,textEmbeddingModels:t,imageModels:r,fallbackProvider:a}){return{languageModel(t){if(null!=e&&t in e)return e[t];if(a)return a.languageModel(t);throw new u.NoSuchModelError({modelId:t,modelType:"languageModel"})},textEmbeddingModel(e){if(null!=t&&e in t)return t[e];if(a)return a.textEmbeddingModel(e);throw new u.NoSuchModelError({modelId:e,modelType:"textEmbeddingModel"})},imageModel(e){if(null!=r&&e in r)return r[e];if(null==a?void 0:a.imageModel)return a.imageModel(e);throw new u.NoSuchModelError({modelId:e,modelType:"imageModel"})}}}var sa,na=aa,oa="AI_NoSuchProviderError",ia=`vercel.ai.error.${oa}`,la=Symbol.for(ia),ua=class extends u.NoSuchModelError{constructor({modelId:e,modelType:t,providerId:r,availableProviders:a,message:s=`No such provider: ${r} (available providers: ${a.join()})`}){super({errorName:oa,modelId:e,modelType:t,message:s}),this[sa]=!0,this.providerId=r,this.availableProviders=a}static isInstance(e){return u.AISDKError.hasMarker(e,ia)}};function pa(e,{separator:t=":"}={}){const r=new ca({separator:t});for(const[t,a]of Object.entries(e))r.registerProvider({id:t,provider:a});return r}sa=la;var ma=pa,ca=class{constructor({separator:e}){this.providers={},this.separator=e}registerProvider({id:e,provider:t}){this.providers[e]=t}getProvider(e){const t=this.providers[e];if(null==t)throw new ua({modelId:e,modelType:"languageModel",providerId:e,availableProviders:Object.keys(this.providers)});return t}splitId(e,t){const r=e.indexOf(this.separator);if(-1===r)throw new u.NoSuchModelError({modelId:e,modelType:t,message:`Invalid ${t} id for registry: ${e} (must be in the format "providerId${this.separator}modelId")`});return[e.slice(0,r),e.slice(r+this.separator.length)]}languageModel(e){var t,r;const[a,s]=this.splitId(e,"languageModel"),n=null==(r=(t=this.getProvider(a)).languageModel)?void 0:r.call(t,s);if(null==n)throw new u.NoSuchModelError({modelId:e,modelType:"languageModel"});return n}textEmbeddingModel(e){var t;const[r,a]=this.splitId(e,"textEmbeddingModel"),s=this.getProvider(r),n=null==(t=s.textEmbeddingModel)?void 0:t.call(s,a);if(null==n)throw new u.NoSuchModelError({modelId:e,modelType:"textEmbeddingModel"});return n}imageModel(e){var t;const[r,a]=this.splitId(e,"imageModel"),s=this.getProvider(r),n=null==(t=s.imageModel)?void 0:t.call(s,a);if(null==n)throw new u.NoSuchModelError({modelId:e,modelType:"imageModel"});return n}};function da(e){return e}var ga="2024-11-05",ha=[ga,"2024-10-07"],fa=m.z.object({name:m.z.string(),version:m.z.string()}).passthrough(),ya=m.z.object({_meta:m.z.optional(m.z.object({}).passthrough())}).passthrough(),va=ya,ba=m.z.object({method:m.z.string(),params:m.z.optional(ya)}),wa=m.z.object({experimental:m.z.optional(m.z.object({}).passthrough()),logging:m.z.optional(m.z.object({}).passthrough()),prompts:m.z.optional(m.z.object({listChanged:m.z.optional(m.z.boolean())}).passthrough()),resources:m.z.optional(m.z.object({subscribe:m.z.optional(m.z.boolean()),listChanged:m.z.optional(m.z.boolean())}).passthrough()),tools:m.z.optional(m.z.object({listChanged:m.z.optional(m.z.boolean())}).passthrough())}).passthrough(),xa=va.extend({protocolVersion:m.z.string(),capabilities:wa,serverInfo:fa,instructions:m.z.optional(m.z.string())}),Sa=va.extend({nextCursor:m.z.optional(m.z.string())}),Ta=m.z.object({name:m.z.string(),description:m.z.optional(m.z.string()),inputSchema:m.z.object({type:m.z.literal("object"),properties:m.z.optional(m.z.object({}).passthrough())}).passthrough()}).passthrough(),Ia=Sa.extend({tools:m.z.array(Ta)}),Pa=m.z.object({type:m.z.literal("text"),text:m.z.string()}).passthrough(),Ea=m.z.object({type:m.z.literal("image"),data:m.z.string().base64(),mimeType:m.z.string()}).passthrough(),ka=m.z.object({uri:m.z.string(),mimeType:m.z.optional(m.z.string())}).passthrough(),ja=ka.extend({text:m.z.string()}),Ra=ka.extend({blob:m.z.string().base64()}),Ma=m.z.object({type:m.z.literal("resource"),resource:m.z.union([ja,Ra])}).passthrough(),_a=va.extend({content:m.z.array(m.z.union([Pa,Ea,Ma])),isError:m.z.boolean().default(!1).optional()}).or(va.extend({toolResult:m.z.unknown()})),Ca="2.0",Oa=m.z.object({jsonrpc:m.z.literal(Ca),id:m.z.union([m.z.string(),m.z.number().int()])}).merge(ba).strict(),Da=m.z.object({jsonrpc:m.z.literal(Ca),id:m.z.union([m.z.string(),m.z.number().int()]),result:va}).strict(),qa=m.z.object({jsonrpc:m.z.literal(Ca),id:m.z.union([m.z.string(),m.z.number().int()]),error:m.z.object({code:m.z.number().int(),message:m.z.string(),data:m.z.optional(m.z.unknown())})}).strict(),Na=m.z.object({jsonrpc:m.z.literal(Ca)}).merge(m.z.object({method:m.z.string(),params:m.z.optional(ya)})).strict(),za=m.z.union([Oa,Na,Da,qa]),Aa=class{constructor({url:e,headers:t}){this.connected=!1,this.url=new URL(e),this.headers=t}async start(){return new Promise((e,t)=>{if(this.connected)return e();this.abortController=new AbortController;(async()=>{var r,a,s;try{const s=new Headers(this.headers);s.set("Accept","text/event-stream");const n=await fetch(this.url.href,{headers:s,signal:null==(r=this.abortController)?void 0:r.signal});if(!n.ok||!n.body){const e=new Er({message:`MCP SSE Transport Error: ${n.status} ${n.statusText}`});return null==(a=this.onerror)||a.call(this,e),t(e)}const o=n.body.pipeThrough(new TextDecoderStream).pipeThrough((0,i.createEventSourceParserStream)()).getReader(),l=async()=>{var r,a,s;try{for(;;){const{done:t,value:s}=await o.read();if(t){if(this.connected)throw this.connected=!1,new Er({message:"MCP SSE Transport Error: Connection closed unexpectedly"});return}const{event:n,data:i}=s;if("endpoint"===n){if(this.endpoint=new URL(i,this.url),this.endpoint.origin!==this.url.origin)throw new Er({message:`MCP SSE Transport Error: Endpoint origin does not match connection origin: ${this.endpoint.origin}`});this.connected=!0,e()}else if("message"===n)try{const e=za.parse(JSON.parse(i));null==(r=this.onmessage)||r.call(this,e)}catch(e){const t=new Er({message:"MCP SSE Transport Error: Failed to parse message",cause:e});null==(a=this.onerror)||a.call(this,t)}}}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;null==(s=this.onerror)||s.call(this,e),t(e)}};this.sseConnection={close:()=>o.cancel()},l()}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;null==(s=this.onerror)||s.call(this,e),t(e)}})()})}async close(){var e,t,r;this.connected=!1,null==(e=this.sseConnection)||e.close(),null==(t=this.abortController)||t.abort(),null==(r=this.onclose)||r.call(this)}async send(e){var t,r,a;if(!this.endpoint||!this.connected)throw new Er({message:"MCP SSE Transport Error: Not connected"});try{const a=new Headers(this.headers);a.set("Content-Type","application/json");const s={method:"POST",headers:a,body:JSON.stringify(e),signal:null==(t=this.abortController)?void 0:t.signal},n=await fetch(this.endpoint,s);if(!n.ok){const e=await n.text().catch(()=>null),t=new Er({message:`MCP SSE Transport Error: POSTing to endpoint (HTTP ${n.status}): ${e}`});return void(null==(r=this.onerror)||r.call(this,t))}}catch(e){return void(null==(a=this.onerror)||a.call(this,e))}}};function Ua(e){if("sse"!==e.type)throw new Er({message:"Unsupported or invalid transport configuration. If you are using a custom transport, make sure it implements the MCPTransport interface."});return new Aa(e)}async function $a(e){const t=new Fa(e);return await t.init(),t}var Fa=class{constructor({transport:e,name:t="ai-sdk-mcp-client",onUncaughtError:r}){var a;this.requestMessageId=0,this.responseHandlers=new Map,this.serverCapabilities={},this.isClosed=!0,this.onUncaughtError=r,"start"in(a=e)&&"function"==typeof a.start&&"send"in a&&"function"==typeof a.send&&"close"in a&&"function"==typeof a.close?this.transport=e:this.transport=Ua(e),this.transport.onclose=()=>this.onClose(),this.transport.onerror=e=>this.onError(e),this.transport.onmessage=e=>{"method"in e?this.onError(new Er({message:"Unsupported message type"})):this.onResponse(e)},this.clientInfo={name:t,version:"1.0.0"}}async init(){try{await this.transport.start(),this.isClosed=!1;const e=await this.request({request:{method:"initialize",params:{protocolVersion:ga,capabilities:{},clientInfo:this.clientInfo}},resultSchema:xa});if(void 0===e)throw new Er({message:"Server sent invalid initialize result"});if(!ha.includes(e.protocolVersion))throw new Er({message:`Server's protocol version is not supported: ${e.protocolVersion}`});return this.serverCapabilities=e.capabilities,await this.notification({method:"notifications/initialized"}),this}catch(e){throw await this.close(),e}}async close(){var e;this.isClosed||(await(null==(e=this.transport)?void 0:e.close()),this.onClose())}async request({request:e,resultSchema:t,options:r}){return new Promise((a,s)=>{if(this.isClosed)return s(new Er({message:"Attempted to send a request from a closed client"}));const n=null==r?void 0:r.signal;null==n||n.throwIfAborted();const o=this.requestMessageId++,i={...e,jsonrpc:"2.0",id:o},l=()=>{this.responseHandlers.delete(o)};this.responseHandlers.set(o,e=>{if(null==n?void 0:n.aborted)return s(new Er({message:"Request was aborted",cause:n.reason}));if(e instanceof Error)return s(e);try{const r=t.parse(e.result);a(r)}catch(e){const t=new Er({message:"Failed to parse server initialization result",cause:e});s(t)}}),this.transport.send(i).catch(e=>{l(),s(e)})})}async listTools({params:e,options:t}={}){if(!this.serverCapabilities.tools)throw new Er({message:"Server does not support tools"});try{return this.request({request:{method:"tools/list",params:e},resultSchema:Ia,options:t})}catch(e){throw e}}async callTool({name:e,args:t,options:r}){if(!this.serverCapabilities.tools)throw new Er({message:"Server does not support tools"});try{return this.request({request:{method:"tools/call",params:{name:e,arguments:t}},resultSchema:_a,options:{signal:null==r?void 0:r.abortSignal}})}catch(e){throw e}}async notification(e){const t={...e,jsonrpc:"2.0"};await this.transport.send(t)}async tools({schemas:e="automatic"}={}){var t;const r={};try{const a=await this.listTools();for(const{name:s,description:n,inputSchema:o}of a.tools){if("automatic"!==e&&!(s in e))continue;const a="automatic"===e?(0,l.jsonSchema)({...o,properties:null!=(t=o.properties)?t:{},additionalProperties:!1}):e[s].parameters,i=this,u=da({description:n,parameters:a,execute:async(e,t)=>{var r;return null==(r=null==t?void 0:t.abortSignal)||r.throwIfAborted(),i.callTool({name:s,args:e,options:t})}});r[s]=u}return r}catch(e){throw e}}onClose(){if(this.isClosed)return;this.isClosed=!0;const e=new Er({message:"Connection closed"});for(const t of this.responseHandlers.values())t(e);this.responseHandlers.clear()}onError(e){this.onUncaughtError&&this.onUncaughtError(e)}onResponse(e){const t=Number(e.id),r=this.responseHandlers.get(t);if(void 0===r)throw new Er({message:`Protocol error: Received a response for an unknown message ID: ${JSON.stringify(e)}`});this.responseHandlers.delete(t),r("result"in e?e:new Er({message:e.error.message,cause:e.error}))}};function Ja(e,t,r){if(e.length!==t.length)throw new I({parameter:"vector1,vector2",value:{vector1Length:e.length,vector2Length:t.length},message:"Vectors must have the same length"});const a=e.length;if(0===a){if(null==r?void 0:r.throwErrorForEmptyVectors)throw new I({parameter:"vector1",value:e,message:"Vectors cannot be empty"});return 0}let s=0,n=0,o=0;for(let r=0;r<a;r++){const a=e[r],i=t[r];s+=a*a,n+=i*i,o+=a*i}return 0===s||0===n?0:o/(Math.sqrt(s)*Math.sqrt(n))}function Ka({chunks:e,initialDelayInMs:t=0,chunkDelayInMs:r=0,_internal:a}){var s;const n=null!=(s=null==a?void 0:a.delay)?s:i.delay;let o=0;return new ReadableStream({async pull(a){o<e.length?(await n(0===o?t:r),a.enqueue(e[o++])):a.close()}})}function Ga({threadId:e,messageId:t},r){const a=new ReadableStream({async start(a){var s;const n=new TextEncoder,o=e=>{a.enqueue(n.encode((0,l.formatAssistantStreamPart)("assistant_message",e)))},i=e=>{a.enqueue(n.encode((0,l.formatAssistantStreamPart)("data_message",e)))},u=async e=>{var t,r;let s;for await(const o of e)switch(o.event){case"thread.message.created":a.enqueue(n.encode((0,l.formatAssistantStreamPart)("assistant_message",{id:o.data.id,role:"assistant",content:[{type:"text",text:{value:""}}]})));break;case"thread.message.delta":{const e=null==(t=o.data.delta.content)?void 0:t[0];"text"===(null==e?void 0:e.type)&&null!=(null==(r=e.text)?void 0:r.value)&&a.enqueue(n.encode((0,l.formatAssistantStreamPart)("text",e.text.value)));break}case"thread.run.completed":case"thread.run.requires_action":s=o.data}return s};a.enqueue(n.encode((0,l.formatAssistantStreamPart)("assistant_control_data",{threadId:e,messageId:t})));try{await r({sendMessage:o,sendDataMessage:i,forwardStream:u})}catch(e){p=null!=(s=e.message)?s:`${e}`,a.enqueue(n.encode((0,l.formatAssistantStreamPart)("error",p)))}finally{a.close()}var p},pull(e){},cancel(){}});return new Response(a,{status:200,headers:{"Content-Type":"text/plain; charset=utf-8"}})}var Va={};function La(e={}){const t=new TextEncoder;let r="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(a,s){s.enqueue(t.encode(a)),r+=a,e.onToken&&await e.onToken(a),e.onText&&"string"==typeof a&&await e.onText(a)},async flush(){e.onCompletion&&await e.onCompletion(r),e.onFinal&&await e.onFinal(r)}})}function Ba(e,t){return e.pipeThrough(new TransformStream({transform:async(e,t)=>{var r;"string"!=typeof e?"event"in e?"on_chat_model_stream"===e.event&&Qa(null==(r=e.data)?void 0:r.chunk,t):Qa(e,t):t.enqueue(e)}})).pipeThrough(La(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(e,t)=>{t.enqueue((0,l.formatDataStreamPart)("text",e))}}))}function Wa(e,t){return Ba(e,t).pipeThrough(new TextEncoderStream)}function Ha(e,t){var r;const a=Ba(e,null==t?void 0:t.callbacks).pipeThrough(new TextEncoderStream),s=null==t?void 0:t.data,n=null==t?void 0:t.init,o=s?Or(s.stream,a):a;return new Response(o,{status:null!=(r=null==n?void 0:n.status)?r:200,statusText:null==n?void 0:n.statusText,headers:h(null==n?void 0:n.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Za(e,t){t.dataStream.merge(Ba(e,t.callbacks))}function Qa(e,t){if("string"==typeof e.content)t.enqueue(e.content);else{const r=e.content;for(const e of r)"text"===e.type&&t.enqueue(e.text)}}d(Va,{mergeIntoDataStream:()=>Za,toDataStream:()=>Wa,toDataStreamResponse:()=>Ha});var Xa={};function Ya(e,t){const r=as();return(0,i.convertAsyncIteratorToReadableStream)(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(e,t){t.enqueue(r(e.delta))}})).pipeThrough(La(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(e,t)=>{t.enqueue((0,l.formatDataStreamPart)("text",e))}}))}function es(e,t){return Ya(e,t).pipeThrough(new TextEncoderStream)}function ts(e,t={}){var r;const{init:a,data:s,callbacks:n}=t,o=Ya(e,n).pipeThrough(new TextEncoderStream),i=s?Or(s.stream,o):o;return new Response(i,{status:null!=(r=null==a?void 0:a.status)?r:200,statusText:null==a?void 0:a.statusText,headers:h(null==a?void 0:a.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function rs(e,t){t.dataStream.merge(Ya(e,t.callbacks))}function as(){let e=!0;return t=>(e&&(t=t.trimStart())&&(e=!1),t)}d(Xa,{mergeIntoDataStream:()=>rs,toDataStream:()=>es,toDataStreamResponse:()=>ts});var ss=class{constructor(){this.encoder=new TextEncoder,this.controller=null,this.isClosed=!1,this.warningTimeout=null;const e=this;this.stream=new ReadableStream({start:async t=>{e.controller=t},pull:e=>{},cancel:e=>{this.isClosed=!0}})}async close(){if(this.isClosed)throw new Error("Data Stream has already been closed.");if(!this.controller)throw new Error("Stream controller is not initialized.");this.controller.close(),this.isClosed=!0,this.warningTimeout&&clearTimeout(this.warningTimeout)}append(e){if(this.isClosed)throw new Error("Data Stream has already been closed.");if(!this.controller)throw new Error("Stream controller is not initialized.");this.controller.enqueue(this.encoder.encode((0,l.formatDataStreamPart)("data",[e])))}appendMessageAnnotation(e){if(this.isClosed)throw new Error("Data Stream has already been closed.");if(!this.controller)throw new Error("Stream controller is not initialized.");this.controller.enqueue(this.encoder.encode((0,l.formatDataStreamPart)("message_annotations",[e])))}}},5342,[3045,3048,3046,5343,3017]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.trace=e.propagation=e.metrics=e.diag=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.createTraceState=e.TraceFlags=e.SpanStatusCode=e.SpanKind=e.SamplingDecision=e.ProxyTracerProvider=e.ProxyTracer=e.defaultTextMapSetter=e.defaultTextMapGetter=e.ValueType=e.createNoopMeter=e.DiagLogLevel=e.DiagConsoleLogger=e.ROOT_CONTEXT=e.createContextKey=e.baggageEntryMetadataFromString=void 0;var t=r(d[0]);Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return t.baggageEntryMetadataFromString}});var n=r(d[1]);Object.defineProperty(e,"createContextKey",{enumerable:!0,get:function(){return n.createContextKey}}),Object.defineProperty(e,"ROOT_CONTEXT",{enumerable:!0,get:function(){return n.ROOT_CONTEXT}});var o=r(d[2]);Object.defineProperty(e,"DiagConsoleLogger",{enumerable:!0,get:function(){return o.DiagConsoleLogger}});var c=r(d[3]);Object.defineProperty(e,"DiagLogLevel",{enumerable:!0,get:function(){return c.DiagLogLevel}});var u=r(d[4]);Object.defineProperty(e,"createNoopMeter",{enumerable:!0,get:function(){return u.createNoopMeter}});var p=r(d[5]);Object.defineProperty(e,"ValueType",{enumerable:!0,get:function(){return p.ValueType}});var f=r(d[6]);Object.defineProperty(e,"defaultTextMapGetter",{enumerable:!0,get:function(){return f.defaultTextMapGetter}}),Object.defineProperty(e,"defaultTextMapSetter",{enumerable:!0,get:function(){return f.defaultTextMapSetter}});var l=r(d[7]);Object.defineProperty(e,"ProxyTracer",{enumerable:!0,get:function(){return l.ProxyTracer}});var b=r(d[8]);Object.defineProperty(e,"ProxyTracerProvider",{enumerable:!0,get:function(){return b.ProxyTracerProvider}});var y=r(d[9]);Object.defineProperty(e,"SamplingDecision",{enumerable:!0,get:function(){return y.SamplingDecision}});var P=r(d[10]);Object.defineProperty(e,"SpanKind",{enumerable:!0,get:function(){return P.SpanKind}});var T=r(d[11]);Object.defineProperty(e,"SpanStatusCode",{enumerable:!0,get:function(){return T.SpanStatusCode}});var O=r(d[12]);Object.defineProperty(e,"TraceFlags",{enumerable:!0,get:function(){return O.TraceFlags}});var s=r(d[13]);Object.defineProperty(e,"createTraceState",{enumerable:!0,get:function(){return s.createTraceState}});var S=r(d[14]);Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return S.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return S.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return S.isValidSpanId}});var I=r(d[15]);Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return I.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return I.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return I.INVALID_SPAN_CONTEXT}});const j=r(d[16]);Object.defineProperty(e,"context",{enumerable:!0,get:function(){return j.context}});const v=r(d[17]);Object.defineProperty(e,"diag",{enumerable:!0,get:function(){return v.diag}});const D=r(d[18]);Object.defineProperty(e,"metrics",{enumerable:!0,get:function(){return D.metrics}});const N=r(d[19]);Object.defineProperty(e,"propagation",{enumerable:!0,get:function(){return N.propagation}});const x=r(d[20]);Object.defineProperty(e,"trace",{enumerable:!0,get:function(){return x.trace}}),e.default={context:j.context,diag:v.diag,metrics:D.metrics,propagation:N.propagation,trace:x.trace}},5343,[5344,5357,5358,5354,5359,5360,5361,5362,5371,5373,5374,5375,5369,5376,5370,5368,5379,5380,5381,5384,5388]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;const t=r(d[0]),n=r(d[1]),o=r(d[2]),c=t.DiagAPI.instance();e.createBaggage=function(t={}){return new n.BaggageImpl(new Map(Object.entries(t)))},e.baggageEntryMetadataFromString=function(t){return'string'!=typeof t&&(c.error("Cannot create baggage metadata from unknown type: "+typeof t),t=''),{__TYPE__:o.baggageEntryMetadataSymbol,toString:()=>t}}},5344,[5345,5355,5356]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;const o=r(d[0]),t=r(d[1]),n=r(d[2]),s=r(d[3]);class l{constructor(){function l(o){return function(...t){const n=(0,s.getGlobal)('diag');if(n)return n[o](...t)}}const c=this;c.setLogger=(o,l={logLevel:n.DiagLogLevel.INFO})=>{var u,v,f;if(o===c){const o=new Error('Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation');return c.error(null!==(u=o.stack)&&void 0!==u?u:o.message),!1}'number'==typeof l&&(l={logLevel:l});const L=(0,s.getGlobal)('diag'),b=(0,t.createLogLevelDiagLogger)(null!==(v=l.logLevel)&&void 0!==v?v:n.DiagLogLevel.INFO,o);if(L&&!l.suppressOverrideMessage){const o=null!==(f=(new Error).stack)&&void 0!==f?f:'<failed to generate stacktrace>';L.warn(`Current logger will be overwritten from ${o}`),b.warn(`Current logger will overwrite one already registered from ${o}`)}return(0,s.registerGlobal)('diag',b,c,!0)},c.disable=()=>{(0,s.unregisterGlobal)("diag",c)},c.createComponentLogger=t=>new o.DiagComponentLogger(t),c.verbose=l('verbose'),c.debug=l('debug'),c.info=l('info'),c.warn=l('warn'),c.error=l('error')}static instance(){return this._instance||(this._instance=new l),this._instance}}e.DiagAPI=l},5345,[5346,5353,5354,5347]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;const n=r(d[0]);function t(t,o,s){const c=(0,n.getGlobal)('diag');if(c)return s.unshift(o),c[t](...s)}e.DiagComponentLogger=class{constructor(n){this._namespace=n.namespace||'DiagComponentLogger'}debug(...n){return t('debug',this._namespace,n)}error(...n){return t('error',this._namespace,n)}info(...n){return t('info',this._namespace,n)}warn(...n){return t('warn',this._namespace,n)}verbose(...n){return t('verbose',this._namespace,n)}}},5346,[5347]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;const o=r(d[0]),t=r(d[1]),n=r(d[2]),l=t.VERSION.split('.')[0],s=Symbol.for(`opentelemetry.js.api.${l}`),u=o._globalThis;e.registerGlobal=function(o,n,l,v=!1){var c;const p=u[s]=null!==(c=u[s])&&void 0!==c?c:{version:t.VERSION};if(!v&&p[o]){const t=new Error(`@opentelemetry/api: Attempted duplicate registration of API: ${o}`);return l.error(t.stack||t.message),!1}if(p.version!==t.VERSION){const n=new Error(`@opentelemetry/api: Registration of version v${p.version} for ${o} does not match previously registered API v${t.VERSION}`);return l.error(n.stack||n.message),!1}return p[o]=n,l.debug(`@opentelemetry/api: Registered a global for ${o} v${t.VERSION}.`),!0},e.getGlobal=function(o){var t,l;const v=null===(t=u[s])||void 0===t?void 0:t.version;if(v&&(0,n.isCompatible)(v))return null===(l=u[s])||void 0===l?void 0:l[o]},e.unregisterGlobal=function(o,n){n.debug(`@opentelemetry/api: Unregistering a global for ${o} v${t.VERSION}.`);const l=u[s];l&&delete l[o]}},5347,[5348,5351,5352]);
__d(function(g,r,i,a,_m,e,d){"use strict";var t=this&&this.__createBinding||(Object.create?function(t,n,o,c){void 0===c&&(c=o),Object.defineProperty(t,c,{enumerable:!0,get:function(){return n[o]}})}:function(t,n,o,c){void 0===c&&(c=o),t[c]=n[o]}),n=this&&this.__exportStar||function(n,o){for(var c in n)"default"===c||Object.prototype.hasOwnProperty.call(o,c)||t(o,n,c)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(d[0]),e)},5348,[5349]);
__d(function(g,r,i,a,_m,e,d){"use strict";var t=this&&this.__createBinding||(Object.create?function(t,n,o,c){void 0===c&&(c=o),Object.defineProperty(t,c,{enumerable:!0,get:function(){return n[o]}})}:function(t,n,o,c){void 0===c&&(c=o),t[c]=n[o]}),n=this&&this.__exportStar||function(n,o){for(var c in n)"default"===c||Object.prototype.hasOwnProperty.call(o,c)||t(o,n,c)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(d[0]),e)},5349,[5350]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis='object'==typeof globalThis?globalThis:g},5350,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION='1.9.0'},5351,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;const t=r(d[0]),n=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function u(t){const u=new Set([t]),o=new Set,c=t.match(n);if(!c)return()=>!1;const f=+c[1],s=+c[2],l=+c[3];if(null!=c[4])return function(n){return n===t};function h(t){return o.add(t),!1}function C(t){return u.add(t),!0}return function(t){if(u.has(t))return!0;if(o.has(t))return!1;const c=t.match(n);if(!c)return h(t);const _=+c[1],b=+c[2],p=+c[3];return null!=c[4]||f!==_?h(t):0===f?s===b&&l<=p?C(t):h(t):s<=b?C(t):h(t)}}e._makeCompatibilityCheck=u,e.isCompatible=u(t.VERSION)},5352,[5351]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;const o=r(d[0]);e.createLogLevelDiagLogger=function(L,n){function t(o,t){const v=n[o];return'function'==typeof v&&L>=t?v.bind(n):function(){}}return L<o.DiagLogLevel.NONE?L=o.DiagLogLevel.NONE:L>o.DiagLogLevel.ALL&&(L=o.DiagLogLevel.ALL),n=n||{},{error:t('error',o.DiagLogLevel.ERROR),warn:t('warn',o.DiagLogLevel.WARN),info:t('info',o.DiagLogLevel.INFO),debug:t('debug',o.DiagLogLevel.DEBUG),verbose:t('verbose',o.DiagLogLevel.VERBOSE)}}},5353,[5354]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0,(function(E){E[E.NONE=0]="NONE",E[E.ERROR=30]="ERROR",E[E.WARN=50]="WARN",E[E.INFO=60]="INFO",E[E.DEBUG=70]="DEBUG",E[E.VERBOSE=80]="VERBOSE",E[E.ALL=9999]="ALL"})(e.DiagLogLevel||(e.DiagLogLevel={}))},5354,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;class t{constructor(t){this._entries=t?new Map(t):new Map}getEntry(t){const n=this._entries.get(t);if(n)return Object.assign({},n)}getAllEntries(){return Array.from(this._entries.entries()).map(([t,n])=>[t,n])}setEntry(n,s){const o=new t(this._entries);return o._entries.set(n,s),o}removeEntry(n){const s=new t(this._entries);return s._entries.delete(n),s}removeEntries(...n){const s=new t(this._entries);for(const t of n)s._entries.delete(t);return s}clear(){return new t}}e.BaggageImpl=t},5355,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol('BaggageEntryMetadata')},5356,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0,e.createContextKey=function(t){return Symbol.for(t)};class t{constructor(n){const o=this;o._currentContext=n?new Map(n):new Map,o.getValue=t=>o._currentContext.get(t),o.setValue=(n,c)=>{const u=new t(o._currentContext);return u._currentContext.set(n,c),u},o.deleteValue=n=>{const c=new t(o._currentContext);return c._currentContext.delete(n),c}}}e.ROOT_CONTEXT=new t},5357,[]);
__d(function(g,r,_i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;const o=[{n:'error',c:'error'},{n:'warn',c:'warn'},{n:'info',c:'info'},{n:'debug',c:'debug'},{n:'verbose',c:'trace'}];e.DiagConsoleLogger=class{constructor(){function n(o){return function(...n){if(console){let c=console[o];if('function'!=typeof c&&(c=console.log),'function'==typeof c)return c.apply(console,n)}}}for(let c=0;c<o.length;c++)this[o[c].n]=n(o[c].c)}}},5358,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createNoopMeter=e.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=e.NOOP_OBSERVABLE_GAUGE_METRIC=e.NOOP_OBSERVABLE_COUNTER_METRIC=e.NOOP_UP_DOWN_COUNTER_METRIC=e.NOOP_HISTOGRAM_METRIC=e.NOOP_GAUGE_METRIC=e.NOOP_COUNTER_METRIC=e.NOOP_METER=e.NoopObservableUpDownCounterMetric=e.NoopObservableGaugeMetric=e.NoopObservableCounterMetric=e.NoopObservableMetric=e.NoopHistogramMetric=e.NoopGaugeMetric=e.NoopUpDownCounterMetric=e.NoopCounterMetric=e.NoopMetric=e.NoopMeter=void 0;class O{constructor(){}createGauge(O,o){return e.NOOP_GAUGE_METRIC}createHistogram(O,o){return e.NOOP_HISTOGRAM_METRIC}createCounter(O,o){return e.NOOP_COUNTER_METRIC}createUpDownCounter(O,o){return e.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(O,o){return e.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(O,o){return e.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(O,o){return e.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(O,o){}removeBatchObservableCallback(O){}}e.NoopMeter=O;class o{}e.NoopMetric=o;class t extends o{add(O,o){}}e.NoopCounterMetric=t;class _ extends o{add(O,o){}}e.NoopUpDownCounterMetric=_;class N extends o{record(O,o){}}e.NoopGaugeMetric=N;class E extends o{record(O,o){}}e.NoopHistogramMetric=E;class c{addCallback(O){}removeCallback(O){}}e.NoopObservableMetric=c;class M extends c{}e.NoopObservableCounterMetric=M;class C extends c{}e.NoopObservableGaugeMetric=C;class R extends c{}e.NoopObservableUpDownCounterMetric=R,e.NOOP_METER=new O,e.NOOP_COUNTER_METRIC=new t,e.NOOP_GAUGE_METRIC=new N,e.NOOP_HISTOGRAM_METRIC=new E,e.NOOP_UP_DOWN_COUNTER_METRIC=new _,e.NOOP_OBSERVABLE_COUNTER_METRIC=new M,e.NOOP_OBSERVABLE_GAUGE_METRIC=new C,e.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new R,e.createNoopMeter=function(){return e.NOOP_METER}},5359,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ValueType=void 0,(function(u){u[u.INT=0]="INT",u[u.DOUBLE=1]="DOUBLE"})(e.ValueType||(e.ValueType={}))},5360,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get(t,l){if(null!=t)return t[l]},keys:t=>null==t?[]:Object.keys(t)},e.defaultTextMapSetter={set(t,l,u){null!=t&&(t[l]=u)}}},5361,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;const t=new(r(d[0]).NoopTracer);e.ProxyTracer=class{constructor(t,s,n,o){this._provider=t,this.name=s,this.version=n,this.options=o}startSpan(t,s,n){return this._getTracer().startSpan(t,s,n)}startActiveSpan(t,s,n,o){const c=this._getTracer();return Reflect.apply(c.startActiveSpan,c,arguments)}_getTracer(){if(this._delegate)return this._delegate;const s=this._provider.getDelegateTracer(this.name,this.version,this.options);return s?(this._delegate=s,this._delegate):t}}},5362,[5363]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;const t=r(d[0]),n=r(d[1]),o=r(d[2]),c=r(d[3]),s=t.ContextAPI.getInstance();e.NoopTracer=class{startSpan(t,p,l=s.active()){if(Boolean(null==p?void 0:p.root))return new o.NonRecordingSpan;const u=l&&(0,n.getSpanContext)(l);return'object'==typeof(S=u)&&'string'==typeof S.spanId&&'string'==typeof S.traceId&&'number'==typeof S.traceFlags&&(0,c.isSpanContextValid)(u)?new o.NonRecordingSpan(u):new o.NonRecordingSpan;var S}startActiveSpan(t,o,c,p){let l,u,S;if(arguments.length<2)return;2===arguments.length?S=o:3===arguments.length?(l=o,S=c):(l=o,u=c,S=p);const f=null!=u?u:s.active(),v=this.startSpan(t,l,f),h=(0,n.setSpan)(f,v);return s.with(h,S,void 0,v)}}},5363,[5364,5366,5367,5370]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;const t=r(d[0]),n=r(d[1]),s=r(d[2]),o='context',c=new t.NoopContextManager;class l{constructor(){}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalContextManager(t){return(0,n.registerGlobal)(o,t,s.DiagAPI.instance())}active(){return this._getContextManager().active()}with(t,n,s,...o){return this._getContextManager().with(t,n,s,...o)}bind(t,n){return this._getContextManager().bind(t,n)}_getContextManager(){return(0,n.getGlobal)(o)||c}disable(){this._getContextManager().disable(),(0,n.unregisterGlobal)(o,s.DiagAPI.instance())}}e.ContextAPI=l},5364,[5365,5347,5345]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;const t=r(d[0]);e.NoopContextManager=class{active(){return t.ROOT_CONTEXT}with(t,n,o,...s){return n.call(o,...s)}bind(t,n){return n}enable(){return this}disable(){return this}}},5365,[5357]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getActiveSpan=e.getSpan=void 0;const t=r(d[0]),n=r(d[1]),o=r(d[2]),u=(0,t.createContextKey)('OpenTelemetry Context Key SPAN');function c(t){return t.getValue(u)||void 0}function p(t,n){return t.setValue(u,n)}e.getSpan=c,e.getActiveSpan=function(){return c(o.ContextAPI.getInstance().active())},e.setSpan=p,e.deleteSpan=function(t){return t.deleteValue(u)},e.setSpanContext=function(t,o){return p(t,new n.NonRecordingSpan(o))},e.getSpanContext=function(t){var n;return null===(n=c(t))||void 0===n?void 0:n.spanContext()}},5366,[5357,5367,5364]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;const t=r(d[0]);e.NonRecordingSpan=class{constructor(n=t.INVALID_SPAN_CONTEXT){this._spanContext=n}spanContext(){return this._spanContext}setAttribute(t,n){return this}setAttributes(t){return this}addEvent(t,n){return this}addLink(t){return this}addLinks(t){return this}setStatus(t){return this}updateName(t){return this}end(t){}isRecording(){return!1}recordException(t,n){}}},5367,[5368]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;const I=r(d[0]);e.INVALID_SPANID='0000000000000000',e.INVALID_TRACEID='00000000000000000000000000000000',e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:I.TraceFlags.NONE}},5368,[5369]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0,(function(c){c[c.NONE=0]="NONE",c[c.SAMPLED=1]="SAMPLED"})(e.TraceFlags||(e.TraceFlags={}))},5369,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;const n=r(d[0]),t=r(d[1]),o=/^([0-9a-f]{32})$/i,s=/^[0-9a-f]{16}$/i;function c(t){return o.test(t)&&t!==n.INVALID_TRACEID}function u(t){return s.test(t)&&t!==n.INVALID_SPANID}e.isValidTraceId=c,e.isValidSpanId=u,e.isSpanContextValid=function(n){return c(n.traceId)&&u(n.spanId)},e.wrapSpanContext=function(n){return new t.NonRecordingSpan(n)}},5370,[5368,5367]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;const t=r(d[0]),o=new(r(d[1]).NoopTracerProvider);e.ProxyTracerProvider=class{getTracer(o,l,c){var n;return null!==(n=this.getDelegateTracer(o,l,c))&&void 0!==n?n:new t.ProxyTracer(this,o,l,c)}getDelegate(){var t;return null!==(t=this._delegate)&&void 0!==t?t:o}setDelegate(t){this._delegate=t}getDelegateTracer(t,o,l){var c;return null===(c=this._delegate)||void 0===c?void 0:c.getTracer(t,o,l)}}},5371,[5362,5372]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;const o=r(d[0]);e.NoopTracerProvider=class{getTracer(c,t,n){return new o.NoopTracer}}},5372,[5363]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0,(function(D){D[D.NOT_RECORD=0]="NOT_RECORD",D[D.RECORD=1]="RECORD",D[D.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(e.SamplingDecision||(e.SamplingDecision={}))},5373,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0,(function(E){E[E.INTERNAL=0]="INTERNAL",E[E.SERVER=1]="SERVER",E[E.CLIENT=2]="CLIENT",E[E.PRODUCER=3]="PRODUCER",E[E.CONSUMER=4]="CONSUMER"})(e.SpanKind||(e.SpanKind={}))},5374,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0,(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(e.SpanStatusCode||(e.SpanStatusCode={}))},5375,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTraceState=void 0;const t=r(d[0]);e.createTraceState=function(c){return new t.TraceStateImpl(c)}},5376,[5377]);
__d(function(g,r,_i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceStateImpl=void 0;const t=r(d[0]);class n{constructor(t){this._internalState=new Map,t&&this._parse(t)}set(t,n){const s=this._clone();return s._internalState.has(t)&&s._internalState.delete(t),s._internalState.set(t,n),s}unset(t){const n=this._clone();return n._internalState.delete(t),n}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,n)=>(t.push(n+"="+this.get(n)),t),[]).join(",")}_parse(n){n.length>512||(this._internalState=n.split(",").reverse().reduce((n,s)=>{const i=s.trim(),l=i.indexOf("=");if(-1!==l){const _=i.slice(0,l),c=i.slice(l+1,s.length);(0,t.validateKey)(_)&&(0,t.validateValue)(c)&&n.set(_,c)}return n},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const t=new n;return t._internalState=new Map(this._internalState),t}}e.TraceStateImpl=n},5377,[5378]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;const t='[_0-9a-z-*/]',n=new RegExp(`^(?:${`[a-z]${t}{0,255}`}|${`[a-z0-9]${t}{0,240}@[a-z]${t}{0,13}`})$`),u=/^[ -~]{0,255}[!-~]$/,l=/,|=/;e.validateKey=function(t){return n.test(t)},e.validateValue=function(t){return u.test(t)&&!l.test(t)}},5378,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.context=void 0;const t=r(d[0]);e.context=t.ContextAPI.getInstance()},5379,[5364]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.diag=void 0;const t=r(d[0]);e.diag=t.DiagAPI.instance()},5380,[5345]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.metrics=void 0;const t=r(d[0]);e.metrics=t.MetricsAPI.getInstance()},5381,[5382]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetricsAPI=void 0;const t=r(d[0]),s=r(d[1]),n=r(d[2]),c='metrics';class o{constructor(){}static getInstance(){return this._instance||(this._instance=new o),this._instance}setGlobalMeterProvider(t){return(0,s.registerGlobal)(c,t,n.DiagAPI.instance())}getMeterProvider(){return(0,s.getGlobal)(c)||t.NOOP_METER_PROVIDER}getMeter(t,s,n){return this.getMeterProvider().getMeter(t,s,n)}disable(){(0,s.unregisterGlobal)(c,n.DiagAPI.instance())}}e.MetricsAPI=o},5382,[5383,5347,5345]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NOOP_METER_PROVIDER=e.NoopMeterProvider=void 0;const o=r(d[0]);class t{getMeter(t,O,_){return o.NOOP_METER}}e.NoopMeterProvider=t,e.NOOP_METER_PROVIDER=new t},5383,[5359]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.propagation=void 0;const o=r(d[0]);e.propagation=o.PropagationAPI.getInstance()},5384,[5385]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;const t=r(d[0]),o=r(d[1]),s=r(d[2]),n=r(d[3]),l=r(d[4]),c=r(d[5]),p='propagation',u=new o.NoopTextMapPropagator;class P{constructor(){this.createBaggage=l.createBaggage,this.getBaggage=n.getBaggage,this.getActiveBaggage=n.getActiveBaggage,this.setBaggage=n.setBaggage,this.deleteBaggage=n.deleteBaggage}static getInstance(){return this._instance||(this._instance=new P),this._instance}setGlobalPropagator(o){return(0,t.registerGlobal)(p,o,c.DiagAPI.instance())}inject(t,o,n=s.defaultTextMapSetter){return this._getGlobalPropagator().inject(t,o,n)}extract(t,o,n=s.defaultTextMapGetter){return this._getGlobalPropagator().extract(t,o,n)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,t.unregisterGlobal)(p,c.DiagAPI.instance())}_getGlobalPropagator(){return(0,t.getGlobal)(p)||u}}e.PropagationAPI=P},5385,[5347,5386,5361,5387,5344,5345]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;e.NoopTextMapPropagator=class{inject(t,o){}extract(t,o){return t}fields(){return[]}}},5386,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getActiveBaggage=e.getBaggage=void 0;const t=r(d[0]),n=(0,r(d[1]).createContextKey)('OpenTelemetry Baggage Key');function u(t){return t.getValue(n)||void 0}e.getBaggage=u,e.getActiveBaggage=function(){return u(t.ContextAPI.getInstance().active())},e.setBaggage=function(t,u){return t.setValue(n,u)},e.deleteBaggage=function(t){return t.deleteValue(n)}},5387,[5364,5357]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.trace=void 0;const t=r(d[0]);e.trace=t.TraceAPI.getInstance()},5388,[5389]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;const t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),c=r(d[4]),p='trace';class h{constructor(){this._proxyTracerProvider=new n.ProxyTracerProvider,this.wrapSpanContext=s.wrapSpanContext,this.isSpanContextValid=s.isSpanContextValid,this.deleteSpan=o.deleteSpan,this.getSpan=o.getSpan,this.getActiveSpan=o.getActiveSpan,this.getSpanContext=o.getSpanContext,this.setSpan=o.setSpan,this.setSpanContext=o.setSpanContext}static getInstance(){return this._instance||(this._instance=new h),this._instance}setGlobalTracerProvider(n){const s=(0,t.registerGlobal)(p,this._proxyTracerProvider,c.DiagAPI.instance());return s&&this._proxyTracerProvider.setDelegate(n),s}getTracerProvider(){return(0,t.getGlobal)(p)||this._proxyTracerProvider}getTracer(t,n){return this.getTracerProvider().getTracer(t,n)}disable(){(0,t.unregisterGlobal)(p,c.DiagAPI.instance()),this._proxyTracerProvider=new n.ProxyTracerProvider}}e.TraceAPI=h},5389,[5347,5371,5370,5366,5345]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,"webSearchTool",{enumerable:!0,get:function(){return s}});var t=r(d[0]);const s={description:"Web'de g\xfcncel m\xfczik bilgileri, \u015fark\u0131 listeleri, pop\xfcler \u015fark\u0131lar ve m\xfczik trendleri ara\u015ft\u0131r\u0131r. Billboard, Spotify Charts, YouTube Trending, T\xfcrkiye m\xfczik listeleri gibi g\xfcncel kaynaklardan bilgi \xe7eker.",parameters:t.z.object({query:t.z.string().describe("Arama sorgusu. \xd6rnek: '2025 pop\xfcler T\xfcrk\xe7e \u015fark\u0131lar', 'Spotify T\xfcrkiye top 50', 'Billboard hot 100 2024'")}),execute:async({query:t})=>{try{const s=process.env.TAVILY_API_KEY;if(!s)return{results:[],answer:"",error:"TAVILY_API_KEY environment variable is not set. Please add it to your .env file."};const n={api_key:s,query:t,search_depth:"basic",include_answer:!0,include_raw_content:!1,max_results:5},o=await fetch("https://api.tavily.com/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!o.ok){const t=await o.text();throw new Error(`Tavily API error: ${o.statusText} - ${t}`)}const l=await o.json();return{results:l.results||[],answer:l.answer||""}}catch(t){return{results:[],error:t.message||"Web search failed"}}}}},5390,[3017]);
module.exports = __r(5340);